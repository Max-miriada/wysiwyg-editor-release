/*!
 * froala_editor v3.0.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2019 Froala Labs
 */
var domino = require('domino');
var Element = domino.impl.Element; // etc
var window = domino.createWindow('<h1>Hello world</h1>', 'http://example.com');
var document = window.document;
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("ssr-froala-editor")):"function"==typeof define&&define.amd?define(["ssr-froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if((e=e&&e.hasOwnProperty("default")?e.default:e).PLUGINS.align=function(e){var t=e.$;return{apply:function(a){var n=e.selection.element();if(t(n).parents(".fr-img-caption").length)t(n).css("text-align",a);else{e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore();for(var r=e.selection.blocks(),i=0;i<r.length;i++)t(r[i]).css("text-align",a).removeClass("fr-temp-div"),""===t(r[i]).attr("class")&&t(r[i]).removeAttr("class"),""===t(r[i]).attr("style")&&t(r[i]).removeAttr("style");e.selection.save(),e.html.unwrap(),e.selection.restore()}},refresh:function(a){var n=e.selection.blocks();if(n.length){var r=e.helpers.getAlignment(t(n[0]));a.find("> *").first().replaceWith(e.icon.create("align-"+r))}},refreshOnShow:function(a,n){var r=e.selection.blocks();if(r.length){var i=e.helpers.getAlignment(t(r[0]));n.find('a.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}},refreshForToolbar:function(a){var n=e.selection.blocks();if(n.length){var r=e.helpers.getAlignment(t(n[0]));"align"+(r=r.charAt(0).toUpperCase()+r.slice(1))===a.attr("data-cmd")&&a.addClass("fr-active")}}}},e.DefineIcon("align",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("align-center",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.DefineIcon("align-justify",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.align.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(a[n])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),e.RegisterCommand("alignLeft",{type:"button",icon:"align-left",title:"Align Left",callback:function(){this.align.apply("left")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignRight",{type:"button",icon:"align-right",title:"Align Right",callback:function(){this.align.apply("right")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignCenter",{type:"button",icon:"align-center",title:"Align Center",callback:function(){this.align.apply("center")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),e.RegisterCommand("alignJustify",{type:"button",icon:"align-justify",title:"Align Justify",callback:function(){this.align.apply("justify")},refresh:function(e){this.align.refreshForToolbar(e)},plugin:"align"}),Object.assign(e.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.PLUGINS.charCounter=function(t){var a,n=t.$;function r(){return(t.el.textContent||"").replace(/\u200B/g,"").length}function i(a){if(t.opts.charCounterMax<0)return!0;if(r()<t.opts.charCounterMax)return!0;var n=a.which;return!(!t.keys.ctrlKey(a)&&t.keys.isCharacter(n)||n===e.KEYCODE.IME)||(a.preventDefault(),a.stopPropagation(),t.events.trigger("charCounter.exceeded"),!1)}function s(e){return t.opts.charCounterMax<0?e:n("<div>").html(e).text().length+r()<=t.opts.charCounterMax?e:(t.events.trigger("charCounter.exceeded"),"")}function o(){if(t.opts.charCounterCount){var e=r()+(0<t.opts.charCounterMax?"/"+t.opts.charCounterMax:"");a.text("".concat(t.language.translate("Characters")," : ").concat(e)),t.opts.toolbarBottom&&a.css("margin-bottom",t.$tb.outerHeight(!0));var n=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;0<=n&&("rtl"==t.opts.direction?a.css("margin-left",n):a.css("margin-right",n))}}return{_init:function(){return!!t.$wp&&!!t.opts.charCounterCount&&((a=n(document.createElement("span")).attr("class","fr-counter")).css("bottom",t.$wp.css("border-bottom-width")),t.$second_tb&&t.$second_tb.append(a),t.events.on("keydown",i,!0),t.events.on("paste.afterCleanup",s),t.events.on("keyup contentChanged input",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",o),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){n(t.o_win).off("resize.char"+t.id),a.removeData().remove(),a=null}))},count:r}},e.PLUGINS.codeBeautifier=function(){var e,t,a,n,r={};function i(e,t){var a={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},n={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=(e=e||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n");var r=t.indent_size||4,i=t.indent_char||" ",s=void 0===t.selector_separator_newline||t.selector_separator_newline,o=void 0!==t.end_with_newline&&t.end_with_newline,l=void 0===t.newline_between_rules||t.newline_between_rules,c=t.eol?t.eol:"\n";"string"==typeof r&&(r=parseInt(r,10)),t.indent_with_tabs&&(i="\t",r=1),c=c.replace(/\\r/,"\r").replace(/\\n/,"\n");var d,f=/^\s+$/,p=-1,u=0;function h(){return(d=e.charAt(++p))||""}function g(t){var a,n=p;return t&&v(),a=e.charAt(p+1)||"",p=n-1,h(),a}function m(t){for(var a=p;h();)if("\\"===d)h();else{if(-1!==t.indexOf(d))break;if("\n"===d)break}return e.substring(a,p+1)}function v(){for(var e="";f.test(g());)h(),e+=d;return e}function E(){var e="";for(d&&f.test(d)&&(e=d);f.test(h());)e+=d;return e}function b(t){var a=p;for(t="/"===g(),h();h();){if(!t&&"*"===d&&"/"===g()){h();break}if(t&&"\n"===d)return e.substring(a,p)}return e.substring(a,p)+d}function A(t){return e.substring(p-t.length,p).toLowerCase()===t}function T(){for(var t=0,a=p+1;a<e.length;a++){var n=e.charAt(a);if("{"===n)return!0;if("("===n)t+=1;else if(")"===n){if(0===t)return!1;t-=1}else if(" "===n||"}"===n)return!1}return!1}for(var C,R,S=e.match(/^[\t ]*/)[0],L=new Array(r+1).join(i),_=0,w=0,y={"{":function(e){y.singleSpace(),I.push(e),y.newLine()},"}":function(e){y.newLine(),I.push(e),y.newLine()},_lastCharWhitespace:function(){return f.test(I[I.length-1])},newLine:function(e){I.length&&(e||"\n"===I[I.length-1]||y.trim(),I.push("\n"),S&&I.push(S))},singleSpace:function(){I.length&&!y._lastCharWhitespace()&&I.push(" ")},preserveSingleSpace:function(){isAfterSpace&&y.singleSpace()},trim:function(){for(;y._lastCharWhitespace();)I.pop()}},I=[],O=!1,x=!1,F=!1,k="",N="";;){var D=-1!==E().indexOf("\n");if(N=k,!(k=d))break;if("/"===d&&"*"===g()){var M=0===_;(D||M)&&y.newLine(),I.push(b()),y.newLine(),M&&y.newLine(!0)}else if("/"===d&&"/"===g())D||"{"===N||y.trim(),y.singleSpace(),I.push(b()),y.newLine();else if("@"===d){y.preserveSingleSpace(),I.push(d);var B=(C=p,R=m(": , {}()[]/='\""),p=C-1,h(),R);B.match(/[ :]$/)&&(h(),B=m(": ").replace(/\s$/,""),I.push(B),y.singleSpace()),(B=B.replace(/\s$/,""))in a&&(w+=1,B in n&&(F=!0))}else"#"===d&&"{"===g()?(y.preserveSingleSpace(),I.push(m("}"))):"{"===d?"}"===g(!0)?(v(),h(),y.singleSpace(),I.push("{}"),y.newLine(),l&&0===_&&y.newLine(!0)):(_++,S+=L,y["{"](d),O=F?(F=!1,w<_):w<=_):"}"===d?(_--,S=S.slice(0,-r),y["}"](d),x=O=!1,w&&w--,l&&0===_&&y.newLine(!0)):":"===d?(v(),!O&&!F||A("&")||T()?":"===g()?(h(),I.push("::")):I.push(":"):(x=!0,I.push(":"),y.singleSpace())):'"'===d||"'"===d?(y.preserveSingleSpace(),I.push(m(d))):" "===d?(x=!1,I.push(d),y.newLine()):"("===d?A("url")?(I.push(d),v(),h()&&(")"!==d&&'"'!==d&&"'"!==d?I.push(m(")")):p--)):(u++,y.preserveSingleSpace(),I.push(d),v()):")"===d?(I.push(d),u--):","===d?(I.push(d),v(),s&&!x&&u<1?y.newLine():y.singleSpace()):("]"===d||("["===d?y.preserveSingleSpace():"="===d?(v(),d="="):y.preserveSingleSpace()),I.push(d))}var P="";return S&&(P+=S),P+=I.join("").replace(/[\r\n\t ]+$/,""),o&&(P+="\n"),"\n"!=c&&(P=P.replace(/[\n]/g,c)),P}function s(e,t){for(var a=0;a<t.length;a+=1)if(t[a]===e)return!0;return!1}function o(e){return e.replace(/^\s+|\s+$/g,"")}function l(e,t){return new function(e,t){var a,n,i,l,p,u,h,g,m,v,E,b,A,T=[],C="";function R(e,t){var n=0;return e&&(n=e.indentation_level,!a.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:a.get_line_number(),ternary_depth:0}}for(b={TK_START_EXPR:function(){M();var e=c.Expression;if("["===l.text){if("TK_WORD"===p||")"===g.last_text)return"TK_RESERVED"===p&&s(g.last_text,i.line_starters)&&(a.space_before_token=!0),x(e),I(),O(),void(A.space_in_paren&&(a.space_before_token=!0));e=c.ArrayLiteral,F(g.mode)&&("["!==g.last_text&&(","!==g.last_text||"]"!==u&&"}"!==u)||A.keep_array_indentation||w())}else"TK_RESERVED"===p&&"for"===g.last_text?e=c.ForInitializer:"TK_RESERVED"===p&&s(g.last_text,["if","while"])&&(e=c.Conditional);" "===g.last_text||"TK_START_BLOCK"===p?w():"TK_END_EXPR"===p||"TK_START_EXPR"===p||"TK_END_BLOCK"===p||"."===g.last_text?_(l.wanted_newline):"TK_RESERVED"===p&&"("===l.text||"TK_WORD"===p||"TK_OPERATOR"===p?"TK_RESERVED"===p&&("function"===g.last_word||"typeof"===g.last_word)||"*"===g.last_text&&"function"===u?A.space_after_anon_function&&(a.space_before_token=!0):"TK_RESERVED"!==p||!s(g.last_text,i.line_starters)&&"catch"!==g.last_text||A.space_before_conditional&&(a.space_before_token=!0):a.space_before_token=!0,"("===l.text&&"TK_RESERVED"===p&&"await"===g.last_word&&(a.space_before_token=!0),"("===l.text&&("TK_EQUALS"!==p&&"TK_OPERATOR"!==p||D()||_()),x(e),I(),A.space_in_paren&&(a.space_before_token=!0),O()},TK_END_EXPR:function(){for(;g.mode===c.Statement;)N();g.multiline_frame&&_("]"===l.text&&F(g.mode)&&!A.keep_array_indentation),A.space_in_paren&&("TK_START_EXPR"!==p||A.space_in_empty_paren?a.space_before_token=!0:(a.trim(),a.space_before_token=!1)),"]"===l.text&&A.keep_array_indentation?(I(),N()):(N(),I()),a.remove_redundant_indentation(m),g.do_while&&m.mode===c.Conditional&&(m.mode=c.Expression,g.do_block=!1,g.do_while=!1)},TK_START_BLOCK:function(){var e=P(1),t=P(2);t&&(":"===t.text&&s(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||s(e.text,["get","set"])&&s(t.type,["TK_WORD","TK_RESERVED"]))?s(u,["class","interface"])?x(c.BlockStatement):x(c.ObjectLiteral):x(c.BlockStatement);var n=!e.comments_before.length&&"}"===e.text&&"function"===g.last_word&&"TK_END_EXPR"===p;"expand"===A.brace_style||"none"===A.brace_style&&l.wanted_newline?"TK_OPERATOR"!==p&&(n||"TK_EQUALS"===p||"TK_RESERVED"===p&&B(g.last_text)&&"else"!==g.last_text)?a.space_before_token=!0:w(!1,!0):"TK_OPERATOR"!==p&&"TK_START_EXPR"!==p?"TK_START_BLOCK"===p?w():a.space_before_token=!0:F(m.mode)&&","===g.last_text&&("}"===u?a.space_before_token=!0:w()),I(),O()},TK_END_BLOCK:function(){for(;g.mode===c.Statement;)N();var e="TK_START_BLOCK"===p;"expand"===A.brace_style?e||w():e||(F(g.mode)&&A.keep_array_indentation?(A.keep_array_indentation=!1,w(),A.keep_array_indentation=!0):w()),N(),I()},TK_WORD:U,TK_RESERVED:U,TK_SEMICOLON:function(){for(M()&&(a.space_before_token=!1);g.mode===c.Statement&&!g.if_block&&!g.do_block;)N();I()},TK_STRING:function(){M()?a.space_before_token=!0:"TK_RESERVED"===p||"TK_WORD"===p?a.space_before_token=!0:"TK_COMMA"===p||"TK_START_EXPR"===p||"TK_EQUALS"===p||"TK_OPERATOR"===p?D()||_():w(),I()},TK_EQUALS:function(){M(),g.declaration_statement&&(g.declaration_assignment=!0),a.space_before_token=!0,I(),a.space_before_token=!0},TK_OPERATOR:function(){if(M(),"TK_RESERVED"===p&&B(g.last_text))return a.space_before_token=!0,void I();if("*"!==l.text||"TK_DOT"!==p){if(":"===l.text&&g.in_case)return g.case_body=!0,O(),I(),w(),void(g.in_case=!1);if("::"!==l.text){"TK_OPERATOR"===p&&_();var e=!0,t=!0;s(l.text,["--","++","!","~"])||s(l.text,["-","+"])&&(s(p,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||s(g.last_text,i.line_starters)||","===g.last_text)?(t=e=!1,!l.wanted_newline||"--"!==l.text&&"++"!==l.text||w(!1,!0)," "===g.last_text&&k(g.mode)&&(e=!0),"TK_RESERVED"===p?e=!0:"TK_END_EXPR"===p?e=!("]"===g.last_text&&("--"===l.text||"++"===l.text)):"TK_OPERATOR"===p&&(e=s(l.text,["--","-","++","+"])&&s(g.last_text,["--","-","++","+"]),s(l.text,["+","-"])&&s(g.last_text,["--","++"])&&(t=!0)),g.mode!==c.BlockStatement&&g.mode!==c.Statement||"{"!==g.last_text&&" "!==g.last_text||w()):":"===l.text?0===g.ternary_depth?e=!1:g.ternary_depth-=1:"?"===l.text?g.ternary_depth+=1:"*"===l.text&&"TK_RESERVED"===p&&"function"===g.last_text&&(t=e=!1),a.space_before_token=a.space_before_token||e,I(),a.space_before_token=t}else I()}else I()},TK_COMMA:function(){if(g.declaration_statement)return k(g.parent.mode)&&(g.declaration_assignment=!1),I(),void(g.declaration_assignment?w(g.declaration_assignment=!1,!0):(a.space_before_token=!0,A.comma_first&&_()));I(),g.mode===c.ObjectLiteral||g.mode===c.Statement&&g.parent.mode===c.ObjectLiteral?(g.mode===c.Statement&&N(),w()):(a.space_before_token=!0,A.comma_first&&_())},TK_BLOCK_COMMENT:function(){if(a.raw)return a.add_raw_token(l),void(l.directives&&"end"===l.directives.preserve&&(A.test_output_raw||(a.raw=!1)));if(l.directives)return w(!1,!0),I(),"start"===l.directives.preserve&&(a.raw=!0),void w(!1,!0);if(!r.newline.test(l.text)&&!l.wanted_newline)return a.space_before_token=!0,I(),void(a.space_before_token=!0);var e,t=function(e){var t;e=e.replace(/\x0d/g,"");var a=[];for(t=e.indexOf("\n");-1!==t;)a.push(e.substring(0,t)),e=e.substring(t+1),t=e.indexOf("\n");return e.length&&a.push(e),a}(l.text),n=!1,i=!1,s=l.whitespace_before,c=s.length;for(w(!1,!0),1<t.length&&(function(e,t){for(var a=0;a<e.length;a++){var n=o(e[a]);if(n.charAt(0)!==t)return!1}return!0}(t.slice(1),"*")?n=!0:function(e,t){for(var a,n=0,r=e.length;n<r;n++)if((a=e[n])&&0!==a.indexOf(t))return!1;return!0}(t.slice(1),s)&&(i=!0)),I(t[0]),e=1;e<t.length;e++)w(!1,!0),n?I(" "+t[e].replace(/^\s+/g,"")):i&&t[e].length>c?I(t[e].substring(c)):a.add_token(t[e]);w(!1,!0)},TK_COMMENT:function(){l.wanted_newline?w(!1,!0):a.trim(!0),a.space_before_token=!0,I(),w(!1,!0)},TK_DOT:function(){M(),"TK_RESERVED"===p&&B(g.last_text)?a.space_before_token=!0:_(")"===g.last_text&&A.break_chained_methods),I()},TK_UNKNOWN:function(){I(),"\n"===l.text[l.text.length-1]&&w()},TK_EOF:function(){for(;g.mode===c.Statement;)N()}},A={},void 0!==(t=t||{}).braces_on_own_line&&(A.brace_style=t.braces_on_own_line?"expand":"collapse"),A.brace_style=t.brace_style?t.brace_style:A.brace_style?A.brace_style:"collapse","expand-strict"===A.brace_style&&(A.brace_style="expand"),A.indent_size=t.indent_size?parseInt(t.indent_size,10):4,A.indent_char=t.indent_char?t.indent_char:" ",A.eol=t.eol?t.eol:"\n",A.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,A.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,A.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),A.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,A.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,A.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,A.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,A.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,A.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,A.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,A.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),A.e4x=void 0!==t.e4x&&t.e4x,A.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,A.comma_first=void 0!==t.comma_first&&t.comma_first,A.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,A.jslint_happy&&(A.space_after_anon_function=!0),t.indent_with_tabs&&(A.indent_char="\t",A.indent_size=1),A.eol=A.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),h="";0<A.indent_size;)h+=A.indent_char,A.indent_size-=1;var S=0;if(e&&e.length){for(;" "===e.charAt(S)||"\t"===e.charAt(S);)C+=e.charAt(S),S+=1;e=e.substring(S)}function L(e){var t=e.newlines;if(A.keep_array_indentation&&F(g.mode))for(var a=0;a<t;a+=1)w(0<a);else if(A.max_preserve_newlines&&t>A.max_preserve_newlines&&(t=A.max_preserve_newlines),A.preserve_newlines&&1<e.newlines){w();for(var n=1;n<t;n+=1)w(!0)}b[(l=e).type]()}function _(e){e=void 0!==e&&e,a.just_added_newline()||(A.preserve_newlines&&l.wanted_newline||e?w(!1,!0):A.wrap_line_length&&a.current_line.get_character_count()+l.text.length+(a.space_before_token?1:0)>=A.wrap_line_length&&w(!1,!0))}function w(e,t){if(!t&&" "!==g.last_text&&","!==g.last_text&&"="!==g.last_text&&"TK_OPERATOR"!==p)for(;g.mode===c.Statement&&!g.if_block&&!g.do_block;)N();a.add_new_line(e)&&(g.multiline_frame=!0)}function y(){a.just_added_newline()&&(A.keep_array_indentation&&F(g.mode)&&l.wanted_newline?(a.current_line.push(l.whitespace_before),a.space_before_token=!1):a.set_indent(g.indentation_level)&&(g.line_indent_level=g.indentation_level))}function I(e){a.raw?a.add_raw_token(l):(A.comma_first&&"TK_COMMA"===p&&a.just_added_newline()&&","===a.previous_line.last()&&(a.previous_line.pop(),y(),a.add_token(","),a.space_before_token=!0),e=e||l.text,y(),a.add_token(e))}function O(){g.indentation_level+=1}function x(e){m=g?(v.push(g),g):R(null,e),g=R(m,e)}function F(e){return e===c.ArrayLiteral}function k(e){return s(e,[c.Expression,c.ForInitializer,c.Conditional])}function N(){0<v.length&&(m=g,g=v.pop(),m.mode===c.Statement&&a.remove_redundant_indentation(m))}function D(){return g.parent.mode===c.ObjectLiteral&&g.mode===c.Statement&&(":"===g.last_text&&0===g.ternary_depth||"TK_RESERVED"===p&&s(g.last_text,["get","set"]))}function M(){return!!("TK_RESERVED"===p&&s(g.last_text,["const","let","const"])&&"TK_WORD"===l.type||"TK_RESERVED"===p&&"do"===g.last_text||"TK_RESERVED"===p&&"return"===g.last_text&&!l.wanted_newline||"TK_RESERVED"===p&&"else"===g.last_text&&("TK_RESERVED"!==l.type||"if"!==l.text)||"TK_END_EXPR"===p&&(m.mode===c.ForInitializer||m.mode===c.Conditional)||"TK_WORD"===p&&g.mode===c.BlockStatement&&!g.in_case&&"--"!==l.text&&"++"!==l.text&&"function"!==u&&"TK_WORD"!==l.type&&"TK_RESERVED"!==l.type||g.mode===c.ObjectLiteral&&(":"===g.last_text&&0===g.ternary_depth||"TK_RESERVED"===p&&s(g.last_text,["get","set"])))&&(x(c.Statement),O(),"TK_RESERVED"===p&&s(g.last_text,["const","let","const"])&&"TK_WORD"===l.type&&(g.declaration_statement=!0),D()||_("TK_RESERVED"===l.type&&s(l.text,["do","for","if","while"])),!0)}function B(e){return s(e,["case","return","do","if","throw","else"])}function P(e){var t=n+(e||0);return t<0||t>=T.length?null:T[t]}function U(){if("TK_RESERVED"===l.type&&g.mode!==c.ObjectLiteral&&s(l.text,["set","get"])&&(l.type="TK_WORD"),"TK_RESERVED"===l.type&&g.mode===c.ObjectLiteral&&":"===P(1).text&&(l.type="TK_WORD"),M()||!l.wanted_newline||k(g.mode)||"TK_OPERATOR"===p&&"--"!==g.last_text&&"++"!==g.last_text||"TK_EQUALS"===p||!A.preserve_newlines&&"TK_RESERVED"===p&&s(g.last_text,["const","let","const","set","get"])||w(),g.do_block&&!g.do_while){if("TK_RESERVED"===l.type&&"while"===l.text)return a.space_before_token=!0,I(),a.space_before_token=!0,void(g.do_while=!0);w(),g.do_block=!1}if(g.if_block)if(g.else_block||"TK_RESERVED"!==l.type||"else"!==l.text){for(;g.mode===c.Statement;)N();g.if_block=!1,g.else_block=!1}else g.else_block=!0;return"TK_RESERVED"===l.type&&("case"===l.text||"default"===l.text&&g.in_case_statement)?(w(),(g.case_body||A.jslint_happy)&&(0<g.indentation_level&&(!g.parent||g.indentation_level>g.parent.indentation_level)&&(g.indentation_level-=1),g.case_body=!1),I(),g.in_case=!0,void(g.in_case_statement=!0)):("TK_RESERVED"===l.type&&"function"===l.text&&((s(g.last_text,["}"," "])||a.just_added_newline()&&!s(g.last_text,["[","{",":","=",","]))&&(a.just_added_blankline()||l.comments_before.length||(w(),w(!0))),"TK_RESERVED"===p||"TK_WORD"===p?"TK_RESERVED"===p&&s(g.last_text,["get","set","new","return","export","async"])?a.space_before_token=!0:"TK_RESERVED"===p&&"default"===g.last_text&&"export"===u?a.space_before_token=!0:w():"TK_OPERATOR"===p||"="===g.last_text?a.space_before_token=!0:(g.multiline_frame||!k(g.mode)&&!F(g.mode))&&w()),"TK_COMMA"!==p&&"TK_START_EXPR"!==p&&"TK_EQUALS"!==p&&"TK_OPERATOR"!==p||D()||_(),"TK_RESERVED"===l.type&&s(l.text,["function","get","set"])?(I(),void(g.last_word=l.text)):(E="NONE","TK_END_BLOCK"===p?"TK_RESERVED"===l.type&&s(l.text,["else","catch","finally"])?"expand"===A.brace_style||"end-expand"===A.brace_style||"none"===A.brace_style&&l.wanted_newline?E="NEWLINE":(E="SPACE",a.space_before_token=!0):E="NEWLINE":"TK_SEMICOLON"===p&&g.mode===c.BlockStatement?E="NEWLINE":"TK_SEMICOLON"===p&&k(g.mode)?E="SPACE":"TK_STRING"===p?E="NEWLINE":"TK_RESERVED"===p||"TK_WORD"===p||"*"===g.last_text&&"function"===u?E="SPACE":"TK_START_BLOCK"===p?E="NEWLINE":"TK_END_EXPR"===p&&(a.space_before_token=!0,E="NEWLINE"),"TK_RESERVED"===l.type&&s(l.text,i.line_starters)&&")"!==g.last_text&&(E="else"===g.last_text||"export"===g.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===l.type&&s(l.text,["else","catch","finally"])?"TK_END_BLOCK"!==p||"expand"===A.brace_style||"end-expand"===A.brace_style||"none"===A.brace_style&&l.wanted_newline?w():(a.trim(!0),"}"!==a.current_line.last()&&w(),a.space_before_token=!0):"NEWLINE"===E?"TK_RESERVED"===p&&B(g.last_text)?a.space_before_token=!0:"TK_END_EXPR"!==p?"TK_START_EXPR"===p&&"TK_RESERVED"===l.type&&s(l.text,["const","let","const"])||":"===g.last_text||("TK_RESERVED"===l.type&&"if"===l.text&&"else"===g.last_text?a.space_before_token=!0:w()):"TK_RESERVED"===l.type&&s(l.text,i.line_starters)&&")"!==g.last_text&&w():g.multiline_frame&&F(g.mode)&&","===g.last_text&&"}"===u?w():"SPACE"===E&&(a.space_before_token=!0),I(),g.last_word=l.text,"TK_RESERVED"===l.type&&"do"===l.text&&(g.do_block=!0),void("TK_RESERVED"===l.type&&"if"===l.text&&(g.if_block=!0))))}p="TK_START_BLOCK",u="",(a=new d(h,C)).raw=A.test_output_raw,v=[],x(c.BlockStatement),this.beautify=function(){var t,l;for(i=new function(e,t,a){var n="\n\r\t ".split(""),i=/[0-9]/,l=/[01234567]/,c=/[0123456789abcdefABCDEF]/,d="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,const,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var p,u,h,g,m,v,E=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),b=/([\s\S]*?)((?:\*\/)|$)/g,A=/([^\n\r\u2028\u2029]*)/g,T=/\/\* beautify( \w+[:]\w+)+ \*\//g,C=/ (\w+)[:](\w+)/g,R=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,S=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;function L(){var a,L,_=[];if(p=0,u="",v<=m)return["","TK_EOF"];L=g.length?g[g.length-1]:new f("TK_START_BLOCK","{");var w=e.charAt(m);for(m+=1;s(w,n);){if(r.newline.test(w)?"\n"===w&&"\r"===e.charAt(m-2)||(p+=1,_=[]):_.push(w),v<=m)return["","TK_EOF"];w=e.charAt(m),m+=1}if(_.length&&(u=_.join("")),i.test(w)){var y=!0,I=!0,O=i;for("0"===w&&m<v&&/[Xxo]/.test(e.charAt(m))?(I=y=!1,w+=e.charAt(m),m+=1,O=/[o]/.test(e.charAt(m))?l:c):(w="",m-=1);m<v&&O.test(e.charAt(m));)w+=e.charAt(m),m+=1,y&&m<v&&"."===e.charAt(m)&&(w+=e.charAt(m),m+=1,y=!1),I&&m<v&&/[Ee]/.test(e.charAt(m))&&(w+=e.charAt(m),(m+=1)<v&&/[+-]/.test(e.charAt(m))&&(w+=e.charAt(m),m+=1),y=I=!1);return[w,"TK_WORD"]}if(r.isIdentifierStart(e.charCodeAt(m-1))){if(m<v)for(;r.isIdentifierChar(e.charCodeAt(m))&&(w+=e.charAt(m),(m+=1)!==v););return"TK_DOT"===L.type||"TK_RESERVED"===L.type&&s(L.text,["set","get"])||!s(w,E)?[w,"TK_WORD"]:"in"===w?[w,"TK_OPERATOR"]:[w,"TK_RESERVED"]}if("("===w||"["===w)return[w,"TK_START_EXPR"];if(")"===w||"]"===w)return[w,"TK_END_EXPR"];if("{"===w)return[w,"TK_START_BLOCK"];if("}"===w)return[w,"TK_END_BLOCK"];if(" "===w)return[w,"TK_SEMICOLON"];if("/"===w){var x="";if("*"===e.charAt(m)){m+=1,b.lastIndex=m;var F=b.exec(e);x="/*"+F[0],m+=F[0].length;var k=function(e){if(!e.match(T))return null;var t={};C.lastIndex=0;for(var a=C.exec(e);a;)t[a[1]]=a[2],a=C.exec(e);return t}(x);return k&&"start"===k.ignore&&(R.lastIndex=m,x+=(F=R.exec(e))[0],m+=F[0].length),[x=x.replace(r.lineBreak,"\n"),"TK_BLOCK_COMMENT",k]}if("/"===e.charAt(m)){m+=1,A.lastIndex=m;var N=A.exec(e);return x="//"+N[0],m+=N[0].length,[x,"TK_COMMENT"]}}if("`"===w||"'"===w||'"'===w||("/"===w||t.e4x&&"<"===w&&e.slice(m-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===L.type&&s(L.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===L.type&&")"===L.text&&L.parent&&"TK_RESERVED"===L.parent.type&&s(L.parent.text,["if","while","for"])||s(L.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var D=w,M=!1,B=!1;if(a=w,"/"===D)for(var P=!1;m<v&&(M||P||e.charAt(m)!==D)&&!r.newline.test(e.charAt(m));)a+=e.charAt(m),M?M=!1:(M="\\"===e.charAt(m),"["===e.charAt(m)?P=!0:"]"===e.charAt(m)&&(P=!1)),m+=1;else if(t.e4x&&"<"===D){var U=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,W=e.slice(m-1),K=U.exec(W);if(K&&0===K.index){for(var H=K[2],$=0;K;){var G=!!K[1],Y=K[2],V=!!K[K.length-1]||"![CDATA["===Y.slice(0,8);if(Y!==H||V||(G?--$:++$),$<=0)break;K=U.exec(W)}var z=K?K.index+K[0].length:W.length;return W=W.slice(0,z),m+=z-1,[W=W.replace(r.lineBreak,"\n"),"TK_STRING"]}}else for(;m<v&&(M||e.charAt(m)!==D&&("`"===D||!r.newline.test(e.charAt(m))));)(M||"`"===D)&&r.newline.test(e.charAt(m))?("\r"===e.charAt(m)&&"\n"===e.charAt(m+1)&&(m+=1),a+="\n"):a+=e.charAt(m),M=M?("x"!==e.charAt(m)&&"u"!==e.charAt(m)||(B=!0),!1):"\\"===e.charAt(m),m+=1;if(B&&t.unescape_strings&&(a=function(e){for(var t,a=!1,n="",r=0,i="",s=0;a||r<e.length;)if(t=e.charAt(r),r++,a){if(a=!1,"x"===t)i=e.substr(r,2),r+=2;else{if("u"!==t){n+="\\"+t;continue}i=e.substr(r,4),r+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if(0<=(s=parseInt(i,16))&&s<32){n+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===s||39===s||92===s)n+="\\"+String.fromCharCode(s);else{if("x"===t&&126<s&&s<=255)return e;n+=String.fromCharCode(s)}}else"\\"===t?a=!0:n+=t;return n}(a)),m<v&&e.charAt(m)===D&&(a+=D,m+=1,"/"===D))for(;m<v&&r.isIdentifierStart(e.charCodeAt(m));)a+=e.charAt(m),m+=1;return[a,"TK_STRING"]}if("#"===w){if(0===g.length&&"!"===e.charAt(m)){for(a=w;m<v&&"\n"!==w;)a+=w=e.charAt(m),m+=1;return[o(a)+"\n","TK_UNKNOWN"]}var j="#";if(m<v&&i.test(e.charAt(m))){for(;j+=w=e.charAt(m),(m+=1)<v&&"#"!==w&&"="!==w;);return"#"===w||("["===e.charAt(m)&&"]"===e.charAt(m+1)?(j+="[]",m+=2):"{"===e.charAt(m)&&"}"===e.charAt(m+1)&&(j+="{}",m+=2)),[j,"TK_WORD"]}}if("<"===w&&("?"===e.charAt(m)||"%"===e.charAt(m))){S.lastIndex=m-1;var q=S.exec(e);if(q)return w=q[0],m+=w.length-1,[w=w.replace(r.lineBreak,"\n"),"TK_STRING"]}if("<"===w&&"\x3c!--"===e.substring(m-1,m+3)){for(m+=3,w="\x3c!--";!r.newline.test(e.charAt(m))&&m<v;)w+=e.charAt(m),m++;return h=!0,[w,"TK_COMMENT"]}if("-"===w&&h&&"--\x3e"===e.substring(m-1,m+2))return h=!1,m+=2,["--\x3e","TK_COMMENT"];if("."===w)return[w,"TK_DOT"];if(s(w,d)){for(;m<v&&s(w+e.charAt(m),d)&&(w+=e.charAt(m),!(v<=(m+=1))););return","===w?[w,"TK_COMMA"]:"="===w?[w,"TK_EQUALS"]:[w,"TK_OPERATOR"]}return[w,"TK_UNKNOWN"]}this.tokenize=function(){var t,a,n;v=e.length,m=0,h=!1,g=[];for(var r=null,i=[],s=[];!a||"TK_EOF"!==a.type;){for(n=L(),t=new f(n[1],n[0],p,u);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=n[2]),s.push(t),n=L(),t=new f(n[1],n[0],p,u);s.length&&(t.comments_before=s,s=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=a,i.push(r),r=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&r&&("]"===t.text&&"["===r.text||")"===t.text&&"("===r.text||"}"===t.text&&"{"===r.text)&&(t.parent=r.parent,r=i.pop()),g.push(t),a=t}return g}}(e,A,h),T=i.tokenize(),n=0;t=P();){for(var c=0;c<t.comments_before.length;c++)L(t.comments_before[c]);L(t),u=g.last_text,p=t.type,g.last_text=t.text,n+=1}return l=a.get_code(),A.end_with_newline&&(l+="\n"),"\n"!=A.eol&&(l=l.replace(/[\n]/g,A.eol)),l}}(e,t).beautify()}e=r,t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",a=new RegExp("["+t+"]"),n=new RegExp("["+t+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||170<=e&&a.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||170<=e&&n.test(String.fromCharCode(e))))};var c={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function d(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var a=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new function(e){var t=0,a=-1,n=[],r=!0;this.set_indent=function(n){t=e.baseIndentLength+n*e.indent_length,a=n},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:n[n.length-1]},this.push=function(e){n.push(e),t+=e.length,r=!1},this.pop=function(){var e=null;return r||(e=n.pop(),t-=e.length,r=0===n.length),e},this.remove_indent=function(){0<a&&(a-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)n.pop(),t-=1;r=0===n.length},this.toString=function(){var t="";return this._empty||(0<=a&&(t=e.indent_cache[a]),t+=n.join("")),t}}(this),a.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return a.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return a.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(1<a.length){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==c.ForInitializer&&e.mode!==c.Conditional)for(var t=e.start_line_index,n=a.length;t<n;)a[t].remove_indent(),t++},this.trim=function(n){for(n=void 0!==n&&n,this.current_line.trim(e,t);n&&1<a.length&&this.current_line.is_empty();)a.pop(),this.current_line=a[a.length-1],this.current_line.trim();this.previous_line=1<a.length?a[a.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===a.length||a[a.length-2].is_empty())}}var f=function(e,t,a,n,r,i){this.type=e,this.text=t,this.comments_before=[],this.newlines=a||0,this.wanted_newline=0<a,this.whitespace_before=n||"",this.parent=null,this.directives=null};return{run:function(e,t){function a(e){return e.replace(/\s+$/g,"")}var n,r,s,o,c,d,f,p,u,h,g,m,v,E;for(void 0!==(t=t||{}).wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),r=void 0!==t.indent_inner_html&&t.indent_inner_html,s=void 0===t.indent_size?4:parseInt(t.indent_size,10),o=void 0===t.indent_char?" ":t.indent_char,d=void 0===t.brace_style?"collapse":t.brace_style,c=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),f=t.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","const","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],p=void 0===t.preserve_newlines||t.preserve_newlines,u=p?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,h=void 0!==t.indent_handlebars&&t.indent_handlebars,g=void 0===t.wrap_attributes?"auto":t.wrap_attributes,m=void 0===t.wrap_attributes_indent_size?s:parseInt(t.wrap_attributes_indent_size,10)||s,v=void 0!==t.end_with_newline&&t.end_with_newline,E=Array.isArray(t.extra_liners)?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),t.indent_with_tabs&&(o="\t",s=1),(n=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=r,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:E,in_array:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0;return!1}},this.is_whitespace=function(e){for(;0<e.length;e++)if(!this.Utils.in_array(e.charAt(0),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)p&&"\n"===e&&this.newlines<=u&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(h){var a=this.input.substr(this.pos,3);if("{{#"===a||"{{/"===a)break;if("{{!"===a)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",a=new RegExp("</"+e+"\\s*>","igm");a.lastIndex=this.pos;var n=a.exec(this.input),r=n?n.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?this.tags[e+"count"]++:this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level,this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,a,n="",r=[],i="",s=!1,l=!0,c=this.pos,d=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=c,this.line_char_count=d),r.length?r.join(""):["","TK_EOF"];if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace))s=!0;else{if("'"!==n&&'"'!==n||(n+=this.get_unformatted(n),s=!0),"="===n&&(s=!1),r.length&&"="!=r[r.length-1]&&">"!=n&&s){if(this.space_or_wrap(r),s=!1,!l&&"force"===g&&"/"!=n){this.print_newline(!0,r),this.print_indentation(r);for(var p=0;p<m;p++)r.push(o)}for(var u=0;u<r.length;u++)if(" "===r[u]){l=!1;break}}if(h&&"<"===a&&n+this.input.charAt(this.pos)==="{{"&&(n+=this.get_unformatted("}}"),r.length&&" "!=r[r.length-1]&&"<"!=r[r.length-1]&&(n=" "+n),s=!0),"<"!==n||a||(t=this.pos-1,a="<"),h&&!a&&2<=r.length&&"{"===r[r.length-1]&&"{"===r[r.length-2]&&(t="#"===n||"/"===n||"!"===n?this.pos-3:this.pos-2,a="{"),this.line_char_count++,r.push(n),r[1]&&("!"===r[1]||"?"===r[1]||"%"===r[1])){r=[this.get_comment(t)];break}if(h&&r[1]&&"{"===r[1]&&r[2]&&"!"===r[2]){r=[this.get_comment(t)];break}if(h&&"{"===a&&2<r.length&&"}"===r[r.length-2]&&"}"===r[r.length-1])break}}while(">"!=n);var v,E,b=r.join("");v=-1!=b.indexOf(" ")?b.indexOf(" "):"{"===b[0]?b.indexOf("}"):b.indexOf(">"),E="<"!==b[0]&&h?"#"===b[2]?3:2:1;var A=b.substring(E,v).toLowerCase();return"/"===b.charAt(b.length-2)||this.Utils.in_array(A,this.Utils.single_token)?e||(this.tag_type="SINGLE"):h&&"{"===b[0]&&"else"===A?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(A,f)?(i=this.get_unformatted("</"+A+">",b),r.push(i),this.pos,this.tag_type="SINGLE"):"script"===A&&(-1===b.search("type")||-1<b.search("type")&&-1<b.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?e||(this.record_tag(A),this.tag_type="SCRIPT"):"style"===A&&(-1===b.search("type")||-1<b.search("type")&&-1<b.search("text/css"))?e||(this.record_tag(A),this.tag_type="STYLE"):"!"===A.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===A.charAt(0)?(this.retrieve_tag(A.substring(1)),this.tag_type="END"):(this.record_tag(A),"html"!=A.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(r),this.Utils.in_array(A,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=c,this.line_char_count=d),r.join("")},this.get_comment=function(e){var t="",a=">",n=!1;this.pos=e;var r=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((t+=r)[t.length-1]!==a[a.length-1]||-1==t.indexOf(a));)!n&&t.length<10&&(0===t.indexOf("<![if")?(a="<![endif]>",n=!0):0===t.indexOf("<![cdata[")?(a="]]>",n=!0):0===t.indexOf("<![")?(a="]>",n=!0):0===t.indexOf("\x3c!--")?(a="--\x3e",n=!0):0===t.indexOf("{{!")?(a="}}",n=!0):0===t.indexOf("<?")?(a="?>",n=!0):0===t.indexOf("<%")&&(a="%>",n=!0)),r=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var a="",n="",r=0,i=!0;do{if(this.pos>=this.input.length)return n;if(a=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(a,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if("\n"===a||"\r"===a){n+="\n",this.line_char_count=0;continue}}n+=a,this.line_char_count++,i=!0,h&&"{"===a&&n.length&&"{"===n[n.length-2]&&(r=(n+=this.get_unformatted("}}")).length)}while(-1===n.toLowerCase().indexOf(e,r));return n},this.get_token=function(){var e;if("TK_TAG_SCRIPT"!==this.last_token&&"TK_TAG_STYLE"!==this.last_token)return"CONTENT"===this.current_mode?"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0;var t=this.last_token.substr(7);return"string"!=typeof(e=this.get_contents_to(t))?e:[e,"TK_"+t]},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var a=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(a&&!this.Utils.in_array(a,t))},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.wrap_line_length=r;for(var s=this.line_char_count=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=a(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=function(e){return e.replace(/^\s+/g,"")}(e)),this.print_token_raw(e))},this.print_token_raw=function(e){0<this.newlines&&(e=a(e)),e&&""!==e&&(1<e.length&&"\n"===e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(0<t,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){0<this.indent_level&&this.indent_level--}},this}).printer(e,o,s,c,d);;){var b=n.get_token();if(n.token_text=b[0],n.token_type=b[1],"TK_EOF"===n.token_type)break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent_content&&(n.indent(),n.indent_content=!1),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===n.last_token&&""===n.last_text){var A=n.token_text.match(/\w+/)[0],T=null;n.output.length&&(T=n.output[n.output.length-1].match(/(?:<|{{#)\/?\s*(\w+)/)),(null===T||T[1]!=A&&!n.Utils.in_array(T[1],f))&&n.print_newline(!1,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var C=n.token_text.match(/^\s*<([a-z-]+)/i);C&&n.Utils.in_array(C[1],f)||n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":n.print_token(n.token_text),n.indent_content&&(n.indent(),n.indent_content=!1),n.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==n.token_text){n.print_newline(!1,n.output);var R=n.token_text,S=void 0,L=1;"TK_SCRIPT"===n.token_type?S=l:"TK_STYLE"===n.token_type&&(S=i),"keep"===t.indent_scripts?L=0:"separate"===t.indent_scripts&&(L=-n.indent_level);var _=n.get_full_indent(L);if(S)R=S(R.replace(/^\s*/,_),t);else{var w=R.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,y=n.get_full_indent(L-w);R=R.replace(/^\s*/,_).replace(/\r\n|\r|\n/g,"\n"+y).replace(/\s+$/,"")}R&&(n.print_token_raw(R),n.print_newline(!0,n.output))}n.current_mode="TAG";break;default:""!==n.token_text&&n.print_token(n.token_text)}n.last_token=n.token_type,n.last_text=n.token_text}var I=n.output.join("").replace(/[\r\n\t ]+$/,"");return v&&(I+="\n"),I}}},Object.assign(e.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.PLUGINS.codeView=function(e){var t,a,n=e.$;function r(){return e.$box.hasClass("fr-code-view")}function i(){return a?a.getValue():t.val()}function s(){r()&&(a&&a.setSize(null,e.opts.height?e.opts.height:"auto"),e.opts.heightMin||e.opts.height?(e.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",e.opts.heightMin||e.opts.height),t.css("height",e.opts.height)):e.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",""))}var o,l=!1;function c(){r()&&e.events.trigger("blur")}function d(){r()&&l&&e.events.trigger("focus")}function f(u){void 0===u&&(u=!r());var h=e.$tb.find('.fr-command[data-cmd="html"]');u?(e.popups.hideAll(),function(u){t||(function(){t=n('<textarea class="fr-code" tabIndex="-1">'),e.$wp.append(t),t.attr("dir",e.opts.direction),e.$box.hasClass("fr-basic")||(o=n('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(e.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),e.$box.append(o),e.events.bindClick(e.$box,"a.html-switch",function(){e.events.trigger("commands.before",["html"]),f(!1),e.events.trigger("commands.after",["html"])}));var a=function(){return!r()};e.events.on("buttons.refresh",a),e.events.on("copy",a,!0),e.events.on("cut",a,!0),e.events.on("paste",a,!0),e.events.on("destroy",p,!0),e.events.on("html.set",function(){r()&&f(!0)}),e.events.on("codeView.update",s),e.events.on("codeView.toggle",function(){e.$box.hasClass("fr-code-view")&&f()}),e.events.on("form.submit",function(){r()&&(e.html.set(i()),e.events.trigger("contentChanged",[],!0))},!0)}(),!a&&e.opts.codeMirror?((a=e.opts.codeMirror.fromTextArea(t.get(0),e.opts.codeMirrorOptions)).on("blur",c),a.on("focus",d)):(e.events.$on(t,"keydown keyup change input",function(){e.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")}),e.events.$on(t,"blur",c),e.events.$on(t,"focus",d))),e.undo.saveStep(),e.html.cleanEmptyTags(),e.html.cleanWhiteTags(!0),e.core.hasFocus()&&(e.core.isEmpty()||(e.selection.save(),e.$el.find('.fr-marker[data-type="true"]').first().replaceWith('<span class="fr-tmp fr-sm">F</span>'),e.$el.find('.fr-marker[data-type="false"]').last().replaceWith('<span class="fr-tmp fr-em">F</span>')));var h=e.html.get(!1,!0);e.$el.find("span.fr-tmp").remove(),e.$box.toggleClass("fr-code-view",!0);var g,m,v=!1;if(e.core.hasFocus()&&(v=!0,e.events.disableBlur(),e.$el.blur()),h=(h=h.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),e.codeBeautifier&&!h.includes("fr-embedly")&&(h=e.codeBeautifier.run(h,e.opts.codeBeautifierOptions)),a){g=h.indexOf("FROALA-SM"),(m=h.indexOf("FROALA-EM"))<g?g=m:m-=9;var E=(h=h.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,g).length-h.substring(0,g).replace(/\n/g,"").length,b=h.substring(0,m).length-h.substring(0,m).replace(/\n/g,"").length;g=h.substring(0,g).length-h.substring(0,h.substring(0,g).lastIndexOf("\n")+1).length,m=h.substring(0,m).length-h.substring(0,h.substring(0,m).lastIndexOf("\n")+1).length,a.setSize(null,e.opts.height?e.opts.height:"auto"),e.opts.heightMin&&e.$box.find(".CodeMirror-scroll").css("min-height",e.opts.heightMin),a.setValue(h),l=!v,a.focus(),l=!0,a.setSelection({line:E,ch:g},{line:b,ch:m}),a.refresh(),a.clearHistory()}else{g=h.indexOf("FROALA-SM"),m=h.indexOf("FROALA-EM")-9,e.opts.heightMin&&t.css("min-height",e.opts.heightMin),e.opts.height&&t.css("height",e.opts.height),e.opts.heightMax&&t.css("max-height",e.opts.height||e.opts.heightMax),t.val(h.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var A=n(e.o_doc).scrollTop();l=!v,t.focus(),l=!0,t.get(0).setSelectionRange(g,m),n(e.o_doc).scrollTop(A)}e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(u).filter(function(){return e.opts.codeViewKeepActiveButtons.indexOf(n(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),u.addClass("fr-active").attr("aria-pressed",!0),!e.helpers.isMobile()&&e.opts.toolbarInline&&e.toolbar.hide()}(h)):(e.$box.toggleClass("fr-code-view",!1),function(t){var a=i();e.html.set(a),e.$el.blur(),e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(t).removeClass("fr-disabled").attr("aria-disabled",!1),t.removeClass("fr-active").attr("aria-pressed",!1),e.selection.setAtStart(e.el),e.selection.restore(),e.placeholder.refresh(),e.undo.saveStep()}(h))}function p(){r()&&f(!1),a&&a.toTextArea(),t.val("").removeData().remove(),t=null,o&&(o.remove(),o=null)}return{_init:function(){if(e.events.on("focus",function(){var t;e.opts.toolbarContainer&&(t=e.$tb.find('.fr-command[data-cmd="html"]'),r()?(e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(t).filter(function(){return e.opts.codeViewKeepActiveButtons.indexOf(n(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!1),t.addClass("fr-active").attr("aria-pressed",!1)):(e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(t).removeClass("fr-disabled").attr("aria-disabled",!1),t.removeClass("fr-active").attr("aria-pressed",!1)))}),!e.$wp)return!1},toggle:f,isActive:r,get:i}},e.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.DefineIcon("html",{NAME:"code",SVG_KEY:"codeView"}),Object.assign(e.POPUP_TEMPLATES,{"textColor.picker":"[_BUTTONS_][_TEXT_COLORS_][_CUSTOM_COLOR_]","backgroundColor.picker":"[_BUTTONS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(e.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsButtons:["colorsBack","|","-"]}),e.PLUGINS.colors=function(t){var a=t.$,n='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer- \n  '.concat(t.id,'"><div class="fr-input-line"><input maxlength="7" id="[ID]"\n  type="text" placeholder="').concat(t.language.translate("HEX Color"),'" \n  tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button \n  type="button" class="fr-command fr-submit" data-cmd="[COMMAND]" tabIndex="2" role="button">\n  ').concat(t.language.translate("OK"),"</button></div></div>");function r(e){for(var a="text"===e?t.opts.colorsText:t.opts.colorsBackground,n='<div class="fr-color-set fr-'.concat(e,'-color fr-selected-set">'),r=0;r<a.length;r++)0!==r&&r%t.opts.colorsStep==0&&(n+="<br>"),"REMOVE"!==a[r]?n+='<span class="fr-command fr-select-color" style="background:'.concat(a[r],';" \n        tabIndex="-1" aria-selected="false" role="button" data-cmd="apply').concat(e,'Color" \n        data-param1="').concat(a[r],'"><span class="fr-sr-only"> ').concat(t.language.translate("Color")).concat(a[r]," \n        &nbsp;&nbsp;&nbsp;</span></span>"):n+='<span class="fr-command fr-select-color" data-cmd="apply'.concat(e,'Color"\n         tabIndex="-1" role="button" data-param1="REMOVE" \n         title="').concat(t.language.translate("Clear Formatting"),'">').concat(t.icon.create("remove"),' \n        <span class="fr-sr-only"> ').concat(t.language.translate("Clear Formatting")," </span></span>");return n+"</div>"}function i(e){"REMOVE"!==e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),t.popups.hide("backgroundColor.picker")}function s(e){"REMOVE"!==e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),t.popups.hide("textColor.picker")}return{showColorsPopup:function(i){var s=t.$tb.find('.fr-command[data-cmd="'.concat(i,'"]')),o=t.popups.get("".concat(i,".picker"));if(o||(o=function(i){var s="";t.opts.toolbarInline&&0<t.opts.colorsButtons.length&&(s+='<div class="fr-buttons fr-colors-buttons fr-tabs">\n        '.concat(t.button.buildList(t.opts.colorsButtons),"\n        </div>"));var o,l="";o="textColor"===i?(t.opts.colorsHEXInput&&(l=n.replace(/\[ID\]/g,"fr-color-hex-layer-text-".concat(t.id)).replace(/\[COMMAND\]/g,"customTextColor")),{buttons:s,text_colors:r("text"),custom_color:l}):(t.opts.colorsHEXInput&&(l=n.replace(/\[ID\]/g,"fr-color-hex-layer-background-".concat(t.id)).replace(/\[COMMAND\]/g,"customBackgroundColor")),{buttons:s,background_colors:r("background"),custom_color:l});var c,d,f=t.popups.create("".concat(i,".picker"),o);return c=f,d="".concat(i,".picker"),t.events.on("popup.tab",function(n){var r=a(n.currentTarget);if(!t.popups.isVisible(d)||!r.is("span"))return!0;var i=n.which,s=!0;if(e.KEYCODE.TAB===i){var o=c.find(".fr-buttons");s=!t.accessibility.focusToolbar(o,!!n.shiftKey)}else if(e.KEYCODE.ARROW_UP===i||e.KEYCODE.ARROW_DOWN===i||e.KEYCODE.ARROW_LEFT===i||e.KEYCODE.ARROW_RIGHT===i){if(r.is("span.fr-select-color")){var l=r.parent().find("span.fr-select-color"),f=l.index(r),p=t.opts.colorsStep,u=Math.floor(l.length/p),h=f%p,g=Math.floor(f/p)*p+h,m=u*p;e.KEYCODE.ARROW_UP===i?g=((g-p)%m+m)%m:e.KEYCODE.ARROW_DOWN===i?g=(g+p)%m:e.KEYCODE.ARROW_LEFT===i?g=((g-1)%m+m)%m:e.KEYCODE.ARROW_RIGHT===i&&(g=(g+1)%m);var v=a(l.get(g));t.events.disableBlur(),v.focus(),s=!1}}else e.KEYCODE.ENTER===i&&(t.button.exec(r),s=!1);return!1===s&&(n.preventDefault(),n.stopPropagation()),s},!0),f}(i)),!o.hasClass("fr-active"))if(t.popups.setContainer("".concat(i,".picker"),t.$tb),function(e){var n,r=t.popups.get("".concat(e,"Color.picker")),i=a(t.selection.element());n="background"===e?"background-color":"color";var s=r.find(".fr-".concat(e,"-color .fr-select-color"));for(s.find(".fr-selected-color").remove(),s.removeClass("fr-active-item"),s.not('[data-param1="REMOVE"]').attr("aria-selected",!1);i.get(0)!==t.el;){if("transparent"!==i.css(n)&&"rgba(0, 0, 0, 0)"!==i.css(n)){var o=r.find(".fr-".concat(e,'-color .fr-select-color[data-param1="').concat(t.helpers.RGBToHex(i.css(n)),'"]'));o.append('<span class="fr-selected-color" aria-hidden="true"></span>'),o.addClass("fr-active-item").attr("aria-selected",!0);break}i=i.parent()}!function(e){var n=t.popups.get("".concat(e,"Color.picker")),r=n.find(".fr-".concat(e,"-color .fr-active-item")).attr("data-param1"),i=n.find(".fr-color-hex-layer input");r||(r=""),i.length&&a(i.val(r).input).trigger("change")}(e)}("textColor"===i?"text":"background"),s.isVisible()){var l=t.button.getPosition(s),c=l.left,d=l.top;t.popups.show("".concat(i,".picker"),c,d,s.outerHeight())}else t.position.forSelection(o),t.popups.show("".concat(i,".picker"))},background:i,customColor:function(e){var a=t.popups.get("".concat(e,"Color.picker")).find(".fr-color-hex-layer input");if(a.length){var n=a.val();"background"===e?i(n):s(n)}},text:s,back:function(){t.popups.hide("textColor.picker"),t.popups.hide("backgroundColor.picker"),t.toolbar.showInline()}}},e.DefineIcon("textColor",{NAME:"tint",SVG_KEY:"textColor"}),e.RegisterCommand("textColor",{title:"Text Color",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("textColor.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("textColor.picker")):this.colors.showColorsPopup("textColor")}}),e.RegisterCommand("applytextColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.RegisterCommand("customTextColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor("text")}}),e.DefineIcon("backgroundColor",{NAME:"paint-brush",SVG_KEY:"backgroundColor"}),e.RegisterCommand("backgroundColor",{title:"Background Color",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("backgroundColor.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("backgroundColor.picker")):this.colors.showColorsPopup("backgroundColor")}}),e.RegisterCommand("applybackgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.RegisterCommand("customBackgroundColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor("background")}}),e.DefineIcon("colorsBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.DefineIcon("remove",{NAME:"eraser",SVG_KEY:"remove"}),Object.assign(e.DEFAULTS,{dragInline:!0}),e.PLUGINS.draggable=function(t){var a,n=t.$;function r(e){return!(!e.originalEvent||!e.originalEvent.target||e.originalEvent.target.nodeType!==Node.TEXT_NODE)||(e.target&&"A"===e.target.tagName&&1===e.target.childNodes.length&&"IMG"===e.target.childNodes[0].tagName&&(e.target=e.target.childNodes[0]),n(e.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),n(e.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void e.originalEvent.dataTransfer.setData("text","Froala")):(e.preventDefault(),!1))}function i(e){return!(e&&("HTML"===e.tagName||"BODY"===e.tagName||t.node.isElement(e)))}function s(e,n,r){if(t.opts.iframe){var i=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),s=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));e+=t.$iframe.offset().top+i,n+=t.$iframe.offset().left+s}a.offset().top!==e&&a.css("top",e),a.offset().left!==n&&a.css("left",n),a.width()!==r&&a.css("width",r)}function o(r){r.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?(!function(){for(var t=null,a=0;a<e.INSTANCES.length;a++)if((t=e.INSTANCES[a].$el.find(".fr-dragging")).length)return t.get(0)}()||t.browser.msie||t.browser.edge)&&r.preventDefault():(r.preventDefault(),function(r){var o=t.doc.elementFromPoint(r.originalEvent.pageX-t.win.pageXOffset,r.originalEvent.pageY-t.win.pageYOffset);if(!i(o)){for(var l=0,c=o;!i(c)&&c===o&&0<r.originalEvent.pageY-t.win.pageYOffset-l;)l++,c=t.doc.elementFromPoint(r.originalEvent.pageX-t.win.pageXOffset,r.originalEvent.pageY-t.win.pageYOffset-l);(!i(c)||a&&0===t.$el.find(c).length&&c!==a.get(0))&&(c=null);for(var d=0,f=o;!i(f)&&f===o&&r.originalEvent.pageY-t.win.pageYOffset+d<n(t.doc).height();)d++,f=t.doc.elementFromPoint(r.originalEvent.pageX-t.win.pageXOffset,r.originalEvent.pageY-t.win.pageYOffset+d);(!i(f)||a&&0===t.$el.find(f).length&&f!==a.get(0))&&(f=null),o=null===f&&c?c:f&&null===c?f:f&&c?l<d?c:f:null}if(n(o).hasClass("fr-drag-helper"))return!1;if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&0<=["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)&&(o=n(o).parents("table").get(0)),o&&0<=["LI"].indexOf(o.tagName)&&(o=n(o).parents("UL, OL").get(0)),o&&!n(o).hasClass("fr-drag-helper")){var p;a||(e.$draggable_helper||(e.$draggable_helper=n(document.createElement("div")).attr("class","fr-drag-helper")),a=e.$draggable_helper,t.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null},!0)),p=r.originalEvent.pageY<n(o).offset().top+n(o).outerHeight()/2;var u=n(o),h=0;p||0!==u.next().length?(p||(u=u.next()),"before"===a.data("fr-position")&&u.is(a.data("fr-tag"))||(0<u.prev().length&&(h=parseFloat(u.prev().css("margin-bottom"))||0),h=Math.max(h,parseFloat(u.css("margin-top"))||0),s(u.offset().top-h/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),a.data("fr-position","before"))):"after"===a.data("fr-position")&&u.is(a.data("fr-tag"))||(h=parseFloat(u.css("margin-bottom"))||0,s(u.offset().top+n(o).height()+h/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),a.data("fr-position","after")),a.data("fr-tag",u),a.addClass("fr-visible"),t.$box.append(a)}else a&&0<t.$box.find(a).length&&a.removeClass("fr-visible")}(r))}function l(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function c(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");a&&a.hasClass("fr-visible")&&t.$box.find(a).length?d(e):n.length&&(e.preventDefault(),e.stopPropagation()),a&&t.$box.find(a).length&&a.removeClass("fr-visible"),n.removeClass("fr-dragging")}function d(r){var i,s;t.$el.attr("contenteditable",!0);for(var o=0;o<e.INSTANCES.length;o++)if((i=e.INSTANCES[o].$el.find(".fr-dragging")).length){s=e.INSTANCES[o];break}if(i.length){if(r.preventDefault(),r.stopPropagation(),a&&a.hasClass("fr-visible")&&t.$box.find(a).length)a.data("fr-tag")[a.data("fr-position")]('<span class="fr-marker"></span>'),a.removeClass("fr-visible");else if(!1===t.markers.insertAtPoint(r.originalEvent))return!1;if(i.removeClass("fr-dragging"),!1===(i=t.events.chainTrigger("element.beforeDrop",i)))return!1;var l=i;if(i.parent().is("A")&&1===i.parent().get(0).childNodes.length&&(l=i.parent()),t.core.isEmpty()?t.events.focus():(t.$el.find(".fr-marker").replaceWith(e.MARKERS),t.selection.restore()),s===t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(l);else{var c=t.markers.insert();0===l.find(c).length?n(c).replaceWith(l):0===i.find(c).length&&n(c).replaceWith(i),i.after(e.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").not(t.opts.htmlAllowedEmptyTags.join(",")).remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),s!==t&&(s.popups.hideAll(),s.$el.find(s.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),s.html.wrap(),s.html.fillEmptyBlocks(),s.undo.saveStep(),s.events.trigger("element.dropped"),s.opts.iframe&&s.size.syncIframe()),t.events.trigger("element.dropped",[l]),!1}a&&a.removeClass("fr-visible"),t.undo.canDo()||t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)}function f(e){if(e&&"DIV"===e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType===Node.ELEMENT_NODE)for(var a=e.querySelectorAll("div.fr-drag-helper"),n=0;n<a.length;n++)a[n].parentNode.removeChild(a[n])}return{_init:function(){t.opts.enter===e.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",r,!0),t.events.on("dragover",o,!0),t.events.on("dragenter",l,!0),t.events.on("document.dragend",c,!0),t.events.on("document.drop",c,!0),t.events.on("drop",d,!0),t.events.on("html.processGet",f)}}},Object.assign(e.DEFAULTS,{editInPopup:!1}),e.MODULES.editInPopup=function(e){return{_init:function(){e.opts.editInPopup&&(function(){var t={edit:'<div id="fr-text-edit-'.concat(e.id,'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="').concat(e.language.translate("Text"),'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">').concat(e.language.translate("Update"),"</button></div></div>")};e.popups.create("text.edit",t)}(),e.events.$on(e.$el,e._mouseup,function(){setTimeout(function(){var t,a;a=e.popups.get("text.edit"),t="INPUT"===e.el.tagName?e.$el.attr("placeholder"):e.$el.text(),a.find("input").val(t).trigger("change"),e.popups.setContainer("text.edit",e.$sc),e.popups.show("text.edit",e.$el.offset().left+e.$el.outerWidth()/2,e.$el.offset().top+e.$el.outerHeight(),e.$el.outerHeight())},10)}))},update:function(){var t=e.popups.get("text.edit").find("input").val();0===t.length&&(t=e.opts.placeholderText),"INPUT"===e.el.tagName?e.$el.attr("placeholder",t):e.$el.text(t),e.events.trigger("contentChanged"),e.popups.hide("text.edit")}}},e.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.editInPopup.update()}}),Object.assign(e.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_CUSTOM_LAYER_]"}),Object.assign(e.DEFAULTS,{emoticonsSet:[{id:"people",name:"Smileys & People",code:"1f600",emoticons:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning Face with Smiling Eyes"},{code:"1f602",desc:"Face with Tears of Joy"},{code:"1f603",desc:"Smiling Face with Open Mouth"},{code:"1f604",desc:"Smiling Face with Open Mouth and Smiling Eyes"},{code:"1f605",desc:"Smiling Face with Open Mouth and Cold Sweat"},{code:"1f606",desc:"Smiling Face with Open Mouth and Tightly-Closed Eyes"},{code:"1f609",desc:"Winking Face"},{code:"1f60a",desc:"Smiling Face with Smiling Eyes"},{code:"1f608",desc:"Face Savouring Delicious Food"},{code:"1f60e",desc:"Smiling Face with Sunglasses"},{code:"1f60d",desc:"Smiling Face with Heart-Shaped Eyes"},{code:"1f618",desc:"Face Throwing a Kiss"},{code:"1f617",desc:"Kissing Face"},{code:"1f619",desc:"Kissing Face with Smiling Eyes"},{code:"1f61a",desc:"Kissing Face with Closed Eyes"},{code:"263a",desc:"White Smiling Face"},{code:"1f642",desc:"Slightly Smiling Face"},{code:"1f610",desc:"Neutral Face"},{code:"1f611",desc:"Expressionless Face"},{code:"1f636",desc:"Face Without Mouth"},{code:"1f60f",desc:"Smirking Face"},{code:"1f623",desc:"Persevering Face"},{code:"1f625",desc:"Disappointed but Relieved Face"},{code:"1f62e",desc:"Face with Open Mouth"},{code:"1f62f",desc:"Hushed Face"},{code:"1f62a",desc:"Sleepy Face"},{code:"1f62b",desc:"Tired Face"},{code:"1f634",desc:"Sleeping Face"},{code:"1f60c",desc:"Relieved Face"},{code:"1f61b",desc:"Face with Stuck-out Tongue"},{code:"1f61c",desc:"Face with Stuck-out Tongue and Winking Eye"},{code:"1f61d",desc:"Face with Stuck-out Tongue and Tightly-Closed Eyes"},{code:"1f612",desc:"Unamused Face"},{code:"1f613",desc:"Face with Cold Sweat"},{code:"1f613",desc:"Face with Cold Sweat"},{code:"1f614",desc:"Pensive Face"},{code:"1f615",desc:"Confused Face"},{code:"1f632",desc:"Astonished  Face"},{code:"1f616",desc:"Confounded Face"},{code:"1f61e",desc:"Disappointed Face"},{code:"1f61f",desc:"Worried Face"},{code:"1f624",desc:"Face with Look of Triumph"},{code:"1f622",desc:"Crying Face"},{code:"1f62d",desc:"Loudly Crying Face"},{code:"1f626",desc:"Frowning Face with Open Mouth"},{code:"1f627",desc:"Anguished Face"},{code:"1f628",desc:"Fearful Face"},{code:"1f629",desc:"Weary Face"},{code:"1f62c",desc:"Grimacing Face"},{code:"1f630",desc:"Face with Open Mouth and Cold Sweat"},{code:"1f631",desc:"Face Screaming in Fear"},{code:"1f633",desc:"Flushed Face"},{code:"1f635",desc:"Dizzy Face"},{code:"1f621",desc:"Pouting Face"},{code:"1f620",desc:"Angry Face"},{code:"1f637",desc:"Face with Medical Mask"},{code:"1f607",desc:"Smiling Face with Halo"},{code:"1f608",desc:"Smiling Face with Horns"},{code:"1f47f",desc:"Imp"},{code:"1f479",desc:"Japanese Ogre"},{code:"1f47a",desc:"Japanese Goblin"},{code:"1f480",desc:"Skull"},{code:"1f47b",desc:"Ghost"},{code:"1f47d",desc:"Extraterrestrial Alien"},{code:"1f47e",desc:"Alien Monster"},{code:"1f4a9",desc:"Pile of Poo"},{code:"1f63a",desc:"Smiling Cat Face with Open Mouth"},{code:"1f638",desc:"Grinning Cat Face with Smiling Eyes"},{code:"1f639",desc:"Cat Face with Tears of Joy"},{code:"1f63b",desc:"Smiling Cat Face with Heart-Shaped Eyes"},{code:"1f63c",desc:"Cat Face with Wry Smile"},{code:"1f63d",desc:"Kissing Cat Face with Closed Eyes"},{code:"1f640",desc:"Weary Cat Face"},{code:"1f63f",desc:"Crying Cat Face"},{code:"1f63e",desc:"Pouting Cat Face"},{code:"1f648",desc:"See-No-Evil Monkey"},{code:"1f649",desc:"Hear-No-Evil Monkey"},{code:"1f64a",desc:"Speak-No-Evil Monkey"},{code:"1f476",desc:"Baby"},{code:"1f466",desc:"Boy"},{code:"1f467",desc:"Girl"},{code:"1f468",desc:"Man"},{code:"1f469",desc:"Woman"},{code:"1f474",desc:"Older Man"},{code:"1f475",desc:"Older Woman"},{code:"1f46e",desc:"Police Officer"},{code:"1f482",desc:" Guardsman"},{code:"1f477",desc:" Construction Worker"},{code:"1f478",desc:"Princess"},{code:"1f473",desc:"Man with Turban"},{code:"1f472",desc:"Man with Gua Pi Mao"},{code:"1f471",desc:"Person with Blond Hair"},{code:"1f470",desc:"Bride with Veil"},{code:"1f47c",desc:"Baby Angel"},{code:"1f385",desc:"Father Christmas"},{code:"1f64e",desc:"Person with Pouting Face"},{code:"1f645",desc:"Face with No Good Gesture"},{code:"1f646",desc:"Face with Ok Gesture"},{code:"1f481",desc:"Information Desk Person"},{code:"1f64b",desc:"Happy Person Raising One Hand"},{code:"1f647",desc:"Person Bowing Deeply"},{code:"1f486",desc:"Face Massage"},{code:"1f487",desc:"Haircut"},{code:"1f6b6",desc:"Pedestrian"},{code:"1f3c3",desc:"Runner"},{code:"1f483",desc:"Dancer"},{code:"1f46f",desc:"Woman with Bunny Ears"},{code:"1f6c0",desc:"Bath"},{code:"1f464",desc:"Bust in Silhouette"},{code:"1f465",desc:"Busts in Silhouette"},{code:"1f3c7",desc:"Horse Racing"},{code:"1f3c2",desc:" Snowboarder"},{code:"1f3c4",desc:" Surfer"},{code:"1f6a3",desc:" Rowboat"},{code:"1f3ca",desc:" Swimmer"},{code:"1f6b4",desc:" Bicyclist"},{code:"1f6b5",desc:"Mountain Bicyclist"},{code:"1f46b",desc:" Man and Woman Holding Hands"},{code:"1f46c",desc:"Two Men Holding Hands"},{code:"1f46d",desc:"Two Women Holding Hands"},{code:"1f48f",desc:"Kiss"},{code:"1f468-2764-1f48b-1f468",uCode:"👨‍❤️‍💋‍👨",desc:"Man Kiss Man"},{code:"1f469-2764-1f48b-1f469",uCode:"👩‍❤️‍👩",desc:"Woman Kiss Woman"},{code:"1f491",desc:"Couple with Heart"},{code:"1f468-2764-1f468",uCode:"👨‍❤️‍👨",desc:"Man Heart Man"},{code:"1f469-2764-1f469",uCode:"👩‍❤️‍👩",desc:"Woman Heart Woman"},{code:"1f46a",desc:"Family"},{code:"1f468",desc:"Man Woman Boy"},{code:"1f468-1f469-1f467",desc:"Man Woman Girl"},{code:"1f468-1f469-1f467-1f466",desc:"Man Woman Girl Boy"},{code:"1f468-1f469-1f466-1f466",desc:"Man Woman Boy Boy"},{code:"1f468-1f469-1f467-1f467",desc:"Man Woman Girl Girl"},{code:"1f468-1f468-1f466",desc:"Man Man Boy"},{code:"1f468-1f468-1f467",desc:"Man Man Girl"},{code:"1f468-1f468-1f467-1f466",desc:"Man Man Girl Boy"},{code:"1f468-1f468-1f466-1f466",desc:"Man Man Boy Boy"},{code:"1f469-1f469-1f466",desc:"Woman Woman Boy"},{code:"1f469-1f469-1f467",desc:"Woman Woman Girl"},{code:"1f469-1f469-1f467-1f466",desc:"Woman Woman Girl Boy"},{code:"1f469-1f469-1f467-1f467",desc:"Woman Woman Girl Girl"},{code:"1f4aa",desc:"Flexed Biceps"},{code:"1f448",desc:"White Left Pointing Backhand Index"},{code:"1f449",desc:"White Right Pointing Backhand Index"},{code:"1f446",desc:"White Up Pointing Backhand Index"},{code:"1f447",desc:"White Down Pointing Backhand Index"},{code:"270c",desc:"Victory Hand"},{code:"270b",desc:"Raised Hand"},{code:"1f44c",desc:"Ok Hand Sign"},{code:"1f44d",desc:"Thumbs Up Sign"},{code:"1f44e",desc:"Thumbs Down Sign"},{code:"270a",desc:"Raised Fist"},{code:"1f44a",desc:"Fisted Hand Sign"},{code:"1f44b",desc:"Waving Hand Sign"},{code:"1f44f",desc:"Clapping Hands Sign"},{code:"1f450",desc:"Open  Hands Sign"},{code:"1f64c",desc:"Person Raising Both Hands in Celebration"},{code:"1f64f",desc:"Person with Folded Hands"},{code:"1f485",desc:"Nail Polish"},{code:"1f442",desc:"Ear"},{code:"1f443",desc:"Nose"},{code:"1f463",desc:"Footprints"},{code:"1f440",desc:"Eyes"},{code:"1f445",desc:"Tongue"},{code:"1f444",desc:"Mouth"},{code:"1f48b",desc:"Kiss Mark"},{code:"1f498",desc:"Heart with Arrow"},{code:"2764",desc:"Heavy Black Heart"},{code:"1f493",desc:"Heavy Black Heart"},{code:"1f494",desc:"Broken Heart"},{code:"1f495",desc:"Two Hearts"},{code:"1f496",desc:"Sparkling Hearts"},{code:"1f497",desc:"Growing Hearts"},{code:"1f499",desc:"Blue Heart"},{code:"1f49a",desc:"Green Heart"},{code:"1f49b",desc:"Yellow Heart"},{code:"1f49c",desc:"Purple Heart"},{code:"1f49d",desc:"Heart with Ribbon"},{code:"1f49e",desc:"Revolving Hearts"},{code:"1f49f",desc:"Heart Decoration"},{code:"1f48c",desc:"Love Letter"},{code:"1f4a4",desc:"Sleeping Symbol"},{code:"1f4a2",desc:"Anger Symbol"},{code:"1f4a3",desc:"Bomb"},{code:"1f4a5",desc:"Collision Symbol"},{code:"1f4a6",desc:"Splashing Sweat Symbol"},{code:"1f4a8",desc:"Dash Symbol"},{code:"1f4ab",desc:"Dizzy Symbol"},{code:"1f4ab",desc:"Dizzy Symbol"},{code:"1f4ac",desc:"Speech Balloon"},{code:"1f4ad",desc:"Thought Balloon"},{code:"1f453",desc:"Eyeglasses"},{code:"1f454",desc:"Necktie"},{code:"1f455",desc:"T-Shirt"},{code:"1f456",desc:"Jeans"},{code:"1f457",desc:"Dress"},{code:"1f458",desc:"Kimono"},{code:"1f459",desc:"Bikini"},{code:"1f45a",desc:"Womans Clothes"},{code:"1f45b",desc:"Purse"},{code:"1f45c",desc:"Handbag"},{code:"1f45d",desc:"Pouch"},{code:"1f392",desc:"School Satchel"},{code:"1f45e",desc:"Mans Shoe"},{code:"1f45f",desc:"Athletic Shoe"},{code:"1f460",desc:"High-Heeled Shoe"},{code:"1f461",desc:"Womans Sandal"},{code:"1f462",desc:"Womans Boots"},{code:"1f451",desc:"Crown"},{code:"1f452",desc:"Womans Hat"},{code:"1f462",desc:"Top Hat"},{code:"1f393",desc:"Graduation Cap"},{code:"1f484",desc:"Lipstick"},{code:"1f48d",desc:"Ring"},{code:"1f48e",desc:"Gem Stone"}]},{id:"nature",name:"Animals & Nature",code:"1F435",emoticons:[{code:"1F435",desc:"Monkey Face"},{code:"1F412",desc:"Monkey"},{code:"1F436",desc:"Dog Face"},{code:"1F415",desc:"Dog"},{code:"1F429",desc:"Poodle"},{code:"1F43A",desc:"Wolf Face"},{code:"1F431",desc:"Cat Face"},{code:"1F408",desc:"Cat"},{code:"1F42F",desc:"Tiger Face"},{code:"1F405",desc:"Tiger"},{code:"1F406",desc:"Leopard"},{code:"1F434",desc:"Horse Face"},{code:"1F40E",desc:"Horse"},{code:"1F42E",desc:"Cow Face"},{code:"1F402",desc:"Ox"},{code:"1F403",desc:"Water Buffalo"},{code:"1F404",desc:"Cow"},{code:"1F437",desc:"Pig Face"},{code:"1F416",desc:"Pig"},{code:"1F417",desc:"Boar"},{code:"1F43D",desc:"Pig Nose"},{code:"1F40F",desc:"Ram"},{code:"1F411",desc:"Sheep"},{code:"1F410",desc:"Goat"},{code:"1F42A",desc:"Dromedary Camel"},{code:"1F42B",desc:"Bactrian Camel"},{code:"1F418",desc:"Elephant"},{code:"1F42D",desc:"Mouse Face"},{code:"1F401",desc:"Mouse"},{code:"1F400",desc:"Rat"},{code:"1F439",desc:"Hamster Face"},{code:"1F430",desc:"Rabbit Face"},{code:"1F407",desc:"Rabbit"},{code:"1F43B",desc:"Bear Face"},{code:"1F428",desc:"Koala"},{code:"1F43C",desc:"Panda Face"},{code:"1F43E",desc:"Paw Prints"},{code:"1F414",desc:"Chicken"},{code:"1F413",desc:"Rooster"},{code:"1F423",desc:"Hatching Chick"},{code:"1F424",desc:"Baby Chick"},{code:"1F425",desc:"Front-Facing Baby Chick"},{code:"1F426",desc:"Bird"},{code:"1F427",desc:"Penguin"},{code:"1F438",desc:"Frog Face"},{code:"1F40A",desc:"Crocodile"},{code:"1F422",desc:"Turtle"},{code:"1F40D",desc:"Snake"},{code:"1F432",desc:"Dragon Face"},{code:"1F409",desc:"Dragon"},{code:"1F433",desc:"Spouting Whale"},{code:"1F40B",desc:"Whale"},{code:"1F42C",desc:"Dolphin"},{code:"1F41F",desc:"Fish"},{code:"1F420",desc:"Tropical Fish"},{code:"1F421",desc:"Blowfish"},{code:"1F419",desc:"Octopus"},{code:"1F41A",desc:"Spiral Shell"},{code:"1F40C",desc:"Snail"},{code:"1F41B",desc:"Bug"},{code:"1F41C",desc:"Ant"},{code:"1F41D",desc:"Honeybee"},{code:"1F41E",desc:"Lady Beetle"},{code:"1F490",desc:"Bouquet"},{code:"1F338",desc:"Cherry Blossom"},{code:"1F4AE",desc:"White Flower"},{code:"1F339",desc:"Rose"},{code:"1F33A",desc:"Hibiscus"},{code:"1F33B",desc:"Sunflower"},{code:"1F33C",desc:"Blossom"},{code:"1F337",desc:"Tulip"},{code:"1F331",desc:"Seedling"},{code:"1F332",desc:"Evergreen Tree"},{code:"1F333",desc:"Deciduous Tree"},{code:"1F334",desc:"Palm Tree"},{code:"1F335",desc:"Cactus"},{code:"1F33E",desc:"Ear of Rice"},{code:"1F33F",desc:"Herb"},{code:"2618",desc:"Four Leaf Clover"},{code:"1F341",desc:"Maple Leaf"},{code:"1F342",desc:"Fallen Leaf"},{code:"1F343",desc:"Leaf Fluttering in Wind"}]},{id:"foods",name:"Food & Drink",code:"1F347",emoticons:[{code:"1F347",desc:"Grapes"},{code:"1F348",desc:"Melon"},{code:"1F349",desc:"Watermelon"},{code:"1F34A",desc:"Tangerine"},{code:"1F34B",desc:"Lemon"},{code:"1F34C",desc:"Banana"},{code:"1F34D",desc:"Pineapple"},{code:"1F34E",desc:"Red Apple"},{code:"1F34F",desc:"Green Apple"},{code:"1F350",desc:"Pear"},{code:"1F351",desc:"Peach"},{code:"1F352",desc:"Cherries"},{code:"1F353",desc:"Strawberry"},{code:"1F345",desc:"Tomato"},{code:"1F346",desc:"Aubergine"},{code:"1F33D",desc:"Ear of Maize"},{code:"1F344",desc:"Mushroom"},{code:"1F330",desc:"Chestnut"},{code:"1F35E",desc:"Bread"},{code:"1F356",desc:"Meat on Bone"},{code:"1F357",desc:"Poultry Leg"},{code:"1F354",desc:"Hamburger"},{code:"1F35F",desc:"French Fries"},{code:"1F355",desc:"Slice of Pizza"},{code:"1F373",desc:"Cooking"},{code:"1F372",desc:"Pot of Food"},{code:"1F371",desc:"Bento Box"},{code:"1F358",desc:"Rice Cracker"},{code:"1F359",desc:"Rice Ball"},{code:"1F35A",desc:"Cooked Rice"},{code:"1F35B",desc:"Curry and Rice"},{code:"1F35C",desc:"Steaming Bowl"},{code:"1F35D",desc:"Spaghetti"},{code:"1F360",desc:"Roasted Sweet Potato"},{code:"1F362",desc:"Oden"},{code:"1F363",desc:"Sushi"},{code:"1F364",desc:"Fried Shrimp"},{code:"1F365",desc:"Fish Cake with Swirl Design"},{code:"1F361",desc:"Dango"},{code:"1F366",desc:"Soft Ice Cream"},{code:"1F367",desc:"Shaved Ice"},{code:"1F368",desc:"Ice Cream"},{code:"1F369",desc:"Doughnut"},{code:"1F36A",desc:"Cookie"},{code:"1F382",desc:"Birthday Cake"},{code:"1F370",desc:"Shortcake"},{code:"1F36B",desc:"Chocolate Bar"},{code:"1F36C",desc:"Candy"},{code:"1F36D",desc:"Lollipop"},{code:"1F36E",desc:"Custard"},{code:"1F36F",desc:"Honey Pot"},{code:"1F37C",desc:"Baby Bottle"},{code:"2615",desc:"Hot Beverage"},{code:"1F375",desc:"Teacup Without Handle"},{code:"1F376",desc:"Sake Bottle and Cup"},{code:"1F377",desc:"Wine Glass"},{code:"1F378",desc:"Cocktail Glass"},{code:"1F379",desc:"Tropical Drink"},{code:"1F37A",desc:"Beer Mug"},{code:"1F37B",desc:"Clinking Beer Mugs"},{code:"1F374",desc:"Fork and Knife"},{code:"1F52A",desc:"Hocho"}]},{id:"activity",name:"Activities",code:"1f383",emoticons:[{code:"1f383",desc:" Jack-O-Lantern"},{code:"1f384",desc:"Christmas Tree"},{code:"1f386",desc:" Fireworks"},{code:"1f387",desc:"Firework Sparkler"},{code:"2728",desc:" Sparkles"},{code:"1f388",desc:"Balloon"},{code:"1f389",desc:"Party Popper"},{code:"1f38a",desc:"Confetti Ball"},{code:"1f38b",desc:"Tanabata Tree"},{code:"1f38d",desc:"Pine Decoration"},{code:"1f38e",desc:"Japanese Dolls"},{code:"1f38f",desc:"Carp Streamer"},{code:"1f390",desc:"Wind Chime"},{code:"1f391",desc:"Moon Viewing Ceremony"},{code:"1f380",desc:"Ribbon"},{code:"1f381",desc:"Wrapped Present"},{code:"1f3ab",desc:"Ticket"},{code:"1f3c6",desc:"Trophy"},{code:"1f388",desc:"Balloon"},{code:"26bd",desc:"Soccer Ball"},{code:"26be",desc:"Baseball"},{code:"1f3c0",desc:"Basketball and Hoop"},{code:"1f3c8",desc:"American Football"},{code:"1f3c9",desc:"Rugby Football"},{code:"1f3be",desc:"Tennis Racquet and Ball"},{code:"1f3b1",desc:"Billiards"},{code:"1f3b3",desc:"Bowling"},{code:"1f3af",desc:"Direct Hit"},{code:"26f3",desc:"Flag in Hole"},{code:"1f3a3",desc:"Fishing Pole and Fish"},{code:"1f3bd",desc:"Running Shirt with Sash"},{code:"1f3bf",desc:"Ski and Ski Boot"},{code:"1f3ae",desc:"Video Game"},{code:"1f3b2",desc:"Game Die"},{code:"2660",desc:"Black Spade Suit"},{code:"2665",desc:"Black Heart SuiT"},{code:"2666",desc:"Black Diamond Suit"},{code:"2663",desc:"Black Club Suit"},{code:"1f0cf",desc:"Playing Card Black Joker"},{code:"1f004",desc:"Mahjong Tile Red Dragon"},{code:"1f3b4",desc:"Flower Playing Cards"}]},{id:"places",name:"Travel & Places",code:"1f30d",emoticons:[{code:"1f30d",desc:"Earth Globe Europe-Africa"},{code:"1f30e",desc:"Earth Globe Americas"},{code:"1f30f",desc:"Earth Globe Asia-Australia"},{code:"1f310",desc:"Globe with Meridians"},{code:"1f5fe",desc:"Silhouette of Japan"},{code:"1f30b",desc:"Volcano"},{code:"1f5fb",desc:"Mount Fuji"},{code:"1f3e0",desc:"House Building"},{code:"1f3e1",desc:"House with Garden"},{code:"1f3e2",desc:"Office Building"},{code:"1f3e3",desc:"Japanese Post Office"},{code:"1f3e4",desc:"European Post Office"},{code:"1f3e5",desc:"Hospital"},{code:"1f3e6",desc:"Bank"},{code:"1f3e8",desc:"Hotel"},{code:"1f3e9",desc:"Love Hotel"},{code:"1f3ea",desc:"Convenience Store"},{code:"1f3eb",desc:"School"},{code:"1f3ec",desc:"Department Store"},{code:"1f3ed",desc:"Factory"},{code:"1f3ef",desc:"Japanese Castle"},{code:"1f3f0",desc:"European Castle"},{code:"1f492",desc:"Wedding"},{code:"1f5fc",desc:"Tokyo Tower"},{code:"1f5fd",desc:"Statue of Liberty"},{code:"26ea",desc:"Church"},{code:"26f2",desc:"Fountain"},{code:"26fa",desc:"Tent"},{code:"1f301",desc:"Foggy"},{code:"1f303",desc:"Night with Stars"},{code:"1f304",desc:"Sunrise over Mountains"},{code:"1f305",desc:"Sunrise"},{code:"1f306",desc:"Cityscape at Dusk"},{code:"1f307",desc:"Sunset over Buildings"},{code:"1f309",desc:"Bridge at Night"},{code:"2668",desc:"Hot Springs"},{code:"1f30c",desc:"Milky Way"},{code:"1f3a0",desc:"Carousel Horse"},{code:"1f3a1",desc:"Ferris Wheel"},{code:"1f3a2",desc:"Roller Coaster"},{code:"1f488",desc:"Barber Pole"},{code:"1f3aa",desc:"Circus Tent"},{code:"1f3ad",desc:"Performing Arts"},{code:"1f3a8",desc:"Artist Palette"},{code:"1f3b0",desc:"Slot Machine"},{code:"1f682",desc:"Steam Locomotive"},{code:"1f683",desc:"Railway Car"},{code:"1f684",desc:"High-Speed Train"},{code:"1f685",desc:"High-Speed Train with Bullet Nose"},{code:"1f686",desc:"Train"},{code:"1f687",desc:"Metro"},{code:"1f688",desc:"Light Rail"},{code:"1f689",desc:"Station"},{code:"1f68a",desc:"Tram"},{code:"1f69d",desc:"Monorail"},{code:"1f69e",desc:"Mountain Railway"},{code:"1f68b",desc:"Tram Car"},{code:"1f68c",desc:"Bus"},{code:"1f68d",desc:"Oncoming Bus"},{code:"1f68e",desc:"Trolleybus"},{code:"1f690",desc:"Minibus"},{code:"1f691",desc:"Ambulance"},{code:"1f692",desc:"Fire Engine"},{code:"1f693",desc:"Police Car"},{code:"1f694",desc:"Oncoming Police Car"},{code:"1f695",desc:"Taxi"},{code:"1f695",desc:"Oncoming Taxi"},{code:"1f697",desc:"Automobile"},{code:"1f698",desc:"Oncoming Automobile"},{code:"1f699",desc:"Recreational Vehicle"},{code:"1f69a",desc:"Delivery Truck"},{code:"1f69b",desc:"Articulated Lorry"},{code:"1f69c",desc:"Tractor"},{code:"1f6b2",desc:"Bicycle"},{code:"1f68f",desc:"Bus Stop"},{code:"26fd",desc:"Fuel Pump"},{code:"1f6a8",desc:"Police Cars Revolving Light"},{code:"1f6a5",desc:"Horizontal Traffic Light"},{code:"1f6a6",desc:"Vertical Traffic Light"},{code:"1f6a7",desc:"Construction Sign"},{code:"2693",desc:"Anchor"},{code:"26f5",desc:"Sailboat"},{code:"1f6a4",desc:"Speedboat"},{code:"1f6a2",desc:"Ship"},{code:"2708",desc:"Airplane"},{code:"1f4ba",desc:"Seat"},{code:"1f681",desc:"Helicopter"},{code:"1f69f",desc:"Suspension Railway"},{code:"1f6a0",desc:"Mountain Cableway"},{code:"1f6a1",desc:"Aerial Tramway"},{code:"1f680",desc:"Rocket"},{code:"1f6aa",desc:"Door"},{code:"1f6bd",desc:"Toilet"},{code:"1f6bf",desc:"Shower"},{code:"1f6c1",desc:"Bathtub"},{code:"231b",desc:"Hourglass"},{code:"23f3",desc:"Hourglass with Flowing Sand"},{code:"231a",desc:"Watch"},{code:"23f0",desc:"Alarm Clock"},{code:"1f55b",desc:"Clock Face Twelve Oclock"},{code:"1f567",desc:"Clock Face Twelve-Thirty"},{code:"1f550",desc:"Clock Face One Oclock"},{code:"1f55c",desc:"Clock Face One-thirty"},{code:"1f551",desc:"Clock Face Two Oclock"},{code:"1f55d",desc:"Clock Face Two-thirty"},{code:"1f552",desc:"Clock Face Three Oclock"},{code:"1f55e",desc:"Clock Face Three-thirty"},{code:"1f553",desc:"Clock Face Four Oclock"},{code:"1f55f",desc:"Clock Face Four-thirty"},{code:"1f554",desc:"Clock Face Five Oclock"},{code:"1f560",desc:"Clock Face Five-thirty"},{code:"1f555",desc:"Clock Face Six Oclock"},{code:"1f561",desc:"Clock Face Six-thirty"},{code:"1f556",desc:"Clock Face Seven Oclock"},{code:"1f562",desc:"Clock Face Seven-thirty"},{code:"1f557",desc:"Clock Face Eight Oclock"},{code:"1f563",desc:"Clock Face Eight-thirty"},{code:"1f558",desc:"Clock Face Nine Oclock"},{code:"1f564",desc:"Clock Face Nine-thirty"},{code:"1f559",desc:"Clock Face Ten Oclock"},{code:"1f565",desc:"Clock Face Ten-thirty"},{code:"1f55a",desc:"Clock Face Eleven Oclock"},{code:"1f566",desc:"Clock Face Eleven-thirty"},{code:"1f311",desc:"New Moon Symbol"},{code:"1f312",desc:"Waxing Crescent Moon Symbol"},{code:"1f313",desc:"First Quarter Moon Symbol"},{code:"1f314",desc:"Waxing Gibbous Moon Symbol"},{code:"1f315",desc:"Full Moon Symbol"},{code:"1f316",desc:"Waning Gibbous Moon Symbol"},{code:"1f317",desc:"Last Quarter Moon Symbol"},{code:"1f318",desc:"Waning Crescent Moon Symbol"},{code:"1f319",desc:"Crescent Moon"},{code:"1f31a",desc:"New Moon with Face"},{code:"1f31b",desc:"First Quarter Moon with Face"},{code:"1f31c",desc:"Last Quarter Moon with Face"},{code:"2600",desc:"Black Sun with Rays"},{code:"1f31d",desc:"Full Moon with Face"},{code:"1f31e",desc:"Sun with Face"},{code:"2b50",desc:"White Medium Star"},{code:"1f31f",desc:"Glowing Star"},{code:"1f320",desc:"Shooting Star"},{code:"2601",desc:"Cloud"},{code:"26c5",desc:"Sun Behind Cloud"},{code:"1f300",desc:"Cyclone"},{code:"1f308",desc:"Rainbow"},{code:"1f302",desc:"Closed Umbrella"},{code:"2614",desc:"Umbrella with Rain Drops"},{code:"26a1",desc:"High Voltage Sign"},{code:"2744",desc:"Snowflake"},{code:"2603",desc:"Snowman Without Snow"},{code:"1f525",desc:"Fire"},{code:"1f4a7",desc:"Droplet"},{code:"1F30A",desc:"Water Wave"}]},{id:"objects",name:"Objects",code:"1F507",emoticons:[{code:"1F507",desc:"Speaker with Cancellation Stroke"},{code:"1F508",desc:"Speaker"},{code:"1F509",desc:"Speaker with One Sound Wave"},{code:"1F50A",desc:"Speaker with Three Sound Wave"},{code:"1F4E2",desc:"Public Address Loudspeaker"},{code:"1F4E3",desc:"Cheering Megaphone"},{code:"1F4EF",desc:"Postal Horn"},{code:"1F514",desc:"Bell"},{code:"1F515",desc:"Bell with Cancellation Stroke"},{code:"1F3BC",desc:"Musical Score"},{code:"1F3B5",desc:"Musical Note"},{code:"1F3B6",desc:"Multiple Musical Notes"},{code:"1F3A4",desc:"Microphone"},{code:"1F3A7",desc:"Headphone"},{code:"1F4FB",desc:"Radio"},{code:"1F3B7",desc:"Saxophone"},{code:"1F3B8",desc:"Guitar"},{code:"1F3B9",desc:"Musical Keyboard"},{code:"1F3BA",desc:"Trumpet"},{code:"1F3BB",desc:"Violin"},{code:"1F4F1",desc:"Mobile Phone"},{code:"1F4F2",desc:"Mobile Phone with Rightwards Arrow at Left"},{code:"260E",desc:"Black Telephone"},{code:"1F4DE",desc:"Telephone Receiver"},{code:"1F4DF",desc:"Pager"},{code:"1F4E0",desc:"Fax Machine"},{code:"1F50B",desc:"Battery"},{code:"1F50C",desc:"Electric Plug"},{code:"1F4BB",desc:"Personal Computer"},{code:"1F4BD",desc:"Minidisc"},{code:"1F4BE",desc:"Floppy Disk"},{code:"1F4BF",desc:"Optical Disk"},{code:"1F4C0",desc:"Dvd"},{code:"1F3A5",desc:"Movie Camera"},{code:"1F3AC",desc:"Clapper Board"},{code:"1F4FA",desc:"Television"},{code:"1F4F7",desc:"Camera"},{code:"1F4F9",desc:"Video Camera"},{code:"1F4FC",desc:"Videocassette"},{code:"1F50D",desc:"Left-Pointing Magnifying Glass"},{code:"1F50E",desc:"Right-Pointing Magnifying Glass"},{code:"1F52C",desc:"Microscope"},{code:"1F52D",desc:"Telelscope"},{code:"1F4E1",desc:"Satellite Antenna"},{code:"1F4A1",desc:"Electric Light Bulb"},{code:"1F526",desc:"Electric Torch"},{code:"1F3EE",desc:"Izakaya Lantern"},{code:"1F4D4",desc:"Notebook with Decorative Cover"},{code:"1F4D5",desc:"Closed Book"},{code:"1F4D6",desc:"Open Book"},{code:"1F4D7",desc:"Green Book"},{code:"1F4D8",desc:"Blue Book"},{code:"1F4D9",desc:"Orange Book"},{code:"1F4DA",desc:"Books"},{code:"1F4D3",desc:"Notebook"},{code:"1F4D2",desc:"Ledger"},{code:"1F4C3",desc:"Curl"},{code:"1F4DC",desc:"Scroll"},{code:"1F4C4",desc:"Page Facing Up"},{code:"1F4F0",desc:"Newspaper"},{code:"1F4D1",desc:"Bookmark Tabs"},{code:"1F516",desc:"Bookmark"},{code:"1F4B0",desc:"Money Bag"},{code:"1F4B4",desc:"Banknote with Yen Sign"},{code:"1F4B5",desc:"Banknote with Dollar Sign"},{code:"1F4B6",desc:"Banknote with Euro Sign"},{code:"1F4B7",desc:"Banknote with Pound Sign"},{code:"1F4B8",desc:"Money with Wings"},{code:"1F4B3",desc:"Credit Card"},{code:"1F4B9",desc:"Chart with Upwards Trend and Yen Sign"},{code:"1F4B1",desc:"Currency Exchange"},{code:"1F4B2",desc:"Heavy Dollar Sign"},{code:"2709",desc:"Envelope"},{code:"1F4E7",desc:"E-Mail Symbol"},{code:"1F4E8",desc:"Incoming Envelope"},{code:"1F4E9",desc:"Envelope with Downwards Arrow Above"},{code:"1F4E4",desc:"Outbox Tray"},{code:"1F4E5",desc:"Inbox Tray"},{code:"1F4E6",desc:"Package"},{code:"1F4BE",desc:"Closed Mailbox with Raised Flag"},{code:"1F4EA",desc:"Closed Mailbox with Lowered Flag"},{code:"1F4EC",desc:"Open Mailbox with Raised Flag"},{code:"1F4ED",desc:"Open Mailbox with Lowered Flag"},{code:"1F5F3",desc:"Postbox"},{code:"270F",desc:"Pencil"},{code:"2712",desc:"Black Nib"},{code:"1F4DD",desc:"Memo"},{code:"1F4BC",desc:"Briefcase"},{code:"1F4C1",desc:"File Folder"},{code:"1F4C2",desc:"Open File Folder"},{code:"1F4C5",desc:"Calender"},{code:"1F4C6",desc:"Tear-off Calender"},{code:"1F4C7",desc:"Card Index"},{code:"1F4C8",desc:"Chart with Upwards Trend"},{code:"1F4C9",desc:"Chart with Downwards Trend"},{code:"1F4CA",desc:"Bar Chart"},{code:"1F4CB",desc:"Clipboard"},{code:"1F4CC",desc:"Pushpin"},{code:"1F4CD",desc:"Round Pushpin"},{code:"1F4CE",desc:"Paperclip"},{code:"1F4CF",desc:"Straight Ruler"},{code:"1F4D0",desc:"Triangular Ruler"},{code:"2702",desc:"Black Scissors"},{code:"1F512",desc:"Lock"},{code:"1F513",desc:"Open Lock"},{code:"1F50F",desc:"Lock with Ink Pen"},{code:"1F510",desc:"Closed Lock with Key"},{code:"1F511",desc:"Key"},{code:"1F528",desc:"Hammer"},{code:"1F52B",desc:"Pistol"},{code:"1F527",desc:"Wrench"},{code:"1F529",desc:"Nut and Bolt"},{code:"1F517",desc:"Link Symbol"},{code:"1F489",desc:"Syringe"},{code:"1F48A",desc:"Pill"},{code:"1F6AC",desc:"Smoking Symbol"},{code:"1F5FF",desc:"Moyai"},{code:"1F52E",desc:"Crystal Ball"}]},{id:"symbols",name:"Symbols",code:"1F3E7",emoticons:[{code:"1F3E7",desc:"Automated Teller Machine"},{code:"1F6AE",desc:"Put Litter in Its Place Symbol"},{code:"1F6B0",desc:"Potable Water Symbol"},{code:"267F",desc:"Wheelchair Symbol"},{code:"1F6B9",desc:"Mens Symbol"},{code:"1F6BA",desc:"Womens Symbol"},{code:"1F6BB",desc:"Restroom"},{code:"1F6BC",desc:"Baby Symbol"},{code:"1F6BE",desc:"Water Closet"},{code:"1F6C2",desc:"Passport Control"},{code:"1F6C3",desc:"Customs"},{code:"1F6C4",desc:"Baggage Claim"},{code:"1F6C5",desc:"Left Luggage"},{code:"26A0",desc:"Warning Sign"},{code:"1F6B8",desc:"Children Crossing"},{code:"26D4",desc:"No Entry"},{code:"1F6AB",desc:"No Entry Sign"},{code:"1F6B3",desc:"No Bicycles"},{code:"1F6AD",desc:"No Smoking Symbol"},{code:"1F6AF",desc:"Do Not Litter Symbol"},{code:"1F6B1",desc:"Non-Potable Water Symbol"},{code:"1F6B7",desc:"No Pedestrians"},{code:"1F4F5",desc:"No Mobile Phones"},{code:"1F51E",desc:"No One Under Eighteen Symbol"},{code:"2B06",desc:"Upwards Black Arrow"},{code:"2197",desc:"North East Arrow"},{code:"27A1",desc:"Black Rightwards Arrow"},{code:"2198",desc:"South East Arrow"},{code:"2B07",desc:"Downwards Black Arrow"},{code:"2199",desc:"South West Arrow"},{code:"2B05",desc:"Leftwards Black Arrow"},{code:"2196",desc:"North West Arrow"},{code:"2195",desc:"Up Down Arrow"},{code:"2194",desc:"Left Right Arrow"},{code:"21A9",desc:"Leftwards Arrow with Hook"},{code:"21AA",desc:"Rightwards Arrow with Hook"},{code:"2934",desc:"Arrow Pointing Rightwards Then Curving Upwards"},{code:"2935",desc:"Arrow Pointing Rightwards Then Curving Downwards"},{code:"1F503",desc:"Clockwise Downwards and Upwards Open Circle Arrows"},{code:"1F504",desc:"Anticlockwise Downwards and Upwards Open Circle Arrows"},{code:"1F519",desc:"Back with Leftwards Arrow Above"},{code:"1F51A",desc:"End with Leftwards Arrow Above"},{code:"1F51B",desc:"On with Exclamation Mark with Left Right Arrow Above"},{code:"1F51C",desc:"Soon with Rightwards Arrow Above"},{code:"1F51D",desc:"Top with Upwards Arrow Above"},{code:"1F52F",desc:"Six Pointed Star with Middle Dot"},{code:"2648",desc:"Aries"},{code:"2649",desc:"Taurus"},{code:"264A",desc:"Gemini"},{code:"264B",desc:"Cancer"},{code:"264C",desc:"Leo"},{code:"264D",desc:"Virgo"},{code:"264E",desc:"Libra"},{code:"264F",desc:"Scorpius"},{code:"2650",desc:"Sagittarius"},{code:"2651",desc:"Capricorn"},{code:"2652",desc:"Aquarius"},{code:"2653",desc:"Pisces"},{code:"26CE",desc:"Ophiuchus"},{code:"1F500",desc:"Twisted Rightwards Arrows"},{code:"1F501",desc:"Clockwise Rightwards and Leftwards Open Circle Arrows"},{code:"1F502",desc:"Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay"},{code:"25B6",desc:"Black Right-Pointing Triangle"},{code:"23E9",desc:"Black Right-Pointing Double Triangle"},{code:"25C0",desc:"Black Left-Pointing Triangle"},{code:"23EA",desc:"Black Left-Pointing Double Triangle"},{code:"1F53C",desc:"Up-Pointing Small Red Triangle"},{code:"23EB",desc:"Black Up-Pointing Double Triangle"},{code:"1F53D",desc:"Down-Pointing Small Red Triangle"},{code:"23EC",desc:"Black Down-Pointing Double Triangle"},{code:"1F3A6",desc:"Cinema"},{code:"1F505",desc:"Low Brightness Symbol"},{code:"1F506",desc:"High Brightness Symbol"},{code:"1F4F6",desc:"Antenna with Bars"},{code:"1F4F3",desc:"Vibration Mode"},{code:"1F4F4",desc:"Mobile Phone off"},{code:"267B",desc:"Black Universal Recycling Symbol"},{code:"1F531",desc:"Trident Emblem"},{code:"1F4DB",desc:"Name Badge"},{code:"1F530",desc:"Japanese Symbol for Beginner"},{code:"2B55",desc:"Heavy Large Circle"},{code:"2705",desc:"White Heavy Check Mark"},{code:"2611",desc:"Ballot Box with Check"},{code:"2714",desc:"Heavy Check Mark"},{code:"2716",desc:"Heavy Multiplication X"},{code:"274C",desc:"Cross Mark"},{code:"274E",desc:"Negative Squared Cross Mark"},{code:"2795",desc:"Heavy Plus Sign"},{code:"2796",desc:"Heavy Minus Sign"},{code:"2797",desc:"Heavy Division Sign"},{code:"27B0",desc:"Curly Loop"},{code:"27BF",desc:"Double Curly Loop"},{code:"303D",desc:"Part Alternation Mark"},{code:"2733",desc:"Eight Spoked Asterisk"},{code:"2734",desc:"Eight Pointed Black Star"},{code:"2747",desc:"Sparkle"},{code:"203C",desc:"Double Exclamation Mark"},{code:"2049",desc:"Exclamation Question Mark"},{code:"2753",desc:"Black Question Mark Ornament"},{code:"2754",desc:"White Question Mark Ornament"},{code:"2755",desc:"White Exclamation Mark Ornament"},{code:"2757",desc:"Heavy Exclamation Mark Symbol"},{code:"3030",desc:"Wavy Dash"},{code:"2122",desc:"Trade Mark Sign"},{code:"1F51F",desc:"Keycap Ten"},{code:"1F4AF",desc:"Hundred Points Symbol"},{code:"1F520",desc:"Input Symbol for Latin Capital Letters"},{code:"1F521",desc:"Input Symbol for Latin Small Letters"},{code:"1F522",desc:"Input Symbol for Numbers"},{code:"1F523",desc:"Input Symbol for Symbols"},{code:"1F524",desc:"Input Symbol for Latin Letters"},{code:"1F170",desc:"Negative Squared Latin Capital Letter a"},{code:"1F18E",desc:"Negative Squared Ab"},{code:"1F171",desc:"Negative Squared Latin Capital Letter B"},{code:"1F191",desc:"Squared Cl"},{code:"1F192",desc:"Squared Cool"},{code:"1F193",desc:"Squared Free"},{code:"2139",desc:"Information Source"},{code:"1F194",desc:"Squared Id"},{code:"24C2",desc:"Circled Latin Capital Letter M"},{code:"1F195",desc:"Squared New"},{code:"1F196",desc:"Squared Ng"},{code:"1F17E",desc:"Negative Squared Latin Capital Letter O"},{code:"1F197",desc:"Squared Ok"},{code:"1F17F",desc:"Negative Squared Latin Capital Letter P"},{code:"1F198",desc:"Squared Sos"},{code:"1F199",desc:"Squared Up with Exclamation Mark"},{code:"1F19A",desc:"Squared Vs"},{code:"1F201",desc:"Squared Katakana Koko"},{code:"1F202",desc:"Squared Katakana Sa"},{code:"1F237",desc:"Squared Cjk Unified Ideograph-6708"},{code:"1F236",desc:"Squared Cjk Unified Ideograph-6709"},{code:"1F22F",desc:"Squared Cjk Unified Ideograph-6307"},{code:"1F250",desc:"Circled Ideograph Advantage"},{code:"1F239",desc:"Squared Cjk Unified Ideograph-5272"},{code:"1F21A",desc:"Squared Cjk Unified Ideograph-7121"},{code:"1F232",desc:"Squared Cjk Unified Ideograph-7981"},{code:"1F251",desc:"Circled Ideograph Accept"},{code:"1F238",desc:"Squared Cjk Unified Ideograph-7533"},{code:"1F234",desc:"Squared Cjk Unified Ideograph-5408"},{code:"1F233",desc:"Squared Cjk Unified Ideograph-7a7a"},{code:"3297",desc:"Circled Ideograph Congratulation"},{code:"3299",desc:"Circled Ideograph Secret"},{code:"1F23A",desc:"Squared Cjk Unified Ideograph-55b6"},{code:"1F235",desc:"Squared Cjk Unified Ideograph-6e80"},{code:"25AA",desc:"Black Small Square"},{code:"25AB",desc:"White Small Square"},{code:"25FB",desc:"White Medium Square"},{code:"25FC",desc:"Black Medium Square"},{code:"25FD",desc:"White Medium Small Square"},{code:"25FE",desc:"Black Medium Small Square"},{code:"2B1B",desc:"Black Large Square"},{code:"2B1C",desc:"White Large Square"},{code:"1F536",desc:"Large Orange Diamond"},{code:"1F537",desc:"Large Blue Diamond"},{code:"1F538",desc:"Small Orange Diamond"},{code:"1F539",desc:"Small Blue Diamond"},{code:"1F53A",desc:"Up-Pointing Red Triangle"},{code:"1F53B",desc:"Down-Pointing Red Triangle"},{code:"1F4A0",desc:"Diamond Shape with a Dot Inside"},{code:"1F518",desc:"Radio Button"},{code:"1F532",desc:"Black Square Button"},{code:"1F533",desc:"White Square Button"},{code:"26AA",desc:"Medium White Circle"},{code:"26AB",desc:"Medium Black Circle"},{code:"1F534",desc:"Large Red Circle"},{code:"1F535",desc:"Large Blue Circle"}]},{id:"flags",name:"Flags",code:"1F3C1",emoticons:[{code:"1f3c1",desc:"Chequered Flag"},{code:"1f1e8-1f1f3",desc:"China Flag"},{code:"1f38c",desc:"Crossed Flags"},{code:"1f1e9-1f1ea",desc:"Germany Flag"},{code:"1f1ea-1f1f8",desc:"Spain Flag"},{code:"1f1e6-1f1e8",desc:"Ascension Island Flag"},{code:"1f1e6-1f1e9",desc:"Andorra Flag"},{code:"1f1e6-1f1ea",desc:"United Arab Emirates Flag"},{code:"1f1e6-1f1eb",desc:"Afghanistan Flag"},{code:"1f1e6-1f1ec",desc:"Antigua & Barbuda Flag"},{code:"1f1e6-1f1ee",desc:"Anguilla Flag"},{code:"1f1e6-1f1f1",desc:"Albania Flag"},{code:"1f1e6-1f1f2",desc:"Armenia Flag"},{code:"1f1e6-1f1f4",desc:"Angola Flag"},{code:"1f1e6-1f1f6",desc:"Antarctica Flag"},{code:"1f1e6-1f1f7",desc:"Argentina Flag"},{code:"1f1e6-1f1f8",desc:"American Samoa Flag"},{code:"1f1e6-1f1f9",desc:"Austria Flag"},{code:"1f1e6-1f1fa",desc:"Australia Flag"},{code:"1f1e6-1f1fc",desc:"Aruba Flag"},{code:"1f1e6-1f1fd",desc:"Åland Islands Flag"},{code:"1f1e6-1f1ff",desc:"Azerbaijan Flag"},{code:"1f1e7-1f1e7",desc:"Barbados Flag"},{code:"1f1e7-1f1e9",desc:"Bangladesh Flag"},{code:"1f1e7-1f1ea",desc:"Belgium Flag"},{code:"1f1e7-1f1eb",desc:"Burkina Faso Flag"},{code:"1f1e7-1f1ec",desc:"Bulgaria Flag"},{code:"1f1e7-1f1ed",desc:"Bahrain Flag"},{code:"1f1e7-1f1ee",desc:"Burundi Flag"},{code:"1f1e7-1f1ef",desc:"Benin Flag"},{code:"1f1e7-1f1f1",desc:"St. Barthélemy Flag"},{code:"1f1e7-1f1f2",desc:"Bermuda Flag"},{code:"1f1e7-1f1f4",desc:"Bolivia Flag"},{code:"1f1e7-1f1f6",desc:"Caribbean Netherlands Flag"},{code:"1f1e7-1f1f7",desc:"Brazil Flag"},{code:"1f1e7-1f1f8",desc:"Bahamas Flag"},{code:"1f1e7-1f1f9",desc:"Bhutan Flag"},{code:"1f1e7-1f1fb",desc:"Bouvet Island Flag"},{code:"1f1e7-1f1fc",desc:"Botswana Flag"},{code:"1f1e7-1f1fe",desc:"Belarus Flag"},{code:"1f1e7-1f1ff",desc:"Belize Flag"},{code:"1f1e8-1f1e6",desc:"Canada Flag"},{code:"1f1e8-1f1e8",desc:"Cocos (keeling) Islands Flag"},{code:"1f1e8-1f1e9",desc:"Congo - Kinshasa Flag"},{code:"1f1e8-1f1eb",desc:"Central African Republic Flag"},{code:"1f1e8-1f1ec",desc:"Congo - Brazzaville Flag"},{code:"1f1e8-1f1ed",desc:"Switzerland Flag"},{code:"1f1e8-1f1ee",desc:"Côte D’ivoire Flag"},{code:"1f1e8-1f1f0",desc:"Cook Islands Flag"},{code:"1f1e8-1f1f1",desc:"Chile Flag"},{code:"1f1e8-1f1f2",desc:"Cameroon Flag"},{code:"1f1e8-1f1f4",desc:"Colombia Flag"},{code:"1f1e8-1f1f7",desc:"Costa Rica Flag"},{code:"1f1e8-1f1fa",desc:"Cuba Flag"},{code:"1f1e8-1f1fb",desc:"Cape Verde Flag"},{code:"1f1e8-1f1fc",desc:"Curaçao Flag"},{code:"1f1e8-1f1fd",desc:"Christmas Island Flag"},{code:"1f1e8-1f1fe",desc:"Cyprus Flag"},{code:"1f1e8-1f1ff",desc:'Czechia Flag"'},{code:"1f1e9-1f1ec",desc:"Diego Garcia Flag"},{code:"1f1e9-1f1ef",desc:"Djibouti Flag"},{code:"1f1e9-1f1f0",desc:"Denmark Flag"},{code:"1f1e9-1f1f2",desc:"Dominica Flag"},{code:"1f1e9-1f1f4",desc:"Dominican Republic Flag"},{code:"1f1e9-1f1ff",desc:"Algeria Flag"},{code:"1f1ea-1f1e6",desc:"Ceuta & Melilla Flag"},{code:"1f1ea-1f1e8",desc:"Ecuador Flag"},{code:"1f1ea-1f1ea",desc:"Estonia Flag"},{code:"1f1ea-1f1ec",desc:"Egypt Flag"},{code:"1f1ea-1f1ed",desc:"Western Sahara Flag"},{code:"1f1ea-1f1f7",desc:"Eritrea Flag"},{code:"1f1ea-1f1f9",desc:"Ethiopia Flag"},{code:"1f1ea-1f1fa",desc:"European Union Flag"},{code:"1f1eb-1f1ee",desc:"Finland Flag"},{code:"1f1eb-1f1ef",desc:"Fiji Flag"},{code:"1f1eb-1f1f0",desc:"Falkland Islands Flag"},{code:"1f1eb-1f1f2",desc:"Micronesia Flag"},{code:"1f1eb-1f1f4",desc:"Faroe Islands Flag"},{code:"1f1ec-1f1e6",desc:"Gabon Flag"},{code:"1f1ec-1f1e9",desc:"Grenada Flag"},{code:"1f1ec-1f1ea",desc:"Georgia Flag"},{code:"1f1ec-1f1eb",desc:"French Guiana Flag"},{code:"1f1ec-1f1ec",desc:"Guernsey Flag"},{code:"1f1ec-1f1ed",desc:"Ghana Flag"},{code:"1f1ec-1f1ee",desc:"Gibraltar Flag"},{code:"1f1ec-1f1f1",desc:"Greenland Flag"},{code:"1f1ec-1f1f2",desc:"Gambia Flag"},{code:"1f1ec-1f1f3",desc:"Guinea Flag"},{code:"1f1ec-1f1f5",desc:"Guadeloupe Flag"},{code:"1f1ec-1f1f6",desc:"Equatorial Guinea Flag"},{code:"1f1ec-1f1f7",desc:"Greece Flag"},{code:"1f1ec-1f1f8",desc:"South Georgia & South Sandwich Islands Flag"},{code:"1f1ec-1f1f9",desc:"Guatemala Flag"},{code:"1f1ec-1f1fa",desc:"Guam Flag"},{code:"1f1ec-1f1fc",desc:"Guinea-Bissau Flag"},{code:"1f1ec-1f1fe",desc:"Guyana Flag"},{code:"1f1ed-1f1f0",desc:"Hong Kong Sar China Flag"},{code:"1f1ed-1f1f2",desc:"Heard & Mcdonald Islands Flag"},{code:"1f1ed-1f1f3",desc:"Honduras Flag"},{code:"1f1ed-1f1f7",desc:"Croatia Flag"},{code:"1f1ed-1f1f9",desc:"Haiti Flag"},{code:"1f1ed-1f1fa",desc:"Hungary Flag"},{code:"1f1ee-1f1e8",desc:"Canary Islands Flag"},{code:"1f1ee-1f1e9",desc:"Indonesia Flag"},{code:"1f1ee-1f1ea",desc:"Ireland Flag"},{code:"1f1ee-1f1f1",desc:"Israel Flag"},{code:"1f1ee-1f1f2",desc:"Isle of Man Flag"},{code:"1f1ee-1f1f3",desc:"India Flag"},{code:"1f1ee-1f1f4",desc:"British Indian Ocean Territory Flag"},{code:"1f1ee-1f1f6",desc:"Iraq Flag"},{code:"1f1ee-1f1f7",desc:"Iran Flag"},{code:"1f1ee-1f1f8",desc:"Iceland Flag"},{code:"1f1ef-1f1ea",desc:"Jersey Flag"},{code:"1f1ef-1f1f2",desc:"Jamaica Flag"},{code:"1f1ef-1f1f4",desc:"Jordan Flag"},{code:"1f1f0-1f1ea",desc:"Kenya Flag"},{code:"1f1f0-1f1ec",desc:"Kyrgyzstan Flag"},{code:"1f1f0-1f1ed",desc:"Cambodia Flag"},{code:"1f1f0-1f1ee",desc:"Kiribati Flag"},{code:"1f1f0-1f1f2",desc:"Comoros Flag"},{code:"1f1f0-1f1f3",desc:"St. Kitts & Nevis Flag"},{code:"1f1f0-1f1f5",desc:"North Korea Flag"},{code:"1f1f0-1f1fc",desc:"Kuwait Flag"},{code:"1f1f0-1f1fe",desc:"Cayman Islands Flag"},{code:"1f1f0-1f1ff",desc:"Kazakhstan Flag"},{code:"1f1f1-1f1e6",desc:"Laos Flag"},{code:"1f1f1-1f1e7",desc:"Lebanon Flag"},{code:"1f1f1-1f1e8",desc:"St. Lucia Flag"},{code:"1f1f1-1f1ee",desc:"Liechtenstein Flag"},{code:"1f1f1-1f1f0",desc:"Sri Lanka Flag"},{code:"1f1f1-1f1f7",desc:"Liberia Flag"},{code:"1f1f1-1f1f8",desc:"Lesotho Flag"},{code:"1f1f1-1f1f9",desc:"Lithuania Flag"},{code:"1f1f1-1f1fa",desc:"Luxembourg Flag"},{code:"1f1f1-1f1fb",desc:"Latvia Flag"},{code:"1f1f1-1f1fe",desc:"Libya Flag"},{code:"1f1f2-1f1e6",desc:"Morocco Flag"},{code:"1f1f2-1f1e8",desc:"Monaco Flag"},{code:"1f1f2-1f1e9",desc:"Moldova Flag"},{code:"1f1f2-1f1ea",desc:"Montenegro Flag"},{code:"1f1f2-1f1eb",desc:"St. Martin Flag"},{code:"1f1f2-1f1ec",desc:"Madagascar Flag"},{code:"1f1f2-1f1ed",desc:"Marshall Islands Flag"},{code:"1f1f2-1f1f0",desc:"Macedonia Flag"},{code:"1f1f2-1f1f1",desc:"Mali Flag"},{code:"1f1f2-1f1f2",desc:"Myanmar (burma) Flag"},{code:"1f1f2-1f1f3",desc:"Mongolia Flag"},{code:"1f1f2-1f1f4",desc:"Macau Sar China Flag"},{code:"1f1f2-1f1f5",desc:"Northern Mariana Islands Flag"},{code:"1f1f2-1f1f6",desc:"Martinique Flag"},{code:"1f1f2-1f1f7",desc:"Mauritania Flag"},{code:"1f1f2-1f1f8",desc:"Montserrat Flag"},{code:"1f1f2-1f1f9",desc:"Malta Flag"},{code:"1f1f2-1f1fa",desc:"Mauritius Flag"},{code:"1f1f2-1f1fb",desc:"Maldives Flag"},{code:"1f1f2-1f1fc",desc:"Malawi Flag"},{code:"1f1f2-1f1fd",desc:"Mexico Flag"},{code:"1f1f2-1f1fe",desc:"Malaysia Flag"},{code:"1f1f2-1f1ff",desc:"Mozambique Flag"},{code:"1f1f3-1f1e6",desc:"Namibia Flag"},{code:"1f1f3-1f1e8",desc:"New Caledonia Flag"},{code:"1f1f3-1f1ea",desc:"Niger Flag"},{code:"1f1f3-1f1eb",desc:"Norfolk Island Flag"},{code:"1f1f3-1f1ec",desc:"Nigeria Flag"},{code:"1f1f3-1f1ee",desc:"Nicaragua Flag"},{code:"1f1f3-1f1f1",desc:"Netherlands Flag"},{code:"1f1f3-1f1f4",desc:"Norway Flag"},{code:"1f1f3-1f1f5",desc:"Nepal Flag"},{code:"1f1f3-1f1f7",desc:"Nauru Flag"},{code:"1f1f3-1f1fa",desc:"Niue Flag"},{code:"1f1f3-1f1ff",desc:"New Zealand Flag"},{code:"1f1f4-1f1f2",desc:"Oman Flag"},{code:"1f1f8-1f1ff",desc:"Swaziland Flag"},{code:"1f1f5-1f1e6",desc:"Panama Flag"},{code:"1f1f5-1f1ea",desc:"Peru Flag"},{code:"1f1f5-1f1eb",desc:"French Polynesia Flag"},{code:"1f1f5-1f1ec",desc:"Papua New Guinea Flag"},{code:"1f1f5-1f1ed",desc:"Philippines Flag"},{code:"1f1f5-1f1f0",desc:"Pakistan Flag"},{code:"1f1f5-1f1f1",desc:"Poland Flag"},{code:"1f1f5-1f1f2",desc:"St. Pierre & Miquelon  Flag"},{code:"1f1f5-1f1f3",desc:"Pitcairn Islands Flag"},{code:"1f1f5-1f1f7",desc:"Puerto Rico Flag"},{code:"1f1f5-1f1f8",desc:"Palestinian Territories Flag"},{code:"1f1f5-1f1f9",desc:"Portugal Flag"},{code:"1f1f5-1f1fc",desc:"Palau Flag"},{code:"1f1f5-1f1fe",desc:"Paraguay Flag"},{code:"1f1f6-1f1e6",desc:"Qatar Flag"},{code:"1f1f7-1f1ea",desc:"Réunion Flag"},{code:"1f1f7-1f1f4",desc:"Romania Flag"},{code:"1f1f7-1f1f8",desc:"Serbia Flag"},{code:"1f1f7-1f1fc",desc:"Rwanda Flag"},{code:"1f1f8-1f1e6",desc:"Saudi Arabia Flag"},{code:"1f1f8-1f1e7",desc:"Solomon Islands Flag"},{code:"1f1f8-1f1e8",desc:"Seychelles Flag"},{code:"1f1f8-1f1e9",desc:"Sudan Flag"},{code:"1f1f8-1f1ea",desc:"Sweden Flag"},{code:"1f1f8-1f1ec",desc:"Singapore Flag"},{code:"1f1f8-1f1ee",desc:"Slovenia Flag"},{code:"1f1f8-1f1ed",desc:"St. Helena  Flag"},{code:"1f1f8-1f1ef",desc:"Svalbard & Jan Mayen  Flag"},{code:"1f1f8-1f1f1",desc:"Sierra Leone Flag"},{code:"1f1f8-1f1f2",desc:"San Marino Flag"},{code:"1f1f8-1f1f3",desc:"Senegal Flag"},{code:"1f1f8-1f1f4",desc:"Somalia Flag"},{code:"1f1f8-1f1f7",desc:"Suriname Flag"},{code:"1f1f8-1f1f8",desc:"South Sudan  Flag"},{code:"1f1f8-1f1f9",desc:"São Tomé & Príncipe Flag"},{code:"1f1f8-1f1fb",desc:"El Salvador Flag"},{code:"1f1f8-1f1fd",desc:"Sint Maarten Flag"},{code:"1f1f8-1f1fe",desc:"Syria Flag"},{code:"1f1f9-1f1e6",desc:"Tristan Da Cunha Flag"},{code:"1f1f9-1f1e8",desc:"Turks & Caicos Islands  Flag"},{code:"1f1f9-1f1eb",desc:"French Southern Territories Flag"},{code:"1f1f9-1f1ec",desc:"Togo Flag"},{code:"1f1f9-1f1ed",desc:"Thailand Flag"},{code:"1f1f9-1f1ef",desc:"Tajikistan Flag"},{code:"1f1f9-1f1f0",desc:"Tokelau Flag"},{code:"1f1f9-1f1f1",desc:"Timor-Leste Flag"},{code:"1f1f9-1f1f2",desc:"Turkmenistan Flag"},{code:"1f1f9-1f1f3",desc:"Tunisia Flag"},{code:"1f1f9-1f1f4",desc:"Tonga Flag"},{code:"1f1f9-1f1f7",desc:"Turkey Flag"},{code:"1f1f9-1f1f9",desc:"Trinidad & Tobago Flag"},{code:"1f1f9-1f1fb",desc:"Tuvalu Flag"},{code:"1f1f9-1f1fc",desc:"Taiwan Flag"},{code:"1f1f9-1f1ff",desc:"Tanzania Flag"},{code:"1f1fa-1f1e6",desc:"Ukraine City  Flag"},{code:"1f1fa-1f1ec",desc:"Uganda Flag"},{code:"1f1fa-1f1f2",desc:"U.s. Outlying Islands  Flag"},{code:"1f1fa-1f1fe",desc:"Uruguay  Flag"},{code:"1f1fa-1f1ff",desc:"Uzbekistan Flag"},{code:"1f1fb-1f1e6",desc:"Vatican City  Flag"},{code:"1f1fb-1f1e8",desc:"St. Vincent & Grenadines Flag"},{code:"1f1fb-1f1ea",desc:"Venezuela Flag"},{code:"1f1fb-1f1ec",desc:"British Virgin Islands Flag"},{code:"1f1fb-1f1ee",desc:"U.s. Virgin Islands Flag"},{code:"1f1fb-1f1f3",desc:"Vietnam Flag"},{code:"1f1fc-1f1f8",desc:"Samoa Flag"},{code:"1f1fb-1f1fa",desc:"Vanuatu Flag"},{code:"1f1fc-1f1eb",desc:'"Wallis & Futuna Flag'},{code:"1f1fd-1f1f0",desc:"Kosovo Flag"},{code:"1f1fe-1f1ea",desc:"Yemen Flag"},{code:"1f1fe-1f1f9",desc:"Mayotte Flag"},{code:"1f1ff-1f1e6",desc:"South Africa Flag"},{code:"1f1ff-1f1f2",desc:"Zambia Flag"},{code:"1f1ff-1f1fc",desc:"Zimbabwe Flag"},{code:"1f1eb-1f1f7",desc:"France Flag"},{code:"1f1ec-1f1e7",desc:"United Kingdom  Flag"},{code:"1f1ee-1f1f9",desc:"Italy Flag"},{code:"1f1ef-1f1f5",desc:"Japan Flag"},{code:"1f1f0-1f1f7",desc:"South Korea Flag"},{code:"1f1f7-1f1fa",desc:"Russia Flag"},{code:"1F6A9",desc:"Triangular Flag on Post"},{code:"1f1fa-1f1f8",desc:"United States Flag"}]}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.PLUGINS.emoticons=function(t){var a=t.$,n=t.opts.emoticonsSet,r=n&&n[0],i="";function s(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),a=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(a&&t.node.hasClass(a,"fr-emoticon"))return a;var n=t.selection.ranges(0),r=n.startContainer;if(r.nodeType==Node.ELEMENT_NODE&&0<r.childNodes.length&&0<n.startOffset){var i=r.childNodes[n.startOffset-1];if(t.node.hasClass(i,"fr-emoticon"))return i}return!1}function o(){return"".concat((e=n,a=r,'<div class="fr-buttons fr-tabs fr-tabs-scroll">\n                        '.concat(function(e,a){var n="";return e.forEach(function(e){var r={image:e.code.toLowerCase()},i={elementClass:e.id===a.id?"fr-active fr-active-tab":"",emoticonsUnicodeClass:t.opts.emoticonsUseImage?"":"fr-tabs-unicode",title:t.language.translate(e.name),dataCmd:"setEmoticonCategory",dataParam1:e.id,image:t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'.concat(r.image,'.svg"/>'):"&#x".concat(r.image,";")};n+='<button class="fr-command fr-btn '.concat(i.elementClass," ").concat(i.emoticonsUnicodeClass,'" \n      title="').concat(i.title,'" data-cmd="').concat(i.dataCmd,'" data-param1="').concat(i.dataParam1,'">\n       ').concat(i.image," </button>")}),n}(e,a),"\n                        </div>")),"\n                      ").concat(function(e){return'\n        <div class="fr-icon-container fr-emoticon-container">\n            '.concat(function(e){var a="";return e.emoticons.forEach(function(e){var n=e.code.split("-").reduce(function(e,t){return e?e+"&zwj;&#x"+t.toLowerCase()+";":"&#x"+t.toLowerCase()+";"},""),r={image:e.code.toLowerCase(),compiledCode:e.uCode?e.uCode:n},i={dataParam1:e.code.toLowerCase(),dataParam2:r.compiledCode,title:t.language.translate(e.desc),image:t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'.concat(r.image,'.svg"/>'):"".concat(r.compiledCode),desc:t.language.translate(e.desc)};a+='<span class="fr-command fr-emoticon fr-icon" role="button" \n      data-cmd="insertEmoticon" data-param1="'.concat(i.dataParam1,'" \n      data-param2="').concat(i.dataParam2,'"  title="').concat(i.title,'" >\n      ').concat(i.image,'<span class="fr-sr-only">').concat(i.desc,"&nbsp;&nbsp;&nbsp;</span></span>")}),a}(e),"\n        </div>\n        ")}(r),"\n                      ").concat(t.opts.emoticonsUseImage?'<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow noopener noreferrer" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>':"");var e,a}return{_init:function(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),a=0;a<e.length;a++)e[a].className+=" fr-deletable"};n(),t.events.on("html.set",n),t.events.on("keydown",function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var r=t.selection.ranges(0),i=s();t.node.hasClass(i,"fr-emoticon-img")&&i&&(0===r.startOffset&&t.selection.element()===i?a(i).before(e.MARKERS+e.INVISIBLE_SPACE):a(i).after(e.INVISIBLE_SPACE+e.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(n){for(var r=t.el.querySelectorAll(".fr-emoticon"),i=0;i<r.length;i++)void 0!==r[i].textContent&&0===r[i].textContent.replace(/\u200B/gi,"").length&&a(r[i]).remove();if(!(n.which>=e.KEYCODE.ARROW_LEFT&&n.which<=e.KEYCODE.ARROW_DOWN)){var o=s();t.node.hasClass(o,"fr-emoticon-img")&&(a(o).append(e.MARKERS),t.selection.restore())}})},insert:function(n,r){var i=s(),o=t.selection.ranges(0);i?(0===o.startOffset&&t.selection.element()===i?a(i).before(e.MARKERS+e.INVISIBLE_SPACE):0<o.startOffset&&t.selection.element()===i&&o.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&a(i).after(e.INVISIBLE_SPACE+e.MARKERS),t.selection.restore(),t.html.insert('<span class="fr-emoticon fr-deletable'.concat(r?" fr-emoticon-img":"",'"').concat(r?' style="background: url('.concat(r,');"'):"",">").concat(r?"&nbsp;":n,"</span>&nbsp;").concat(e.MARKERS),!0)):t.html.insert('<span class="fr-emoticon fr-deletable'.concat(r?" fr-emoticon-img":"",'"').concat(r?' style="background: url('.concat(r,');"'):"",">").concat(r?"&nbsp;":n,"</span>&nbsp;"),!0)},setEmoticonCategory:function(e){r=n.filter(function(t){return t.id===e})[0],t.popups.get("emoticons").html(i+o())},showEmoticonsPopup:function(){var n=t.popups.get("emoticons");if(n||(n=function(){t.opts.toolbarInline&&0<t.opts.emoticonsButtons.length&&(i='<div class="fr-buttons fr-emoticons-buttons fr-tabs">'.concat(t.button.buildList(t.opts.emoticonsButtons),"</div>"));var n,r={buttons:i,custom_layer:o()},s=t.popups.create("emoticons",r);return n=s,t.events.on("popup.tab",function(r){var i=a(r.currentTarget);if(!t.popups.isVisible("emoticons")||!i.is("span, a"))return!0;var s,o,l,c=r.which;if(e.KEYCODE.TAB==c){if(i.is("span.fr-emoticon")&&r.shiftKey||i.is("a")&&!r.shiftKey){var d=n.find(".fr-buttons");s=!t.accessibility.focusToolbar(d,!!r.shiftKey)}if(!1!==s){var f=n.find("span.fr-emoticon:focus").first().concat(n.findVisible(" div.fr-tabs").first().concat(n.find("a")));i.is("span.fr-emoticon")&&(f=f.not("span.fr-emoticon:not(:focus)")),o=f.index(i),o=r.shiftKey?((o-1)%f.length+f.length)%f.length:(o+1)%f.length,l=f.get(o),t.events.disableBlur(),l.focus(),s=!1}}else if(e.KEYCODE.ARROW_UP==c||e.KEYCODE.ARROW_DOWN==c||e.KEYCODE.ARROW_LEFT==c||e.KEYCODE.ARROW_RIGHT==c){if(i.is("span.fr-emoticon")){var p=i.parent().find("span.fr-emoticon");o=p.index(i);var u=t.opts.emoticonsStep,h=Math.floor(p.length/u),g=o%u,m=Math.floor(o/u)*u+g,v=h*u;e.KEYCODE.ARROW_UP==c?m=((m-u)%v+v)%v:e.KEYCODE.ARROW_DOWN==c?m=(m+u)%v:e.KEYCODE.ARROW_LEFT==c?m=((m-1)%v+v)%v:e.KEYCODE.ARROW_RIGHT==c&&(m=(m+1)%v),l=a(p.get(m)),t.events.disableBlur(),l.focus(),s=!1}}else e.KEYCODE.ENTER==c&&(i.is("a")?i[0].click():t.button.exec(i),s=!1);return!1===s&&(r.preventDefault(),r.stopPropagation()),s},!0),s}()),!n.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var r=t.$tb.find('.fr-command[data-cmd="emoticons"]'),s=t.button.getPosition(r),l=s.left,c=s.top;t.popups.show("emoticons",l,c,r.outerHeight())}},back:function(){t.popups.hide("emoticons"),t.toolbar.showInline()}}},e.DefineIcon("emoticons",{NAME:"smile-o",FA5NAME:"smile",SVG_KEY:"smile"}),e.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.RegisterCommand("insertEmoticon",{callback:function(e,t,a){this.emoticons.insert(a,this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/".concat(t,".svg"):null),this.popups.hide("emoticons")}}),e.RegisterCommand("setEmoticonCategory",{undo:!1,focus:!1,callback:function(e,t){this.emoticons.setEmoticonCategory(t)}}),e.DefineIcon("emoticonsBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),Object.assign(e.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.PLUGINS.entities=function(e){var t,a,n=e.$;function r(e){var n=e.textContent;if(n.match(t)){for(var r="",i=0;i<n.length;i++)a[n[i]]?r+=a[n[i]]:r+=n[i];e.textContent=r}}function i(t){if(t&&0<=["STYLE","SCRIPT","svg","IFRAME"].indexOf(t.tagName))return!0;for(var a=e.node.contents(t),n=0;n<a.length;n++)a[n].nodeType===Node.TEXT_NODE?r(a[n]):i(a[n]);return t.nodeType===Node.TEXT_NODE&&r(t),!1}function s(t){return 0===t.length?"":e.clean.exec(t,i).replace(/\&amp;/g,"&")}return{_init:function(){e.opts.htmlSimpleAmpersand||(e.opts.entities=e.opts.entities+"&amp;");var r=n(document.createElement("div")).html(e.opts.entities).text(),i=e.opts.entities.split(";");a={},t="";for(var o=0;o<r.length;o++){var l=r.charAt(o);a[l]=i[o]+";",t+="\\"+l+(o<r.length-1?"|":"")}t=new RegExp("("+t+")","g"),e.events.on("html.get",s,!0)}}},Object.assign(e.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),Object.assign(e.DEFAULTS,{fileUpload:!0,fileUploadURL:null,fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.PLUGINS.file=function(t){var a,n=t.$,r="https://i.froala.com/upload",i=2,s=3,o=4,l=5,c=6,d={};function f(){var e=t.popups.get("file.insert");e||(e=T()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),u(t.language.translate("Uploading"),0)}function p(e){var a=t.popups.get("file.insert");a&&(a.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),a.find(".fr-file-progress-bar-layer").removeClass("fr-active"),a.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function u(e,a){var n=t.popups.get("file.insert");if(n){var r=n.find(".fr-file-progress-bar-layer");r.find("h3").text(e+(a?" "+a+"%":"")),r.removeClass("fr-error"),a?(r.find("div").removeClass("fr-indeterminate"),r.find("div > span").css("width",a+"%")):r.find("div").addClass("fr-indeterminate")}}function h(e,a,n){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(a=t.selection.text()),t.html.insert('<a href="'+e+'" target="_blank" id="fr-inserted-file" class="fr-file">'+a+"</a>");var r=t.$el.find("#fr-inserted-file");r.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),S(),t.events.trigger("file.inserted",[r,n])}function g(){v(o,this.response||this.responseText||this.responseXML)}function m(e){if(e.lengthComputable){var a=e.loaded/e.total*100|0;u(t.language.translate("Uploading"),a)}}function v(e,a){t.edit.on(),function(e){f();var a=t.popups.get("file.insert").find(".fr-file-progress-bar-layer");a.addClass("fr-error");var n=a.find("h3");n.text(e),t.events.disableBlur(),n.focus()}(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:d[e]},a])}function E(){t.edit.on(),p(!0)}function b(e){if(void 0!==e&&0<e.length){if(!1===t.events.trigger("file.beforeUpload",[e]))return!1;var a,d=e[0];if((null===t.opts.fileUploadURL||t.opts.fileUploadURL===r)&&!t.opts.fileUploadToS3)return function(e){var a=new FileReader;a.onload=function(){for(var n=a.result,r=atob(a.result.split(",")[1]),i=[],s=0;s<r.length;s++)i.push(r.charCodeAt(s));n=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:e.type})),t.file.insert(n,e.name,null)},f(),a.readAsDataURL(e)}(d),!1;if(d.size>t.opts.fileMaxSize)return v(l),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(d.type.replace(/file\//g,""))<0)return v(c),!1;if(t.drag_support.formdata&&(a=t.drag_support.formdata?new FormData:null),a){var p;if(!1!==t.opts.fileUploadToS3)for(p in a.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(d.name||"untitled")),a.append("success_action_status","201"),a.append("X-Requested-With","xhr"),a.append("Content-Type",d.type),t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(p)&&a.append(p,t.opts.fileUploadToS3.params[p]);for(p in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(p)&&a.append(p,t.opts.fileUploadParams[p]);a.append(t.opts.fileUploadParam,d);var u=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(u=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var b=t.core.getXHR(u,t.opts.fileUploadMethod);b.onload=function(){(function(e){var a=this.status,r=this.response,l=this.responseXML,c=this.responseText;try{if(t.opts.fileUploadToS3)if(201===a){var d=function(e){try{var a=n(e).find("Location").text(),r=n(e).find("Key").text();return!1===t.events.trigger("file.uploadedToS3",[a,r,e],!0)?(t.edit.on(),!1):a}catch(t){return v(o,e),!1}}(l);d&&h(d,e,r||l)}else v(o,r||l);else if(200<=a&&a<300){var f=function(e){try{if(!1===t.events.trigger("file.uploaded",[e],!0))return t.edit.on(),!1;var a=JSON.parse(e);return a.link?a:(v(i,e),!1)}catch(t){return v(o,e),!1}}(c);f&&h(f.link,e,r||c)}else v(s,r||c)}catch(e){v(o,r||c)}}).call(b,d.name)},b.onerror=g,b.upload.onprogress=m,b.onabort=E,f();var A=t.popups.get("file.insert");A&&(A.off("abortUpload"),A.on("abortUpload",function(){4!==b.readyState&&b.abort()})),b.send(a)}}}function A(){p()}function T(e){if(e)return t.popups.onHide("file.insert",A),!0;var a;t.opts.fileUpload||t.opts.fileInsertButtons.splice(t.opts.fileInsertButtons.indexOf("fileUpload"),1),a='<div class="fr-buttons fr-tabs">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var r="";t.opts.fileUpload&&(r='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="'+(0<=t.opts.fileAllowedTypes.indexOf("*")?"/":"")+t.opts.fileAllowedTypes.join(", ").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>');var i={buttons:a,upload_layer:r,progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},s=t.popups.create("file.insert",i);return function(e){t.events.$on(e,"dragover dragenter",".fr-file-upload-layer",function(){return n(this).addClass("fr-drop"),!1},!0),t.events.$on(e,"dragleave dragend",".fr-file-upload-layer",function(){return n(this).removeClass("fr-drop"),!1},!0),t.events.$on(e,"drop",".fr-file-upload-layer",function(a){a.preventDefault(),a.stopPropagation(),n(this).removeClass("fr-drop");var r=a.originalEvent.dataTransfer;r&&r.files&&(e.data("instance")||t).file.upload(r.files)},!0),t.helpers.isIOS()&&t.events.$on(e,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){n(this).trigger("click")}),t.events.$on(e,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){var a=e.data("instance")||t;a.events.disableBlur(),e.find("input:focus").blur(),a.events.enableBlur(),a.file.upload(this.files)}n(this).val("")},!0)}(s),s}function C(e){t.node.hasClass(e,"fr-file")}function R(a){var n=a.originalEvent.dataTransfer;if(n&&n.files&&n.files.length){var r=n.files[0];if(r&&void 0!==r.type){if(r.type.indexOf("image")<0){if(!t.opts.fileUpload)return a.preventDefault(),a.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(a.originalEvent),t.$el.find(".fr-marker").replaceWith(e.MARKERS),t.popups.hideAll();var i=t.popups.get("file.insert");return i||(i=T()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",a.originalEvent.pageX,a.originalEvent.pageY),f(),b(n.files),a.preventDefault(),a.stopPropagation(),!1}}else r.type.indexOf("image")<0&&(a.preventDefault(),a.stopPropagation())}}function S(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),r=[];for(e=0;e<n.length;e++)r.push(n[e].getAttribute("href"));if(a)for(e=0;e<a.length;e++)r.indexOf(a[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[a[e]]);a=n}return d[1]="File cannot be loaded from the passed link.",d[i]="No link in upload response.",d[s]="Error during file upload.",d[o]="Parsing response failed.",d[l]="File is too large.",d[c]="File file type is invalid.",d[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",{_init:function(){t.events.on("drop",R),t.events.$on(t.$win,"keydown",function(a){var n=a.which,r=t.popups.get("file.insert");r&&n===e.KEYCODE.ESC&&r.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")}),t.events.on("link.beforeRemove",C),t.$wp&&(S(),t.events.on("contentChanged",S)),T(!0)},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),a=t.popups.get("file.insert");if(a||(a=T()),p(),!a.hasClass("fr-active"))if(t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb),e.isVisible){var n=t.button.getPosition(e),r=n.left,i=n.top;t.popups.show("file.insert",r,i,e.outerHeight())}else t.position.forSelection(a),t.popups.show("file.insert")},upload:b,insert:h,back:function(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()},hideProgressBar:p}},e.DefineIcon("insertFile",{NAME:"file-o",FA5NAME:"file",SVG_KEY:"insertFile"}),e.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.DefineIcon("fileBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),Object.assign(e.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.PLUGINS.fontFamily=function(e){var t=e.$;function a(e){var a=e.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return t(this).grep(a,function(e){return 0<e.length})}function n(e,t){for(var a=0;a<e.length;a++)for(var n=0;n<t.length;n++)if(e[a].toLowerCase()===t[n].toLowerCase())return[a,n];return null}function r(){var r=a(t(e.selection.element()).css("font-family")),i=[];for(var s in e.opts.fontFamily)if(e.opts.fontFamily.hasOwnProperty(s)){var o=n(r,a(s));o&&i.push([s,o])}return 0===i.length?null:(i.sort(function(e,t){var a=e[1][0]-t[1][0];return 0===a?e[1][1]-t[1][1]:a}),i[0][0])}return{apply:function(t){e.format.applyStyle("font-family",t)},refreshOnShow:function(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+r()+'"]').addClass("fr-active").attr("aria-selected",!0)},refresh:function(a){if(e.opts.fontFamilySelection){var n=t(e.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");a.find("> span").text(e.opts.fontFamily[r()]||n[0]||e.language.translate(e.opts.fontFamilyDefaultSelection))}}}},e.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+a+'" style="font-family: '+a+'" title="'+t[a]+'">'+t[a]+"</a></li>");return e+"</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.DefineIcon("fontFamily",{NAME:"font",SVG_KEY:"fontFamily"}),Object.assign(e.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12",fontSizeUnit:"px"}),e.PLUGINS.fontSize=function(e){var t=e.$;return{apply:function(t){e.format.applyStyle("font-size",t)},refreshOnShow:function(a,n){var r=t(e.selection.element()).css("font-size");"pt"===e.opts.fontSizeUnit&&(r=Math.round(72*parseFloat(r,10)/96)+"pt"),n.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),n.find('.fr-command[data-param1="'+r+'"]').addClass("fr-active").attr("aria-selected",!0)},refresh:function(a){if(e.opts.fontSizeSelection){var n=e.helpers.getPX(t(e.selection.element()).css("font-size"));"pt"===e.opts.fontSizeUnit&&(n=Math.round(72*parseFloat(n,10)/96)+"pt"),a.find("> span").text(n)}}}},e.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,a=0;a<t.length;a++){var n=t[a];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+n+this.opts.fontSizeUnit+'" title="'+n+'">'+n+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.DefineIcon("fontSize",{NAME:"text-height",SVG_KEY:"fontSize"}),Object.assign(e.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),Object.assign(e.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),e.PLUGINS.forms=function(e){var t,a=e.$;function n(t){t.preventDefault(),e.selection.clear(),a(this).data("mousedown",!0)}function r(e){a(this).data("mousedown")&&(e.stopPropagation(),a(this).removeData("mousedown"),l(t=this)),e.preventDefault()}function i(){e.$el.find("input, textarea, button").removeData("mousedown")}function s(){a(this).removeData("mousedown")}function o(){return t||null}function l(n){var r=e.popups.get("forms.edit");r||(r=function(){var t="";0<e.opts.formEditButtons.length&&(t='<div class="fr-buttons">'.concat(e.button.buildList(e.opts.formEditButtons),"</div>"));var a={buttons:t},n=e.popups.create("forms.edit",a);return e.$wp&&e.events.$on(e.$wp,"scroll.link-edit",function(){o()&&e.popups.isVisible("forms.edit")&&l(o())}),n}());var i=a(t=n);e.popups.refresh("forms.edit"),e.popups.setContainer("forms.edit",e.$sc);var s=i.offset().left+i.outerWidth()/2,c=i.offset().top+i.outerHeight();e.popups.show("forms.edit",s,c,i.outerHeight())}function c(){var t=e.popups.get("forms.update"),n=o();if(n){var r=a(n);r.is("button")?t.find('input[type="text"][name="text"]').val(r.text()):t.find('input[type="text"][name="text"]').val(r.attr("placeholder"))}t.find('input[type="text"][name="text"]').trigger("change")}function d(){t=null}function f(t){if(t)return e.popups.onRefresh("forms.update",c),e.popups.onHide("forms.update",d),!0;var a="";1<=e.opts.formUpdateButtons.length&&(a='<div class="fr-buttons">'.concat(e.button.buildList(e.opts.formUpdateButtons),"</div>"));var n=0,r={buttons:a,text_layer:'<div class="fr-forms-text-layer fr-layer fr-active"> \n    <div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex=" '.concat(++n,' "></div>\n    <div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="').concat(2,'" type="button">').concat(e.language.translate("Update"),"</button></div></div>")};return e.popups.create("forms.update",r)}return{_init:function(){e.events.$on(e.$el,e._mousedown,"input, textarea, button",n),e.events.$on(e.$el,e._mouseup,"input, textarea, button",r),e.events.$on(e.$el,"touchmove","input, textarea, button",s),e.events.$on(e.$el,e._mouseup,i),e.events.$on(e.$win,e._mouseup,i),f(!0),e.events.$on(e.$el,"submit","form",function(e){return e.preventDefault(),!1})},updateInput:function(){var t=e.popups.get("forms.update"),n=o();if(n){var r=a(n),i=t.find('input[type="text"][name="text"]').val()||"";i.length&&(r.is("button")?r.text(i):r.attr("placeholder",i)),e.popups.hide("forms.update"),l(n)}},getInput:o,applyStyle:function(t,n,r){void 0===n&&(n=e.opts.formStyles),void 0===r&&(r=e.opts.formMultipleStyles);var i=o();if(!i)return!1;if(!r){var s=Object.keys(n);s.splice(s.indexOf(t),1),a(i).removeClass(s.join(" "))}a(i).toggleClass(t)},showUpdatePopup:function(){var t=o();if(t){var n=a(t),r=e.popups.get("forms.update");r||(r=f()),e.popups.isVisible("forms.update")||e.popups.refresh("forms.update"),e.popups.setContainer("forms.update",e.$sc);var i=n.offset().left+n.outerWidth()/2,s=n.offset().top+n.outerHeight();e.popups.show("forms.update",i,s,n.outerHeight())}},showEditPopup:l,back:function(){e.events.disableBlur(),e.selection.restore(),e.events.enableBlur();var t=o();t&&e.$wp&&("BUTTON"===t.tagName&&e.selection.restore(),l(t))}}},e.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.DefineIcon("inputStyle",{NAME:"magic",SVG_KEY:"inlineStyle"}),e.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'.concat(a,'">').concat(this.language.translate(t[a]),"</a></li>"));return e+"</ul>"},callback:function(e,t){var a=this.forms.getInput();a&&(this.forms.applyStyle(t),this.forms.showEditPopup(a))},refreshOnShow:function(e,t){var a=this.$,n=this.forms.getInput();if(n){var r=a(n);t.find(".fr-command").each(function(){var e=a(this).data("param1");a(this).toggleClass("fr-active",r.hasClass(e))})}}}),e.DefineIcon("inputEdit",{NAME:"edit"}),e.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),e.DefineIcon("inputBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),e.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.PLUGINS.fullscreen=function(e){var t,a,n,r,i=e.$;function s(){return e.$box.hasClass("fr-fullscreen")}function o(){if(e.helpers.isIOS()&&e.core.hasFocus())return e.$el.blur(),setTimeout(c,250),!1;t=e.helpers.scrollTop(),e.$box.toggleClass("fr-fullscreen"),i("body").first().toggleClass("fr-fullscreen"),e.helpers.isMobile()&&(e.$tb.data("parent",e.$tb.parent()),e.$box.prepend(e.$tb),e.$tb.data("sticky-dummy")&&e.$tb.after(e.$tb.data("sticky-dummy"))),a=e.opts.height,n=e.opts.heightMax,r=e.opts.zIndex,e.opts.height=e.o_win.innerHeight-(e.opts.toolbarInline?0:e.$tb.outerHeight()+(e.$second_tb?e.$second_tb.outerHeight():0)),e.opts.zIndex=2147483641,e.opts.heightMax=null,e.size.refresh(),e.opts.toolbarInline&&e.toolbar.showInline();for(var s=e.$box.parent();!s.first().is("body");)s.addClass("fr-fullscreen-wrapper"),s=s.parent();e.opts.toolbarContainer&&e.$box.prepend(e.$tb),e.events.trigger("charCounter.update"),e.events.trigger("codeView.update"),e.$win.trigger("scroll")}function l(){if(e.helpers.isIOS()&&e.core.hasFocus())return e.$el.blur(),setTimeout(c,250),!1;e.$box.toggleClass("fr-fullscreen"),i("body").first().toggleClass("fr-fullscreen"),e.$tb.data("parent")&&e.$tb.data("parent").prepend(e.$tb),e.$tb.data("sticky-dummy")&&e.$tb.after(e.$tb.data("sticky-dummy")),e.opts.height=a,e.opts.heightMax=n,e.opts.zIndex=r,e.size.refresh(),i(e.o_win).scrollTop(t),e.opts.toolbarInline&&e.toolbar.showInline(),e.events.trigger("charCounter.update"),e.opts.toolbarSticky&&e.opts.toolbarStickyOffset&&(e.opts.toolbarBottom?e.$tb.css("bottom",e.opts.toolbarStickyOffset).data("bottom",e.opts.toolbarStickyOffset):e.$tb.css("top",e.opts.toolbarStickyOffset).data("top",e.opts.toolbarStickyOffset));for(var s=e.$box.parent();!s.first().is("body");)s.removeClass("fr-fullscreen-wrapper"),s=s.parent();e.opts.toolbarContainer&&i(e.opts.toolbarContainer).append(e.$tb),i(e.o_win).trigger("scroll"),e.events.trigger("codeView.update")}function c(){s()?l():o(),d(e.$tb.find('.fr-command[data-cmd="fullscreen"]'));var t=e.$tb.find('.fr-command[data-cmd="moreText"]'),a=e.$tb.find('.fr-command[data-cmd="moreParagraph"]'),n=e.$tb.find('.fr-command[data-cmd="moreRich"]'),r=e.$tb.find('.fr-command[data-cmd="moreMisc"]');t.length&&e.refresh.moreText(t),a.length&&e.refresh.moreParagraph(a),n.length&&e.refresh.moreRich(n),r.length&&e.refresh.moreMisc(r)}function d(t){var a=s();t.toggleClass("fr-active",a).attr("aria-pressed",a),t.find("> *").not(".fr-sr-only").replaceWith(a?e.icon.create("fullscreenCompress"):e.icon.create("fullscreen"))}return{_init:function(){if(!e.$wp)return!1;e.events.$on(i(e.o_win),"resize",function(){s()&&(l(),o())}),e.events.on("toolbar.hide",function(){if(s()&&e.helpers.isMobile())return!1}),e.events.on("position.refresh",function(){if(e.helpers.isIOS())return!s()}),e.events.on("destroy",function(){s()&&l()},!0)},toggle:c,refresh:d,isActive:s}},e.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.DefineIcon("fullscreen",{NAME:"expand",SVG_KEY:"fullscreen"}),e.DefineIcon("fullscreenCompress",{NAME:"compress",SVG_KEY:"exitFullscreen"}),Object.assign(e.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert Link"},{val:"OSkeyP",desc:"Insert Image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select All"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Increase Indent"},{val:"OSkey[",desc:"Decrease Indent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),e.PLUGINS.help=function(e){var t,a=e.$,n="help";return{_init:function(){},show:function(){if(!t){var r="<h4>"+e.language.translate("Shortcuts")+"</h4>",i=function(){for(var t='<div class="fr-help-modal">',a=0;a<e.opts.helpSets.length;a++){var n=e.opts.helpSets[a],r="<table>";r+="<thead><tr><th>"+e.language.translate(n.title)+"</th></tr></thead>",r+="<tbody>";for(var i=0;i<n.commands.length;i++){var s=n.commands[i];r+="<tr>",r+="<td>"+e.language.translate(s.desc)+"</td>",r+="<td>"+s.val.replace("OSkey",e.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",r+="</tr>"}t+=r+="</tbody></table>"}return t+"</div>"}(),s=e.modals.create(n,r,i);t=s.$modal,e.events.$on(a(e.o_win),"resize",function(){e.modals.resize(n)})}e.modals.show(n),e.modals.resize(n)},hide:function(){e.modals.hide(n)}}},e.DefineIcon("help",{NAME:"question",SVG_KEY:"help"}),e.RegisterShortcut(e.KEYCODE.SLASH,"help",null,"/"),e.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),Object.assign(e.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(e.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:null,imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","webp"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5,imageAddNewLine:!1}),e.PLUGINS.image=function(a){var n,r,i,s,o,l,c=a.$,d="https://i.froala.com/upload",f=!1,p=1,u=2,h=3,g=4,m=5,v=6,E={};function b(){var e=a.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),n&&e.val(n.attr("src")),e.trigger("change")}function A(){var e=a.popups.get("image.edit");if(e||(e=F()),e){var t=Ae();Te()&&(t=t.find(".fr-img-wrap")),a.popups.setContainer("image.edit",a.$sc),a.popups.refresh("image.edit");var r=t.offset().left+t.outerWidth()/2,i=t.offset().top+t.outerHeight();n.hasClass("fr-uploading")?k():a.popups.show("image.edit",r,i,t.outerHeight(),!0)}}function T(){N()}function C(e){0<e.parents(".fr-img-caption").length&&(e=e.parents(".fr-img-caption").first()),he(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":ge(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function R(){for(var e,t="IMG"==a.el.tagName?[a.el]:a.el.querySelectorAll("img"),n=0;n<t.length;n++){var r=c(t[n]);!a.opts.htmlUntouched&&a.opts.useClasses?((a.opts.imageDefaultAlign||a.opts.imageDefaultDisplay)&&(0<(e=r).parents(".fr-img-caption").length&&(e=e.parents(".fr-img-caption").first()),e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+ge(e)[0]),e.addClass("fr-di"+me(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))),a.opts.imageTextNear||(0<r.parents(".fr-img-caption").length?r.parents(".fr-img-caption").first().removeClass("fr-dii").addClass("fr-dib"):r.removeClass("fr-dii").addClass("fr-dib"))):a.opts.htmlUntouched||a.opts.useClasses||(a.opts.imageDefaultAlign||a.opts.imageDefaultDisplay)&&C(r),a.opts.iframe&&r.on("load",a.size.syncIframe)}}function S(e){void 0===e&&(e=!0);var t,n=Array.prototype.slice.call(a.el.querySelectorAll("img")),r=[];for(t=0;t<n.length;t++)if(r.push(n[t].getAttribute("src")),c(n[t]).toggleClass("fr-draggable",a.opts.imageMove),""===n[t].getAttribute("class")&&n[t].removeAttribute("class"),""===n[t].getAttribute("style")&&n[t].removeAttribute("style"),n[t].parentNode&&n[t].parentNode.parentNode&&a.node.hasClass(n[t].parentNode.parentNode,"fr-img-caption")){var i=n[t].parentNode.parentNode;a.browser.mozilla||i.setAttribute("contenteditable",!1),i.setAttribute("draggable",!1),i.classList.add("fr-draggable");var s=n[t].nextSibling;s&&!a.browser.mozilla&&s.setAttribute("contenteditable",!0)}if(o)for(t=0;t<o.length;t++)r.indexOf(o[t].getAttribute("src"))<0&&a.events.trigger("image.removed",[c(o[t])]);if(o&&e){var l=[];for(t=0;t<o.length;t++)l.push(o[t].getAttribute("src"));for(t=0;t<n.length;t++)l.indexOf(n[t].getAttribute("src"))<0&&a.events.trigger("image.loaded",[c(n[t])])}o=n}function L(){if(r||function(){var t;if(a.shared.$image_resizer?(r=a.shared.$image_resizer,s=a.shared.$img_overlay,a.events.on("destroy",function(){c("body").first().append(r.removeClass("fr-active"))},!0)):(a.shared.$image_resizer=c(document.createElement("div")).attr("class","fr-image-resizer"),r=a.shared.$image_resizer,a.events.$on(r,"mousedown",function(e){e.stopPropagation()},!0),a.opts.imageResize&&(r.append(_("nw")+_("ne")+_("sw")+_("se")),a.shared.$img_overlay=c(document.createElement("div")).attr("class","fr-image-overlay"),s=a.shared.$img_overlay,t=r.get(0).ownerDocument,c(t).find("body").first().append(s))),a.events.on("shared.destroy",function(){r.html("").removeData().remove(),r=null,a.opts.imageResize&&(s.remove(),s=null)},!0),a.helpers.isMobile()||a.events.$on(c(a.o_win),"resize",function(){n&&!n.hasClass("fr-uploading")?de(!0):n&&(L(),ve(),k(!1))}),a.opts.imageResize){t=r.get(0).ownerDocument,a.events.$on(r,a._mousedown,".fr-handler",y),a.events.$on(c(t),a._mousemove,I),a.events.$on(c(t.defaultView||t.parentWindow),a._mouseup,O),a.events.$on(s,"mouseleave",O);var i=1,o=null,l=0;a.events.on("keydown",function(t){if(n){var r=-1!=navigator.userAgent.indexOf("Mac OS X")?t.metaKey:t.ctrlKey,s=t.which;(s!==o||200<t.timeStamp-l)&&(i=1),(s==e.KEYCODE.EQUALS||a.browser.mozilla&&s==e.KEYCODE.FF_EQUALS)&&r&&!t.altKey?i=ee.call(this,t,1,1,i):(s==e.KEYCODE.HYPHEN||a.browser.mozilla&&s==e.KEYCODE.FF_HYPHEN)&&r&&!t.altKey?i=ee.call(this,t,2,-1,i):a.keys.ctrlKey(t)||s!=e.KEYCODE.ENTER||(n.before("<br>"),B(n)),o=s,l=t.timeStamp}},!0),a.events.on("keyup",function(){i=1})}}(),!n)return!1;var t=a.$wp||a.$sc;t.append(r),r.data("instance",a);var i=t.scrollTop()-("static"!=t.css("position")?t.offset().top:0),o=t.scrollLeft()-("static"!=t.css("position")?t.offset().left:0);o-=a.helpers.getPX(t.css("border-left-width")),i-=a.helpers.getPX(t.css("border-top-width")),a.$el.is("img")&&a.$sc.is("body")&&(o=i=0);var l=Ae();Te()&&(l=l.find(".fr-img-wrap"));var d=0,f=0;a.opts.iframe&&(d=a.helpers.getPX(a.$wp.find(".fr-iframe").css("padding-top")),f=a.helpers.getPX(a.$wp.find(".fr-iframe").css("padding-left"))),r.css("top",(a.opts.iframe?l.offset().top+d:l.offset().top+i)-1).css("left",(a.opts.iframe?l.offset().left+f:l.offset().left+o)-1).css("width",l.get(0).getBoundingClientRect().width).css("height",l.get(0).getBoundingClientRect().height).addClass("fr-active")}function _(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function w(e){Te()?n.parents(".fr-img-caption").css("width",e):n.css("width",e)}function y(e){if(!a.core.sameInstance(r))return!0;if(e.preventDefault(),e.stopPropagation(),a.$el.find("img.fr-error").left)return!1;a.undo.canDo()||a.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var o=a.$oel.get(0).ownerDocument,l=o.defaultView||o.parentWindow,d=!1;try{d=l.location!=l.parent.location&&!(l.$&&l.$.FE)}catch(e){}d&&l.frameElement&&(t+=a.helpers.getPX(c(l.frameElement).offset().left)+l.frameElement.clientLeft)}(i=c(this)).data("start-x",t),i.data("start-width",n.width()),i.data("start-height",n.height());var f=n.width();if(a.opts.imageResizeWithPercent){var p=n.parentsUntil(a.$el,a.html.blockTagsQuery()).get(0)||a.el;f=(f/c(p).outerWidth()*100).toFixed(2)+"%"}w(f),s.show(),a.popups.hideAll(),ue()}function I(e){if(!a.core.sameInstance(r))return!0;var t;if(i&&n){if(e.preventDefault(),a.$el.find("img.fr-error").left)return!1;var s=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!s)return!1;var o=s-i.data("start-x"),l=i.data("start-width");if((i.hasClass("fr-hnw")||i.hasClass("fr-hsw"))&&(o=0-o),a.opts.imageResizeWithPercent){var d=n.parentsUntil(a.$el,a.html.blockTagsQuery()).get(0)||a.el;l=((l+o)/c(d).outerWidth()*100).toFixed(2),a.opts.imageRoundPercent&&(l=Math.round(l)),w(l+"%"),(t=Te()?(a.helpers.getPX(n.parents(".fr-img-caption").css("width"))/c(d).outerWidth()*100).toFixed(2):(a.helpers.getPX(n.css("width"))/c(d).outerWidth()*100).toFixed(2))===l||a.opts.imageRoundPercent||w(t+"%"),n.css("height","").removeAttr("height")}else l+o>=a.opts.imageMinWidth&&(w(l+o),t=Te()?a.helpers.getPX(n.parents(".fr-img-caption").css("width")):a.helpers.getPX(n.css("width"))),t!==l+o&&w(t),((n.attr("style")||"").match(/(^height:)|(; *height:)/)||n.attr("height"))&&(n.css("height",i.data("start-height")*n.width()/i.data("start-width")),n.removeAttr("height"));L(),a.events.trigger("image.resize",[be()])}}function O(e){if(!a.core.sameInstance(r))return!0;if(i&&n){if(e&&e.stopPropagation(),a.$el.find("img.fr-error").left)return!1;i=null,s.hide(),L(),A(),a.undo.saveStep(),a.events.trigger("image.resizeEnd",[be()])}}function x(e,t,r){a.edit.on(),n&&n.addClass("fr-error"),E[e]?M(E[e]):M(a.language.translate("Something went wrong. Please try again.")),!n&&r&&te(r),a.events.trigger("image.error",[{code:e,message:E[e]},t,r])}function F(e){if(e)return a.$wp&&a.events.$on(a.$wp,"scroll.image-edit",function(){n&&a.popups.isVisible("image.edit")&&(a.events.disableBlur(),A())}),!0;var t="";if(0<a.opts.imageEditButtons.length){var r={buttons:t+='<div class="fr-buttons"> \n        '.concat(a.button.buildList(a.opts.imageEditButtons),"\n        </div>")};return a.popups.create("image.edit",r)}return!1}function k(e){var t=a.popups.get("image.insert");if(t||(t=z()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),n){var r=Ae();a.popups.setContainer("image.insert",a.$sc);var i=r.offset().left,s=r.offset().top+r.height();a.popups.show("image.insert",i,s,r.outerHeight())}void 0===e&&D(a.language.translate("Uploading"),0)}function N(e){var t=a.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||a.$el.find("img.fr-error").length)){if(a.events.focus(),a.$el.find("img.fr-error").length&&(a.$el.find("img.fr-error").remove(),a.undo.saveStep(),a.undo.run(),a.undo.dropRedo()),!a.$wp&&n){var r=n;de(!0),a.selection.setAfter(r.get(0)),a.selection.restore()}a.popups.hide("image.insert")}}function D(e,t){var n=a.popups.get("image.insert");if(n){var r=n.find(".fr-image-progress-bar-layer");r.find("h3").text(e+(t?" "+t+"%":"")),r.removeClass("fr-error"),t?(r.find("div").removeClass("fr-indeterminate"),r.find("div > span").css("width",t+"%")):r.find("div").addClass("fr-indeterminate")}}function M(e){k();var t=a.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var n=t.find("h3");n.text(e),a.events.disableBlur(),n.focus()}function B(e){ce.call(e.get(0))}function P(){var e=c(this);a.popups.hide("image.insert"),e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),B(e),a.events.trigger("image.loaded",[e])}function U(e,t,n,r,i){a.edit.off(),D(a.language.translate("Loading image")),t&&(e=a.helpers.sanitizeURL(e));var s=new Image;s.onload=function(){var t,s;if(r){a.undo.canDo()||r.hasClass("fr-uploading")||a.undo.saveStep();var o=r.data("fr-old-src");r.data("fr-image-pasted")&&(o=null),a.$wp?((t=r.clone().removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),o&&r.attr("src",o),r.replaceWith(t)):t=r;for(var l=t.get(0).attributes,c=0;c<l.length;c++){var d=l[c];0===d.nodeName.indexOf("data-")&&t.removeAttr(d.nodeName)}if(void 0!==n)for(s in n)n.hasOwnProperty(s)&&"link"!=s&&t.attr("data-"+s,n[s]);t.on("load",P),t.attr("src",e),a.edit.on(),S(!1),a.undo.saveStep(),a.events.disableBlur(),a.$el.blur(),a.events.trigger(o?"image.replaced":"image.inserted",[t,i])}else t=H(e,n,P),S(!1),a.undo.saveStep(),a.events.disableBlur(),a.$el.blur(),a.events.trigger("image.inserted",[t,i])},s.onerror=function(){x(p)},k(a.language.translate("Loading image")),s.src=e}function W(){x(g,this.response||this.responseText||this.responseXML)}function K(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;D(a.language.translate("Uploading"),t)}}function H(e,t,n){var r,i=c(document.createElement("img")).attr("src",e);if(t&&void 0!==t)for(r in t)t.hasOwnProperty(r)&&"link"!=r&&(t[r],i.attr("data-str"+r,t[r]));var s=a.opts.imageDefaultWidth;s&&"auto"!=s&&(s=a.opts.imageResizeWithPercent?"100%":s+"px"),i.attr("style",s?"width: "+s+";":""),he(i,a.opts.imageDefaultDisplay,a.opts.imageDefaultAlign),i.on("load",n),i.on("error",n),a.edit.on(),a.events.focus(!0),a.selection.restore(),a.undo.saveStep(),a.opts.imageSplitHTML?a.markers.split():a.markers.insert(),a.html.wrap();var o=a.$el.find(".fr-marker");return o.length?(o.parent().is("hr")&&o.parent().after(o),a.node.isLastSibling(o)&&o.parent().hasClass("fr-deletable")&&o.insertAfter(o.parent()),o.replaceWith(i)):a.$el.append(i),a.selection.clear(),i}function $(){a.edit.on(),N(!0)}function G(e,t){if(void 0!==e&&0<e.length){if(!1===a.events.trigger("image.beforeUpload",[e,t]))return!1;var r,i=e[0];if((null===a.opts.imageUploadURL||a.opts.imageUploadURL==d)&&!a.opts.imageUploadToS3)return function(e,t){var n=new FileReader;n.onload=function(){var r=n.result;if(n.result.indexOf("svg+xml")<0){for(var i=atob(n.result.split(",")[1]),s=[],o=0;o<i.length;o++)s.push(i.charCodeAt(o));r=window.URL.createObjectURL(new Blob([new Uint8Array(s)],{type:e.type})),a.image.insert(r,!1,null,t)}},k(),n.readAsDataURL(e)}(i,t||n),!1;if(i.name||(i.name=(new Date).getTime()+"."+(i.type||"image/jpeg").replace(/image\//g,"")),i.size>a.opts.imageMaxSize)return x(m),!1;if(a.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))<0)return x(v),!1;if(a.drag_support.formdata&&(r=a.drag_support.formdata?new FormData:null),r){var s;if(!1!==a.opts.imageUploadToS3)for(s in r.append("key",a.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",i.type),a.opts.imageUploadToS3.params)a.opts.imageUploadToS3.params.hasOwnProperty(s)&&r.append(s,a.opts.imageUploadToS3.params[s]);for(s in a.opts.imageUploadParams)a.opts.imageUploadParams.hasOwnProperty(s)&&r.append(s,a.opts.imageUploadParams[s]);r.append(a.opts.imageUploadParam,i,i.name);var o=a.opts.imageUploadURL;a.opts.imageUploadToS3&&(o=a.opts.imageUploadToS3.uploadURL?a.opts.imageUploadToS3.uploadURL:"https://"+a.opts.imageUploadToS3.region+".amazonaws.com/"+a.opts.imageUploadToS3.bucket),function(e,t,n,r){function i(){var n=c(this);n.off("load"),n.addClass("fr-uploading"),n.next().is("br")&&n.next().remove(),a.placeholder.refresh(),B(n),L(),k(),a.edit.off(),e.onload=function(){(function(e){D(a.language.translate("Loading image"));var t=this.status,n=this.response,r=this.responseXML,i=this.responseText;try{if(a.opts.imageUploadToS3)if(201==t){var s=function(e){try{var t=c(e).find("Location").text(),n=c(e).find("Key").text();return!1===a.events.trigger("image.uploadedToS3",[t,n,e],!0)?(a.edit.on(),!1):t}catch(t){return x(g,e),!1}}(r);s&&U(s,!1,[],e,n||r)}else x(g,n||r,e);else if(200<=t&&t<300){var o=function(e){try{if(!1===a.events.trigger("image.uploaded",[e],!0))return a.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(x(u,e),!1)}catch(t){return x(g,e),!1}}(i);o&&U(o.link,!1,o,e,n||i)}else x(h,n||i,e)}catch(t){x(g,n||i,e)}}).call(e,n)},e.onerror=W,e.upload.onprogress=K,e.onabort=$,c(n.off("abortUpload")).on("abortUpload",function(){4!=e.readyState&&(e.abort(),r?(r.attr("src",r.data("fr-old-src")),r.removeClass("fr-uploading")):n.remove(),de(!0))}),e.send(t)}var s=new FileReader;s.onload=function(){var e=s.result;if(s.result.indexOf("svg+xml")<0){for(var t=atob(s.result.split(",")[1]),n=[],o=0;o<t.length;o++)n.push(t.charCodeAt(o));e=window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:"image/jpeg"}))}r?(r.on("load",i),r.on("error",function(){i(),c(this).off("error")}),a.edit.on(),a.undo.saveStep(),r.data("fr-old-src",r.attr("src")),r.attr("src",e)):H(e,null,i)},s.readAsDataURL(n)}(a.core.getXHR(o,a.opts.imageUploadMethod),r,i,t||n)}}}function Y(e){if(e.is("img")&&0<e.parents(".fr-img-caption").length)return e.parents(".fr-img-caption")}function V(t){var n=t.originalEvent.dataTransfer;if(n&&n.files&&n.files.length){var r=n.files[0];if(r&&r.type&&-1!==r.type.indexOf("image")&&0<=a.opts.imageAllowedTypes.indexOf(r.type.replace(/image\//g,""))){if(!a.opts.imageUpload)return t.preventDefault(),t.stopPropagation(),!1;a.markers.remove(),a.markers.insertAtPoint(t.originalEvent),a.$el.find(".fr-marker").replaceWith(e.MARKERS),0===a.$el.find(".fr-marker").length&&a.selection.setAtEnd(a.el),a.popups.hideAll();var i=a.popups.get("image.insert");i||(i=z()),a.popups.setContainer("image.insert",a.$sc);var s=t.originalEvent.pageX,o=t.originalEvent.pageY;if(a.opts.iframe){var l=a.helpers.getPX(a.$wp.find(".fr-iframe").css("padding-top")),c=a.helpers.getPX(a.$wp.find(".fr-iframe").css("padding-left"));o+=a.$iframe.offset().top+l,s+=a.$iframe.offset().left+c}return a.popups.show("image.insert",s,o),k(),0<=a.opts.imageAllowedTypes.indexOf(r.type.replace(/image\//g,""))?(de(!0),G(n.files)):x(v),t.preventDefault(),t.stopPropagation(),!1}}}function z(e){if(e)return a.popups.onRefresh("image.insert",b),a.popups.onHide("image.insert",T),!0;var t,r,i="";a.opts.imageUpload||-1===a.opts.imageInsertButtons.indexOf("imageUpload")||a.opts.imageInsertButtons.splice(a.opts.imageInsertButtons.indexOf("imageUpload"),1);var s=a.button.buildList(a.opts.imageInsertButtons);""!==s&&(i='<div class="fr-buttons fr-tabs">'+s+"</div>");var o=a.opts.imageInsertButtons.indexOf("imageUpload"),l=a.opts.imageInsertButtons.indexOf("imageByURL"),d="";0<=o&&(t=" fr-active",0<=l&&l<o&&(t=""),d='<div class="fr-image-upload-layer'+t+' fr-layer" id="fr-image-upload-layer-'+a.id+'"><strong>'+a.language.translate("Drop image")+"</strong><br>("+a.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+a.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+a.id+'" role="button"></div></div>');var f="";0<=l&&(t=" fr-active",0<=o&&o<l&&(t=""),f='<div class="fr-image-by-url-layer'+t+' fr-layer" id="fr-image-by-url-layer-'+a.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+a.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+a.language.translate("Insert")+"</button></div></div>");var p={buttons:i,upload_layer:d,by_url_layer:f,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'};return 1<=a.opts.imageInsertButtons.length&&(r=a.popups.create("image.insert",p)),a.$wp&&a.events.$on(a.$wp,"scroll",function(){n&&a.popups.isVisible("image.insert")&&ve()}),function(e){a.events.$on(e,"dragover dragenter",".fr-image-upload-layer",function(){return c(this).addClass("fr-drop"),!1},!0),a.events.$on(e,"dragleave dragend",".fr-image-upload-layer",function(){return c(this).removeClass("fr-drop"),!1},!0),a.events.$on(e,"drop",".fr-image-upload-layer",function(t){t.preventDefault(),t.stopPropagation(),c(this).removeClass("fr-drop");var n=t.originalEvent.dataTransfer;if(n&&n.files){var r=e.data("instance")||a;r.events.disableBlur(),r.image.upload(n.files),r.events.enableBlur()}},!0),a.helpers.isIOS()&&a.events.$on(e,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){c(this).trigger("click")},!0),a.events.$on(e,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var t=e.data("instance")||a;t.events.disableBlur(),e.find("input:focus").blur(),t.events.enableBlur(),t.image.upload(this.files,n)}c(this).val("")},!0)}(r),r}function j(){n&&a.popups.get("image.alt").find("input").val(n.attr("alt")||"").trigger("change")}function q(){var e=a.popups.get("image.alt");e||(e=X()),N(),a.popups.refresh("image.alt"),a.popups.setContainer("image.alt",a.$sc);var t=Ae();Te()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,r=t.offset().top+t.outerHeight();a.popups.show("image.alt",n,r,t.outerHeight(),!0)}function X(e){if(e)return a.popups.onRefresh("image.alt",j),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'+a.button.buildList(a.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+a.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+a.id+'" type="text" placeholder="'+a.language.translate("Alternative Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+a.language.translate("Update")+"</button></div></div>"},r=a.popups.create("image.alt",t);return a.$wp&&a.events.$on(a.$wp,"scroll.image-alt",function(){n&&a.popups.isVisible("image.alt")&&q()}),r}function Q(){var e=a.popups.get("image.size");if(n)if(Te()){var t=n.parent();t.get(0).style.width||(t=n.parent().parent()),e.find('input[name="width"]').val(t.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(t.get(0).style.height).trigger("change")}else e.find('input[name="width"]').val(n.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height).trigger("change")}function J(){var e=a.popups.get("image.size");e||(e=Z()),N(),a.popups.refresh("image.size"),a.popups.setContainer("image.size",a.$sc);var t=Ae();Te()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,r=t.offset().top+t.outerHeight();a.popups.show("image.size",n,r,t.outerHeight(),!0)}function Z(e){if(e)return a.popups.onRefresh("image.size",Q),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'+a.button.buildList(a.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+a.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+a.id+'" type="text" name="width" placeholder="'+a.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+a.id+'" type="text" name="height" placeholder="'+a.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+a.language.translate("Update")+"</button></div></div>"},r=a.popups.create("image.size",t);return a.$wp&&a.events.$on(a.$wp,"scroll.image-size",function(){n&&a.popups.isVisible("image.size")&&J()}),r}function ee(e,t,a,n){return e.pageX=t,y.call(this,e),e.pageX=e.pageX+a*Math.floor(Math.pow(1.1,n)),I.call(this,e),O.call(this,e),++n}function te(t){(t=t||Ae())&&!1!==a.events.trigger("image.beforeRemove",[t])&&(a.popups.hideAll(),Ee(),de(!0),a.undo.canDo()||a.undo.saveStep(),t.get(0)==a.el?t.removeAttr("src"):(t.get(0).parentNode&&"A"==t.get(0).parentNode.tagName?(a.selection.setBefore(t.get(0).parentNode)||a.selection.setAfter(t.get(0).parentNode)||t.parent().after(e.MARKERS),c(t.get(0).parentNode).remove()):(a.selection.setBefore(t.get(0))||a.selection.setAfter(t.get(0))||t.after(e.MARKERS),t.remove()),a.html.fillEmptyBlocks(),a.selection.restore()),a.undo.saveStep())}function ae(t){var r=t.which;if(n&&(r==e.KEYCODE.BACKSPACE||r==e.KEYCODE.DELETE))return t.preventDefault(),t.stopPropagation(),te(),!1;if(n&&r==e.KEYCODE.ESC){var i=n;return de(!0),a.selection.setAfter(i.get(0)),a.selection.restore(),t.preventDefault(),!1}if(!n||r!=e.KEYCODE.ARROW_LEFT&&r!=e.KEYCODE.ARROW_RIGHT)return n&&r===e.KEYCODE.TAB?(t.preventDefault(),t.stopPropagation(),de(!0),!1):n&&r!=e.KEYCODE.F10&&!a.keys.isBrowserAction(t)?(t.preventDefault(),t.stopPropagation(),!1):void 0;var s=n.get(0);return de(!0),r==e.KEYCODE.ARROW_LEFT?a.selection.setBefore(s):a.selection.setAfter(s),a.selection.restore(),t.preventDefault(),!1}function ne(e){if(e&&"IMG"==e.tagName){if(a.node.hasClass(e,"fr-uploading")||a.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):a.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable"),e.parentNode&&e.parentNode.parentNode&&a.node.hasClass(e.parentNode.parentNode,"fr-img-caption")){var t=e.parentNode.parentNode;t.removeAttribute("contenteditable"),t.removeAttribute("draggable"),t.classList.remove("fr-draggable");var n=e.nextSibling;n&&n.removeAttribute("contenteditable")}}else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var r=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<r.length;i++)ne(r[i])}function re(e){if(!1===a.events.trigger("image.beforePasteUpload",[e]))return!1;n=c(e),L(),A(),ve(),k(),n.on("load",function(){L(),c(a.popups.get("image.insert").get(0)).find("div.fr-active.fr-error").length<1&&k(),c(this).off("load")});for(var t=c(e).attr("src").split(","),r=atob(t[1]),i=[],s=0;s<r.length;s++)i.push(r.charCodeAt(s));G([new Blob([new Uint8Array(i)],{type:t[0].replace(/data\:/g,"").replace(/;base64/g,"")})],n)}function ie(){a.opts.imagePaste?a.$el.find("img[data-fr-image-pasted]").each(function(e,t){if(a.opts.imagePasteProcess){var n=a.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=a.opts.imageResizeWithPercent?"%":"px"),c(t).css("width",n).removeClass("fr-dii fr-dib fr-fir fr-fil"),he(c(t),a.opts.imageDefaultDisplay,a.opts.imageDefaultAlign)}if(0===t.src.indexOf("data:"))re(t);else if(0===t.src.indexOf("blob:")||0===t.src.indexOf("http")&&a.opts.imageUploadRemoteUrls&&a.opts.imageCORSProxy){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e,n=a.o_doc.createElement("CANVAS"),r=n.getContext("2d");n.height=this.naturalHeight,n.width=this.naturalWidth,r.drawImage(this,0,0),setTimeout(function(){re(t)},0),e=2e3<this.naturalWidth||1500<this.naturalHeight?"jpeg":"png",t.src=n.toDataURL("image/"+e)},r.src=(0===t.src.indexOf("blob:")?"":a.opts.imageCORSProxy+"/")+t.src}else 0!==t.src.indexOf("http")||0===t.src.indexOf("https://mail.google.com/mail")?(a.selection.save(),c(t).remove(),a.selection.restore()):c(t).removeAttr("data-fr-image-pasted")}):a.$el.find("img[data-fr-image-pasted]").remove()}function se(e){var t=e.target.result,n=a.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=a.opts.imageResizeWithPercent?"%":"px"),a.undo.saveStep(),a.html.insert('<img data-fr-image-pasted="true" src="'+t+'"'+(n?' style="width: '+n+';"':"")+">");var r=a.$el.find('img[data-fr-image-pasted="true"]');r&&he(r,a.opts.imageDefaultDisplay,a.opts.imageDefaultAlign),a.events.trigger("paste.after")}function oe(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.types&&-1!=[].indexOf.call(e.clipboardData.types,"text/rtf")||e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var a=0;a<e.clipboardData.items.length&&!(t=e.clipboardData.items[a].getAsFile());a++);if(t)return function(e){var t=new FileReader;t.onload=se,t.readAsDataURL(e)}(t),!1}}function le(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ce(t){if("false"==c(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(t&&"touchend"==t.type&&l)return!0;if(t&&a.edit.isDisabled())return t.stopPropagation(),t.preventDefault(),!1;for(var r=0;r<e.INSTANCES.length;r++)e.INSTANCES[r]!=a&&e.INSTANCES[r].events.trigger("image.hideResizer");a.toolbar.disable(),t&&(t.stopPropagation(),t.preventDefault()),a.helpers.isMobile()&&(a.events.disableBlur(),a.$el.blur(),a.events.enableBlur()),a.opts.iframe&&a.size.syncIframe(),n=c(this),Ee(),L(),A(),a.browser.msie?(a.popups.areVisible()&&a.events.disableBlur(),a.win.getSelection&&(a.win.getSelection().removeAllRanges(),a.win.getSelection().addRange(a.doc.createRange()))):a.selection.clear(),a.helpers.isIOS()&&(a.events.disableBlur(),a.$el.blur()),a.button.bulkRefresh(),a.events.trigger("video.hideResizer")}function de(e){n&&(fe||!0===e)&&(a.toolbar.enable(),r.removeClass("fr-active"),a.popups.hide("image.edit"),n=null,ue(),i=null,s&&s.hide())}E[p]="Image cannot be loaded from the passed link.",E[u]="No link in upload response.",E[h]="Error during file upload.",E[g]="Parsing response failed.",E[m]="File is too large.",E[v]="Image file type is invalid.",E[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var fe=!(E[8]="Image file is corrupted.");function pe(){fe=!0}function ue(){fe=!1}function he(e,t,n){!a.opts.htmlUntouched&&a.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),n&&e.addClass("fr-fi"+n[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:a.opts.imageDefaultMargin}),"center"==n?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*a.opts.imageDefaultMargin+"px)",textAlign:"center"}):"left"==n?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - "+a.opts.imageDefaultMargin+"px)",textAlign:"left"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - "+a.opts.imageDefaultMargin+"px)",textAlign:"right"})):"block"==t&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:a.opts.imageDefaultMargin+"px auto",textAlign:"center"}),"left"==n?e.css({marginLeft:0,textAlign:"left"}):"right"==n&&e.css({marginRight:0,textAlign:"right"}))}function ge(e){if(void 0===e&&(e=Ae()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function me(e){void 0===e&&(e=Ae());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ve(){var e=a.popups.get("image.insert");e||(e=z()),a.popups.isVisible("image.insert")||(N(),a.popups.refresh("image.insert"),a.popups.setContainer("image.insert",a.$sc));var t=Ae();Te()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,r=t.offset().top+t.outerHeight();a.popups.show("image.insert",n,r,t.outerHeight(!0),!0)}function Ee(){if(n){a.events.disableBlur(),a.selection.clear();var e=a.doc.createRange();e.selectNode(n.get(0)),a.browser.msie&&e.collapse(!0),a.selection.get().addRange(e),a.events.enableBlur()}}function be(){return n}function Ae(){return Te()?n.parents(".fr-img-caption").first():n}function Te(){return!!n&&0<n.parents(".fr-img-caption").length}return{_init:function(){var t;a.events.$on(a.$el,a._mousedown,"IMG"==a.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==c(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;a.helpers.isMobile()||a.selection.clear(),f=!0,a.popups.areVisible()&&a.events.disableBlur(),a.browser.msie&&(a.events.disableBlur(),a.$el.attr("contenteditable",!1)),a.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),a.events.$on(a.$el,a._mousedown,".fr-img-caption .fr-inner",function(e){a.core.hasFocus()||a.events.focus(),e.stopPropagation()}),a.events.$on(a.$el,"paste",".fr-img-caption .fr-inner",function(e){a.toolbar.hide(),e.stopPropagation()}),a.events.$on(a.$el,a._mouseup,"IMG"==a.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==c(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;f&&(f=!1,e.stopPropagation(),a.browser.msie&&(a.$el.attr("contenteditable",!0),a.events.enableBlur()))}),a.events.on("keyup",function(e){if(e.shiftKey&&""===a.selection.text().replace(/\n/g,"")&&a.keys.isArrow(e.which)){var t=a.selection.element(),n=a.selection.endElement();t&&"IMG"==t.tagName?B(c(t)):n&&"IMG"==n.tagName&&B(c(n))}},!0),a.events.on("drop",V),a.events.on("element.beforeDrop",Y),a.events.on("mousedown window.mousedown",pe),a.events.on("window.touchmove",ue),a.events.on("mouseup window.mouseup",function(){if(n)return de(),!1;ue()}),a.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&de()}),a.events.on("image.resizeEnd",function(){a.opts.iframe&&a.size.syncIframe()}),a.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){de(!(f=!1))}),a.events.on("modals.hide",function(){n&&(Ee(),a.selection.clear())}),a.events.on("image.resizeEnd",function(){a.win.getSelection&&B(n)}),a.opts.imageAddNewLine&&a.events.on("image.inserted",function(t){var n=t.get(0);for(n.nextSibling&&"BR"===n.nextSibling.tagName&&(n=n.nextSibling);n&&!a.node.isElement(n);)n=a.node.isLastSibling(n)?n.parentNode:null;a.node.isElement(n)&&(a.opts.enter===e.ENTER_BR?t.after("<br>"):c(a.node.blockParent(t.get(0))).after("<"+a.html.defaultTag()+"><br></"+a.html.defaultTag()+">"))}),"IMG"==a.el.tagName&&a.$el.addClass("fr-view"),a.events.$on(a.$el,a.helpers.isMobile()&&!a.helpers.isWindowsPhone()?"touchend":"click","IMG"==a.el.tagName?null:'img:not([contenteditable="false"])',ce),a.helpers.isMobile()&&(a.events.$on(a.$el,"touchstart","IMG"==a.el.tagName?null:'img:not([contenteditable="false"])',function(){l=!1}),a.events.$on(a.$el,"touchmove",function(){l=!0})),a.$wp?(a.events.on("window.keydown keydown",ae,!0),a.events.on("keyup",function(t){if(n&&t.which==e.KEYCODE.ENTER)return!1},!0),a.events.$on(a.$el,"keydown",function(){var t=a.selection.element();(t.nodeType===Node.TEXT_NODE||"BR"==t.tagName&&a.node.isLastSibling(t))&&(t=t.parentNode),a.node.hasClass(t,"fr-inner")||(a.node.hasClass(t,"fr-img-caption")||(t=c(t).parents(".fr-img-caption").get(0)),a.node.hasClass(t,"fr-img-caption")&&(c(t).after(e.INVISIBLE_SPACE+e.MARKERS),a.selection.restore()))})):a.events.$on(a.$win,"keydown",ae),a.events.on("toolbar.esc",function(){if(n){if(a.$wp)a.events.disableBlur(),a.events.focus();else{var e=n;de(!0),a.selection.setAfter(e.get(0)),a.selection.restore()}return!1}},!0),a.events.on("toolbar.focusEditor",function(){if(n)return!1},!0),a.events.on("window.cut window.copy",function(t){if(n&&a.popups.isVisible("image.edit")&&!a.popups.get("image.edit").find(":focus").length){var r=Ae();Te()?(r.before(e.START_MARKER),r.after(e.END_MARKER),a.selection.restore(),a.paste.saveCopiedText(r.get(0).outerHTML,r.text())):(Ee(),a.paste.saveCopiedText(n.get(0).outerHTML,n.attr("alt"))),"copy"==t.type?setTimeout(function(){B(n)}):(de(!0),a.undo.saveStep(),setTimeout(function(){a.undo.saveStep()},0))}},!0),a.browser.msie&&a.events.on("keydown",function(t){if(!a.selection.isCollapsed()||!n)return!0;var r=t.which;r==e.KEYCODE.C&&a.keys.ctrlKey(t)?a.events.trigger("window.copy"):r==e.KEYCODE.X&&a.keys.ctrlKey(t)&&a.events.trigger("window.cut")}),a.events.$on(c(a.o_win),"keydown",function(t){var a=t.which;if(n&&a==e.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),a.events.$on(a.$win,"keydown",function(t){var a=t.which;n&&n.hasClass("fr-uploading")&&a==e.KEYCODE.ESC&&n.trigger("abortUpload")}),a.events.on("destroy",function(){n&&n.hasClass("fr-uploading")&&n.trigger("abortUpload")}),a.events.on("paste.before",oe),a.events.on("paste.beforeCleanup",le),a.events.on("paste.after",ie),a.events.on("html.set",R),a.events.on("html.inserted",R),R(),a.events.on("destroy",function(){o=[]}),a.events.on("html.processGet",ne),a.opts.imageOutputSize&&a.events.on("html.beforeGet",function(){t=a.el.querySelectorAll("img");for(var e=0;e<t.length;e++){var n=t[e].style.width||c(t[e]).width(),r=t[e].style.height||c(t[e]).height();n&&t[e].setAttribute("width",(""+n).replace(/px/,"")),r&&t[e].setAttribute("height",(""+r).replace(/px/,""))}}),a.opts.iframe&&a.events.on("image.loaded",a.size.syncIframe),a.$wp&&(S(),a.events.on("contentChanged",S)),a.events.$on(c(a.o_win),"orientationchange.image",function(){setTimeout(function(){n&&B(n)},100)}),F(!0),z(!0),Z(!0),X(!0),a.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return te(e),!1})},showInsertPopup:function(){var e=a.$tb.find('.fr-command[data-cmd="insertImage"]'),t=a.popups.get("image.insert");if(t||(t=z()),N(),!t.hasClass("fr-active"))if(a.popups.refresh("image.insert"),a.popups.setContainer("image.insert",a.$tb),e.isVisible()){var n=a.button.getPosition(e),r=n.left,i=n.top;a.popups.show("image.insert",r,i,e.outerHeight())}else a.position.forSelection(t),a.popups.show("image.insert")},showLayer:function(e){var t,r,i=a.popups.get("image.insert");if(n||a.opts.toolbarInline){if(n){var s=Ae();Te()&&(s=s.find(".fr-img-wrap")),r=s.offset().top+s.outerHeight(),t=s.offset().left}}else{var o=a.$tb.find('.fr-command[data-cmd="insertImage"]');t=o.offset().left,r=o.offset().top+(a.opts.toolbarBottom?10:o.outerHeight()-10)}!n&&a.opts.toolbarInline&&(r=i.offset().top-a.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),a.popups.show("image.insert",t,r,n?n.outerHeight():0),a.accessibility.focusPopup(i)},refreshUploadButton:function(e){var t=a.popups.get("image.insert");t&&t.find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function(e){var t=a.popups.get("image.insert");t&&t.find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:G,insertByURL:function(){var e=a.popups.get("image.insert").find(".fr-image-by-url-layer input");if(0<e.val().length){k(),D(a.language.translate("Loading image"));var t=e.val().trim();if(a.opts.imageUploadRemoteUrls&&a.opts.imageCORSProxy&&a.opts.imageUpload){var r=new XMLHttpRequest;r.onload=function(){200==this.status?G([new Blob([this.response],{type:this.response.type||"image/png"})],n):x(p)},r.onerror=function(){U(t,!0,[],n)},r.open("GET",a.opts.imageCORSProxy+"/"+t,!0),r.responseType="blob",r.send()}else U(t,!0,[],n);e.val(""),e.blur()}},align:function(e){var t=Ae();t.removeClass("fr-fir fr-fil"),!a.opts.htmlUntouched&&a.opts.useClasses?"left"==e?t.addClass("fr-fil"):"right"==e&&t.addClass("fr-fir"):he(t,me(),e),Ee(),L(),A(),a.selection.clear()},refreshAlign:function(e){n&&e.find("> *").first().replaceWith(a.icon.create("image-align-"+ge()))},refreshAlignOnShow:function(e,t){n&&t.find('.fr-command[data-param1="'+ge()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(e){var t=Ae();t.removeClass("fr-dii fr-dib"),!a.opts.htmlUntouched&&a.opts.useClasses?"inline"==e?t.addClass("fr-dii"):"block"==e&&t.addClass("fr-dib"):he(t,e,ge()),Ee(),L(),A(),a.selection.clear()},refreshDisplayOnShow:function(e,t){n&&t.find('.fr-command[data-param1="'+me()+'"]').addClass("fr-active").attr("aria-selected",!0)},replace:ve,back:function(){n?(a.events.disableBlur(),c(".fr-popup input:focus").blur(),B(n)):(a.events.disableBlur(),a.selection.restore(),a.events.enableBlur(),a.popups.hide("image.insert"),a.toolbar.showInline())},get:be,getEl:Ae,insert:U,showProgressBar:k,remove:te,hideProgressBar:N,applyStyle:function(e,r,i){if(void 0===r&&(r=a.opts.imageStyles),void 0===i&&(i=a.opts.imageMultipleStyles),!n)return!1;var s=Ae();if(!i){var o=Object.keys(r);o.splice(o.indexOf(e),1),s.removeClass(o.join(" "))}"object"==t(r[e])?(s.removeAttr("style"),s.css(r[e].style)):s.toggleClass(e),B(n)},showAltPopup:q,showSizePopup:J,setAlt:function(e){if(n){var t=a.popups.get("image.alt");n.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),B(n)}},setSize:function(e,t){if(n){var r=a.popups.get("image.size");e=e||r.find('input[name="width"]').val()||"",t=t||r.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;n.removeAttr("width").removeAttr("height"),e.match(i)?n.css("width",e):n.css("width",""),t.match(i)?n.css("height",t):n.css("height",""),Te()&&(n.parents(".fr-img-caption").removeAttr("width").removeAttr("height"),e.match(i)?n.parents(".fr-img-caption").css("width",e):n.parents(".fr-img-caption").css("width",""),t.match(i)?n.parents(".fr-img-caption").css("height",t):n.parents(".fr-img-caption").css("height","")),r&&r.find("input:focus").blur(),B(n)}},toggleCaption:function(){var t;if(n&&!Te()){var r,i;(t=n).parent().is("a")&&(t=n.parent()),t.attr("style")&&(i=-1<(r=t.attr("style").split(":")).indexOf("width")?r[r.indexOf("width")+1].replace(";",""):"");var s=a.opts.imageResizeWithPercent?(-1<i.indexOf("px")?null:i)||"100%":n.width()+"px";t.wrap("<span "+(a.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+n.attr("class")+'" style="'+(a.opts.useClasses?"":t.attr("style"))+'" draggable="false"></span>'),t.wrap('<span class="fr-img-wrap"></span>'),n.after('<span class="fr-inner"'+(a.browser.mozilla?"":' contenteditable="true"')+">"+e.START_MARKER+a.language.translate("Image Caption")+e.END_MARKER+"</span>"),n.removeAttr("class").removeAttr("style").removeAttr("width"),n.parents(".fr-img-caption").css("width",s),de(!0),a.selection.restore()}else t=Ae(),n.insertAfter(t),n.attr("class",t.attr("class").replace("fr-img-caption","")).attr("style",t.attr("style")),t.remove(),B(n)},hasCaption:Te,exitEdit:de,edit:B}},e.DefineIcon("insertImage",{NAME:"image",SVG_KEY:"insertImage"}),e.RegisterShortcut(e.KEYCODE.P,"insertImage",null,"P"),e.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.DefineIcon("imageUpload",{NAME:"upload",SVG_KEY:"upload"}),e.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.DefineIcon("imageByURL",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.DefineIcon("imageDisplay",{NAME:"star",SVG_KEY:"imageDisplay"}),e.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.DefineIcon("image-align",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("image-align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("image-align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("image-align-center",{NAME:"align-justify",SVG_KEY:"alignCenter"}),e.DefineIcon("imageAlign",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.imageAlign.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.icon.create("image-align-"+n)+'<span class="fr-sr-only">'+this.language.translate(a[n])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.DefineIcon("imageReplace",{NAME:"exchange",FA5NAME:"exchange-alt",SVG_KEY:"replaceImage"}),e.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.DefineIcon("imageRemove",{NAME:"trash",SVG_KEY:"remove"}),e.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.DefineIcon("imageBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.$,this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.DefineIcon("imageStyle",{NAME:"magic",SVG_KEY:"imageClass"}),e.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',a=this.opts.imageStyles;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];"object"==t(r)&&(r=r.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(r)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var a=this.$,n=this.image.getEl();n&&t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=n.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),e.DefineIcon("imageAlt",{NAME:"info",SVG_KEY:"imageAltText"}),e.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternative Text",callback:function(){this.image.showAltPopup()}}),e.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.DefineIcon("imageSize",{NAME:"arrows-alt",SVG_KEY:"imageSize"}),e.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),e.DefineIcon("imageCaption",{NAME:"commenting",FA5NAME:"comment-alt",SVG_KEY:"imageCaption"}),e.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}}),Object.assign(e.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:null,imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.PLUGINS.imageManager=function(t){var a,n,r,i,s,o,l,c,d,f,p,u=t.$,h="image_manager",g=10,m=14,v=15,E=21,b=22,A={};function T(){var e=u(window).outerWidth();return e<768?2:e<1200?3:4}function C(){s.empty();for(var e=0;e<p;e++)s.append('<div class="fr-list-column"></div>')}function R(){if(d<l.length&&(s.outerHeight()<=r.outerHeight()+t.opts.imageManagerScrollOffset||r.scrollTop()+t.opts.imageManagerScrollOffset>s.outerHeight()-r.outerHeight())){c++;for(var e=t.opts.imageManagerPageSize*(c-1);e<Math.min(l.length,t.opts.imageManagerPageSize*c);e++)S(l[e])}}function S(e){var a=new Image,r=u(document.createElement("div")).attr("class","fr-image-container fr-empty fr-image-"+f++).attr("data-loading",t.language.translate("Loading")+"..").attr("data-deleting",t.language.translate("Deleting")+"..");y(!1),a.onload=function(){r.height(Math.floor(r.width()/a.width*a.height));var i=u(document.createElement("img"));if(e.thumb)i.attr("src",e.thumb);else{if(F(m,e),!e.url)return F(v,e),!1;i.attr("src",e.url)}if(e.url&&i.attr("data-url",e.url),e.tag)if(n.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),n.find(".fr-modal-tags").show(),0<=e.tag.indexOf(",")){for(var s=e.tag.split(","),l=0;l<s.length;l++)s[l]=s[l].trim(),0===o.find('a[title="'+s[l]+'"]').length&&o.append('<a role="button" title="'+s[l]+'">'+s[l]+"</a>");i.attr("data-tag",s.join())}else 0===o.find('a[title="'+e.tag.trim()+'"]').length&&o.append('<a role="button" title="'+e.tag.trim()+'">'+e.tag.trim()+"</a>"),i.attr("data-tag",e.tag.trim());for(var c in e.name&&i.attr("alt",e.name),e)e.hasOwnProperty(c)&&"thumb"!==c&&"url"!==c&&"tag"!==c&&i.attr("data-"+c,e[c]);r.append(i).append(u(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(u(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),o.find(".fr-selected-tag").each(function(e,t){M(i,t.text)||r.hide()}),i.on("load",function(){r.removeClass("fr-empty"),r.height("auto"),d++,w(_(parseInt(i.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),y(!1),d%t.opts.imageManagerPageSize==0&&R()}),t.events.trigger("imageManager.imageLoaded",[i])},a.onerror=function(){d++,r.remove(),w(_(parseInt(r.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),F(g,e),d%t.opts.imageManagerPageSize==0&&R()},a.src=e.thumb||e.url,L().append(r)}function L(){var e,t;return s.find(".fr-list-column").each(function(a,n){var r=u(n);0===a?(t=r.outerHeight(),e=r):r.outerHeight()<t&&(t=r.outerHeight(),e=r)}),e}function _(e){void 0===e&&(e=0);for(var t=[],a=f-1;e<=a;a--){var n=s.find(".fr-image-"+a);n.length&&(t.push(n),u(document.createElement("div")).attr("id","fr-image-hidden-container").append(n),s.find(".fr-image-"+a).remove())}return t}function w(e){for(var t=e.length-1;0<=t;t--)L().append(e[t])}function y(e){if(void 0===e&&(e=!0),!a.isVisible())return!0;var n=T();if(n!==p){p=n;var r=_();C(),w(r)}t.modals.resize(h),e&&R()}function I(e){var t={},a=e.data();for(var n in a)a.hasOwnProperty(n)&&"url"!==n&&"tag"!==n&&(t[n]=a[n]);return t}function O(e){var n=u(e.currentTarget).siblings("img"),r=a.data("instance")||t,i=a.data("current-image");if(t.modals.hide(h),r.image.showProgressBar(),i)i.data("fr-old-src",i.attr("src")),i.trigger("click");else{r.events.focus(!0),r.selection.restore();var s=r.position.getBoundingRect(),o=s.left+s.width/2+u(t.doc).scrollLeft(),l=s.top+s.height+u(t.doc).scrollTop();r.popups.setContainer("image.insert",t.$sc),r.popups.show("image.insert",o,l)}r.image.insert(n.data("url"),!1,I(n),i)}function x(e){var n=u(e.currentTarget).siblings("img"),r=t.language.translate("Are you sure? Image will be deleted.");confirm(r)&&(t.opts.imageManagerDeleteURL?!1!==t.events.trigger("imageManager.beforeDeleteImage",[n])&&(n.parent().addClass("fr-image-deleting"),u(this).ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:Object.assign(Object.assign({src:n.attr("src")},I(n)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,withCredentials:t.opts.requestWithCredentials,headers:t.opts.requestHeaders,done:function(e,r,i){t.events.trigger("imageManager.imageDeleted",[e]);var s=_(parseInt(n.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);n.parent().remove(),w(s),a.find("#fr-modal-tags > a").each(function(){0===a.find('#fr-image-list [data-tag*="'+u(this).text()+'"]').length&&u(this).removeClass("fr-selected-tag").hide()}),N(),y(!0)},fail:function(e){F(E,e.response||e.responseText)}})):F(b))}function F(e,a){10<=e&&e<20?i.hide():20<=e&&e<30&&u(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:e,message:A[e]},a])}function k(){var e=n.find(".fr-modal-head-line").outerHeight(),t=o.outerHeight();n.toggleClass("fr-show-tags"),n.hasClass("fr-show-tags")?(n.css("height",e+t),r.css("marginTop",e+t),o.find("a").css("opacity",1)):(n.css("height",e),r.css("marginTop",e),o.find("a").css("opacity",0))}function N(){var e=o.find(".fr-selected-tag");0<e.length?(s.find("img").parents().show(),e.each(function(e,t){s.find("img").each(function(e,a){var n=u(a);M(n,t.text)||n.parent().hide()})})):s.find("img").parents().show(),w(_()),R()}function D(e){e.preventDefault();var a=u(e.currentTarget);a.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&a.siblings("a").removeClass("fr-selected-tag"),N()}function M(e,t){for(var a=(e.attr("data-tag")||"").split(","),n=0;n<a.length;n++)if(a[n]===t)return!0;return!1}return A[g]="Image cannot be loaded from the passed link.",A[11]="Error during load images request.",A[12]="Missing imageManagerLoadURL option.",A[13]="Parsing load response failed.",A[m]="Missing image thumb.",A[v]="Missing image URL.",A[E]="Error during delete image request.",A[b]="Missing imageManagerDeleteURL option.",{require:["image"],_init:function(){if(!t.$wp&&"IMG"!==t.el.tagName)return!1},show:function(){if(!a){var g,m='<button class="fr-command fr-btn fr-modal-more fr-not-available" id="fr-modal-more-'.concat(t.sid,'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24""><path d="').concat(e.SVG.tags,'"/></svg></button><h4 data-text="true">').concat(t.language.translate("Manage Images"),'</h4></div>\n      <div class="fr-modal-tags" id="fr-modal-tags">');g=t.opts.imageManagerPreloader?'<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">':'<span class="fr-preloader" id="fr-preloader" style="display: none;">'+t.language.translate("Loading")+"</span>",g+='<div class="fr-image-list" id="fr-image-list"></div>';var v=t.modals.create(h,m,g);a=v.$modal,n=v.$head,r=v.$body}a.data("current-image",t.image.get()),t.modals.show(h),i||(i=a.find("#fr-preloader"),s=a.find("#fr-image-list"),o=a.find("#fr-modal-tags"),p=T(),C(),n.css("height",n.find(".fr-modal-head-line").outerHeight()),t.events.$on(u(t.o_win),"resize",function(){y(!!l)}),t.events.bindClick(s,".fr-insert-img",O),t.events.bindClick(s,".fr-delete-img",x),t.helpers.isMobile()&&(t.events.bindClick(s,"div.fr-image-container",function(e){a.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),u(e.currentTarget).addClass("fr-mobile-selected")}),a.on(t._mousedown,function(){a.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),a.on(t._mousedown+" "+t._mouseup,function(e){e.stopPropagation()}),a.on(t._mousedown,"*",function(){t.events.disableBlur()}),r.on("scroll",R),t.events.bindClick(a,"button#fr-modal-more-"+t.sid,k),t.events.bindClick(o,"a",D)),function(){i.show(),s.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?u(this).ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,withCredentials:t.opts.requestWithCredentials,headers:t.opts.requestHeaders,done:function(e,a,n){t.events.trigger("imageManager.imagesLoaded",[e]),function(e,t){try{s.find(".fr-list-column").empty(),f=d=c=0,l=e,R()}catch(e){F(13,t)}}(e,n.response),i.hide()},fail:function(e){F(11,e.response||e.responseText)}}):F(12)}()},hide:function(){t.modals.hide(h)}}},!e.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.DEFAULTS.imageInsertButtons.push("imageManager"),e.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),e.DefineIcon("imageManager",{NAME:"folder",SVG_KEY:"imageManager"}),e.DefineIcon("imageManagerInsert",{NAME:"plus",SVG_KEY:"add"}),e.DefineIcon("imageManagerDelete",{NAME:"trash",SVG_KEY:"remove"}),Object.assign(e.DEFAULTS,{inlineClasses:{"fr-class-code":"Code","fr-class-highlighted":"Highlighted","fr-class-transparency":"Transparent"}}),e.PLUGINS.inlineClass=function(e){var t=e.$;return{apply:function(t){e.format.toggle("span",{class:t})},refreshOnShow:function(a,n){n.find(".fr-command").each(function(){var a=t(this).data("param1"),n=e.format.is("span",{class:a});t(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}},e.RegisterCommand("inlineClass",{type:"dropdown",title:"Inline Class",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineClasses;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineClass" data-param1="'+a+'" title="'+t[a]+'">'+t[a]+"</a></li>");return e+"</ul>"},callback:function(e,t){this.inlineClass.apply(t)},refreshOnShow:function(e,t){this.inlineClass.refreshOnShow(e,t)},plugin:"inlineClass"}),e.DefineIcon("inlineClass",{NAME:"tag",SVG_KEY:"inlineClass"}),Object.assign(e.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.PLUGINS.inlineStyle=function(t){return{apply:function(a){if(""!==t.selection.text())for(var n=a.split(";"),r=0;r<n.length;r++){var i=n[r].split(":");n[r].length&&2==i.length&&t.format.applyStyle(i[0].trim(),i[1].trim())}else t.html.insert('<span style="'+a+'">'+e.INVISIBLE_SPACE+e.MARKERS+"</span>")}}},e.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><span style="'+t[a]+(-1===t[a].indexOf("display:block;")?" display:block;":"")+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[a]+'" title="'+this.language.translate(a)+'">'+this.language.translate(a)+"</a></span></li>");return e+"</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.DefineIcon("inlineStyle",{NAME:"paint-brush",SVG_KEY:"inlineStyle"}),Object.assign(e.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly","img"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.PLUGINS.lineBreaker=function(t){var a,n,r,i=t.$;function s(e,n){var r,s,o,l,c,d,f,p;if(null==e)c=(l=n.parent()).offset().top,r=(f=n.offset().top)-Math.min((f-c)/2,t.opts.lineBreakerOffset),o=l.outerWidth(),s=l.offset().left;else if(null==n)(d=(l=e.parent()).offset().top+l.outerHeight())<(p=e.offset().top+e.outerHeight())&&(d=(l=i(l).parent()).offset().top+l.outerHeight()),r=p+Math.min(Math.abs(d-p)/2,t.opts.lineBreakerOffset),o=l.outerWidth(),s=l.offset().left;else{l=e.parent();var u=e.offset().top+e.height(),h=n.offset().top;if(h<u)return!1;r=(u+h)/2,o=l.outerWidth(),s=l.offset().left}if(t.opts.iframe){var g=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),m=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));s+=t.$iframe.offset().left-t.helpers.scrollLeft()+m,r+=t.$iframe.offset().top-t.helpers.scrollTop()+g}t.$box.append(a),a.css("top",r-t.win.pageYOffset),a.css("left",s-t.win.pageXOffset),a.css("width",o),a.data("tag1",e),a.data("tag2",n),a.addClass("fr-visible").data("instance",t)}function o(e){if(e){var a=i(e);if(0===t.$el.find(a).length)return null;if(e.nodeType!=Node.TEXT_NODE&&a.is(t.opts.lineBreakerTags.join(",")))return a;if(0<a.parents(t.opts.lineBreakerTags.join(",")).length)return e=a.parents(t.opts.lineBreakerTags.join(",")).get(0),0!==t.$el.find(i(e)).length&&i(e).is(t.opts.lineBreakerTags.join(","))?i(e):null}return null}function l(e,a){var n=t.doc.elementFromPoint(e,a);return n&&!i(n).closest(".fr-line-breaker").length&&!t.node.isElement(n)&&n!=t.$wp.get(0)&&function(e){if(void 0!==e.inFroalaWrapper)return e.inFroalaWrapper;for(var a=e;e.parentNode&&e.parentNode!==t.$wp.get(0);)e=e.parentNode;return a.inFroalaWrapper=e.parentNode==t.$wp.get(0),a.inFroalaWrapper}(n)?n:null}function c(e,a,n){for(var r=n,i=null;r<=t.opts.lineBreakerOffset&&!i;)(i=l(e,a-r))||(i=l(e,a+r)),r+=n;return i}function d(e,a,n){for(var r=null,i=100;!r&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth()&&0<i;)(r=l(e,a))||(r=c(e,a,5)),"left"==n?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset,i-=t.opts.lineBreakerHorizontalOffset;return r}function f(e){var n=r=null,i=null,l=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);(n=l&&("HTML"==l.tagName||"BODY"==l.tagName||t.node.isElement(l)||0<=(l.getAttribute("class")||"").indexOf("fr-line-breaker"))?((i=c(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1))||(i=d(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),i||(i=d(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),o(i)):o(l))?function(e,n){var r,i,l=e.offset().top,c=e.offset().top+e.outerHeight();if(Math.abs(c-n)<=t.opts.lineBreakerOffset||Math.abs(n-l)<=t.opts.lineBreakerOffset)if(Math.abs(c-n)<Math.abs(n-l)){for(var d=(i=e.get(0)).nextSibling;d&&d.nodeType==Node.TEXT_NODE&&0===d.textContent.length;)d=d.nextSibling;if(!d)return s(e,null),!0;if(r=o(d))return s(e,r),!0}else{if(!(i=e.get(0)).previousSibling)return s(null,e),!0;if(r=o(i.previousSibling))return s(r,e),!0}a.removeClass("fr-visible").removeData("instance")}(n,e.pageY):t.core.sameInstance(a)&&a.removeClass("fr-visible").removeData("instance")}function p(e){return!(a.hasClass("fr-visible")&&!t.core.sameInstance(a))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(a.removeClass("fr-visible"),!0):void(!1!==n||t.edit.isDisabled()||(r&&clearTimeout(r),r=setTimeout(f,30,e))))}function u(){r&&clearTimeout(r),a&&a.hasClass("fr-visible")&&a.removeClass("fr-visible").removeData("instance")}function h(){n=!0,u()}function g(){n=!1}function m(n){n.preventDefault();var r=a.data("instance")||t;a.removeClass("fr-visible").removeData("instance");var i=a.data("tag1"),s=a.data("tag2"),o=t.html.defaultTag();null==i?o&&"TD"!=s.parent().get(0).tagName&&0===s.parents(o).length?s.before("<"+o+">"+e.MARKERS+"<br></"+o+">"):s.before(e.MARKERS+"<br>"):o&&"TD"!=i.parent().get(0).tagName&&0===i.parents(o).length?i.after("<"+o+">"+e.MARKERS+"<br></"+o+">"):i.after(e.MARKERS+"<br>"),r.selection.restore(),t.toolbar.enable()}return{_init:function(){if(!t.$wp)return!1;t.shared.$line_breaker||(t.shared.$line_breaker=i(document.createElement("div")).attr("class","fr-line-breaker").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect x="17" y="7" width="2" height="8"/><rect x="10" y="13" width="7" height="2"/><path d="M10.000,10.000 L10.000,18.013 L5.000,14.031 L10.000,10.000 Z"/></svg></a>')),a=t.shared.$line_breaker,t.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null},!0),t.events.on("destroy",function(){a.removeData("instance").removeClass("fr-visible"),i("body").first().append(a),clearTimeout(r)},!0),t.events.$on(a,"mousemove",function(e){e.stopPropagation()},!0),t.events.bindClick(a,"a",m),n=!1,t.events.$on(t.$win,"mousemove",p),t.events.$on(i(t.win),"scroll",u),t.events.on("popups.show.table.edit",u),t.events.on("commands.after",u),t.events.$on(i(t.win),"mousedown",h),t.events.$on(i(t.win),"mouseup",g)}}},Object.assign(e.DEFAULTS,{lineHeights:{Default:"",Single:"1",1.15:"1.15",1.5:"1.5",Double:"2"}}),e.PLUGINS.lineHeight=function(e){var t=e.$;return{_init:function(){},apply:function(a){e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore();var n=e.selection.blocks();n.length&&t(n[0]).parent().is("td")&&e.format.applyStyle("line-height",a.toString()),e.selection.save();for(var r=0;r<n.length;r++)t(n[r]).css("line-height",a),""===t(n[r]).attr("style")&&t(n[r]).removeAttr("style");e.html.unwrap(),e.selection.restore()},refreshOnShow:function(a,n){var r=e.selection.blocks();if(r.length){var i=t(r[0]);n.find(".fr-command").each(function(){var e=t(this).data("param1"),a=0<=(i.attr("style")||"").indexOf("line-height: "+e+";");t(this).toggleClass("fr-active",a).attr("aria-selected",a)})}}}},e.RegisterCommand("lineHeight",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.lineHeights;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command '+a+'" tabIndex="-1" role="option" data-cmd="lineHeight" data-param1="'+t[a]+'" title="'+this.language.translate(a)+'">'+this.language.translate(a)+"</a></li>");return e+"</ul>"},title:"Line Height",callback:function(e,t){this.lineHeight.apply(t)},refreshOnShow:function(e,t){this.lineHeight.refreshOnShow(e,t)},plugin:"lineHeight"}),e.DefineIcon("lineHeight",{NAME:"arrows-v",FA5NAME:"arrows-alt-v",SVG_KEY:"lineHeight"}),Object.assign(e.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),Object.assign(e.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkNoOpener:!0,linkNoReferrer:!0,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.PLUGINS.link=function(t){var a=t.$;function n(){var e=t.image?t.image.get():null;if(e||!t.$wp)return"A"==t.el.tagName?t.el:e&&e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?e.get(0).parentNode:void 0;var n=t.selection.ranges(0).commonAncestorContainer;try{n&&(n.contains&&n.contains(t.el)||!t.el.contains(n)||t.el==n)&&(n=null)}catch(e){n=null}if(n&&"A"===n.tagName)return n;var r=t.selection.element(),i=t.selection.endElement();"A"==r.tagName||t.node.isElement(r)||(r=a(r).parentsUntil(t.$el,"a").first().get(0)),"A"==i.tagName||t.node.isElement(i)||(i=a(i).parentsUntil(t.$el,"a").first().get(0));try{i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null)}catch(e){i=null}try{r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null)}catch(e){r=null}return i&&i==r&&"A"==i.tagName?(t.browser.msie||t.helpers.isMobile())&&(t.selection.info(r).atEnd||t.selection.info(r).atStart)?null:r:null}function r(){var e,a,n,r,i=t.image?t.image.get():null,s=[];if(i)"A"==i.get(0).parentNode.tagName&&s.push(i.get(0).parentNode);else if(t.win.getSelection){var o=t.win.getSelection();if(o.getRangeAt&&o.rangeCount){r=t.doc.createRange();for(var l=0;l<o.rangeCount;++l)if((a=(e=o.getRangeAt(l)).commonAncestorContainer)&&1!=a.nodeType&&(a=a.parentNode),a&&"a"==a.nodeName.toLowerCase())s.push(a);else{n=a.getElementsByTagName("a");for(var c=0;c<n.length;++c)r.selectNodeContents(n[c]),r.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<r.compareBoundaryPoints(e.START_TO_END,e)&&s.push(n[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if("a"==(a=(e=t.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())s.push(a);else{n=a.getElementsByTagName("a"),r=t.doc.body.createTextRange();for(var d=0;d<n.length;++d)r.moveToElementText(n[d]),-1<r.compareEndPoints("StartToEnd",e)&&r.compareEndPoints("EndToStart",e)<1&&s.push(n[d])}return s}function i(r){if(t.core.hasFocus()){if(s(),r&&"keyup"===r.type&&(r.altKey||r.which==e.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var i=n(),s=t.image?t.image.get():null;if(i&&!s){if(t.image){var o=t.node.contents(i);if(1==o.length&&"IMG"==o[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?a(i).before(e.MARKERS):a(i).after(e.MARKERS),t.selection.restore(),!1}}r&&r.stopPropagation(),function e(r){var i=t.popups.get("link.edit");i||(i=function(){var a="";1<=t.opts.linkEditButtons.length&&("A"==t.el.tagName&&0<=t.opts.linkEditButtons.indexOf("linkRemove")&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),a='<div class="fr-buttons">'.concat(t.button.buildList(t.opts.linkEditButtons),"</div>"));var r={buttons:a},i=t.popups.create("link.edit",r);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&e(n())}),i}());var s=a(r);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var o=s.offset().left+s.outerWidth()/2,l=s.offset().top+s.outerHeight();t.popups.show("link.edit",o,l,s.outerHeight(),!0)}(i)}}},t.helpers.isIOS()?100:0)}}function s(){t.popups.hide("link.edit")}function o(){var e=t.popups.get("link.insert"),r=n();if(r){var i,s,o=a(r),l=e.find('input.fr-link-attr[type="text"]'),c=e.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<l.length;i++)(s=a(l[i])).val(o.attr(s.attr("name")||""));for(c.attr("checked",!1),i=0;i<c.length;i++)s=a(c[i]),o.attr(s.attr("name"))==s.data("checked")&&s.attr("checked",!0);e.find('input.fr-link-attr[type="text"][name="text"]').val(o.text())}else e.find('input.fr-link-attr[type="text"]').val(""),e.find('input.fr-link-attr[type="checkbox"]').attr("checked",!1),e.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());e.find("input.fr-link-attr").trigger("change"),t.image&&t.image.get()?e.find('.fr-link-attr[name="text"]').parent().hide():e.find('.fr-link-attr[name="text"]').parent().show()}function l(e){if(e)return t.popups.onRefresh("link.insert",o),!0;var a="";1<=t.opts.linkInsertButtons.length&&(a='<div class="fr-buttons fr-tabs">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var n="",r=0;for(var i in n='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',n+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="'+t.language.translate("URL")+'" tabIndex="'+ ++r+'"></div>',t.opts.linkText&&(n+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++r+'"></div>'),t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(i)){var s=t.opts.linkAttributes[i];n+='<div class="fr-input-line"><input name="'+i+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(s)+'" tabIndex="'+ ++r+'"></div>'}t.opts.linkAlwaysBlank||(n+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'.concat(t.id,'" tabIndex="').concat(++r,'"><span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','</span></span><label id="fr-label-target-').concat(t.id,'">').concat(t.language.translate("Open in new tab"),"</label></div>"));var l={buttons:a,input_layer:n+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++r+'" type="button">'+t.language.translate("Insert")+"</button></div></div>"},c=t.popups.create("link.insert",l);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&f(),t.popups.isVisible("link.insert")&&d()}),c}function c(s,o,l){if(void 0===l&&(l={}),!1===t.events.trigger("link.beforeInsert",[s,o,l]))return!1;var c=t.image?t.image.get():null;c||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var d=s;if(t.opts.linkConvertEmailAddress&&t.helpers.isEmail(s)&&!/^mailto:.*/i.test(s)&&(s="mailto:"+s),""===t.opts.linkAutoPrefix||new RegExp("^("+e.LinkProtocols.join("|")+"):.","i").test(s)||/^data:image.*/i.test(s)||/^(https?:|ftps?:|file:|)\/\//i.test(s)||/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(s)||["/","{","[","#","(","."].indexOf((s||"")[0])<0&&(s=t.opts.linkAutoPrefix+t.helpers.sanitizeURL(s)),s=t.helpers.sanitizeURL(s),t.opts.linkAlwaysBlank&&(l.target="_blank"),t.opts.linkAlwaysNoFollow&&(l.rel="nofollow"),t.helpers.isEmail(d)&&(l.target=null,l.rel=null),"_blank"==l.target?(t.opts.linkNoOpener&&(l.rel?l.rel+=" noopener":l.rel="noopener"),t.opts.linkNoReferrer&&(l.rel?l.rel+=" noreferrer":l.rel="noreferrer")):null==l.target&&(l.rel?l.rel=l.rel.replace(/noopener/,"").replace(/noreferrer/,""):l.rel=null),o=o||"",s===t.opts.linkAutoPrefix)return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[d]),!1;var f,p=n();if(p){if((f=a(p)).attr("href",s),0<o.length&&f.text()!=o&&!c){for(var u=f.get(0);1===u.childNodes.length&&u.childNodes[0].nodeType==Node.ELEMENT_NODE;)u=u.childNodes[0];a(u).text(o)}c||f.prepend(e.START_MARKER).append(e.END_MARKER),f.attr(l),c||t.selection.restore()}else{c?(c.wrap('<a href="'+s+'"></a>'),t.image.hasCaption()&&c.parent().append(c.parents(".fr-img-caption").find(".fr-inner"))):(t.format.remove("a"),t.selection.isCollapsed()?(o=0===o.length?d:o,t.html.insert('<a href="'+s+'">'+e.START_MARKER+o.replace(/&/g,"&amp;").replace(/</,"&lt;",">","&gt;")+e.END_MARKER+"</a>"),t.selection.restore()):0<o.length&&o!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+s+'">'+e.START_MARKER+o.replace(/&/g,"&amp;")+e.END_MARKER+"</a>"),t.selection.restore()):(function(){if(!t.selection.isCollapsed()){t.selection.save();for(var e=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();e.length;){var n=a(e.pop());n.removeClass("fr-unprocessed");var r=t.node.deepestParent(n.get(0));if(r){for(var i=n.get(0),s="",o="";i=i.parentNode,t.node.isBlock(i)||(s+=t.node.closeTagString(i),o=t.node.openTagString(i)+o),i!=r;);var l=t.node.openTagString(n.get(0))+n.html()+t.node.closeTagString(n.get(0));n.replaceWith('<span id="fr-break"></span>');var c=r.outerHTML;c=(c=c.replace(/<span id="fr-break"><\/span>/g,s+l+o)).replace(o+s,""),r.outerHTML=c}e=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.html.cleanEmptyTags(),t.selection.restore()}}(),t.format.apply("a",{href:s})));for(var h=r(),g=0;g<h.length;g++)(f=a(h[g])).attr(l),f.removeAttr("_moz_dirty");1==h.length&&t.$wp&&!c&&(a(h[0]).prepend(e.START_MARKER).append(e.END_MARKER),t.selection.restore())}if(c){var m=t.popups.get("link.insert");m&&m.find("input:focus").blur(),t.image.edit(c)}else i()}function d(){s();var e=n();if(e){var r=t.popups.get("link.insert");r||(r=l()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var i=(t.image?t.image.get():null)||a(e),o=i.offset().left+i.outerWidth()/2,c=i.offset().top+i.outerHeight();t.popups.show("link.insert",o,c,i.outerHeight(),!0)}}function f(){var e=t.image?t.image.getEl():null;if(e){var a=t.popups.get("link.insert");t.image.hasCaption()&&(e=e.find(".fr-img-wrap")),a||(a=l()),o(),t.popups.setContainer("link.insert",t.$sc);var n=e.offset().left+e.outerWidth()/2,r=e.offset().top+e.outerHeight();t.popups.show("link.insert",n,r,e.outerHeight(),!0)}}return{_init:function(){t.events.on("keyup",function(t){t.which!=e.KEYCODE.ESC&&i(t)}),t.events.on("window.mouseup",i),t.events.$on(t.$el,"click","a",function(e){t.edit.isDisabled()&&e.preventDefault()}),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",i),l(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)},remove:function(){var e=n(),r=t.image?t.image.get():null;if(!1===t.events.trigger("link.beforeRemove",[e]))return!1;r&&e?(r.unwrap(),t.image.edit(r)):e&&(t.selection.save(),a(e).replaceWith(a(e).html()),t.selection.restore(),s())},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),a=t.popups.get("link.insert");if(a||(a=l()),!a.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.isVisible()){var n=t.button.getPosition(e),r=n.left,i=n.top;t.popups.show("link.insert",r,i,e.outerHeight())}else t.position.forSelection(a),t.popups.show("link.insert")},usePredefined:function(e){var n,r,i=t.opts.linkList[e],s=t.popups.get("link.insert"),o=s.find('input.fr-link-attr[type="text"]'),l=s.find('input.fr-link-attr[type="checkbox"]');for(i.rel&&(s.rel=i.rel),r=0;r<o.length;r++)i[(n=a(o[r])).attr("name")]?(n.val(i[n.attr("name")]),n.toggleClass("fr-not-empty",!0)):"text"!=n.attr("name")&&n.val("");for(r=0;r<l.length;r++)(n=a(l[r])).attr("checked",n.data("checked")==i[n.attr("name")]);t.accessibility.focusPopup(s)},insertCallback:function(){var e,n,r=t.popups.get("link.insert"),i=r.find('input.fr-link-attr[type="text"]'),s=r.find('input.fr-link-attr[type="checkbox"]'),o=(i.filter('[name="href"]').val()||"").trim(),l=i.filter('[name="text"]').val(),d={};for(n=0;n<i.length;n++)e=a(i[n]),["href","text"].indexOf(e.attr("name"))<0&&(d[e.attr("name")]=e.val());for(n=0;n<s.length;n++)(e=a(s[n])).is(":checked")?d[e.attr("name")]=e.data("checked"):d[e.attr("name")]=e.data("unchecked")||null;r.rel&&(d.rel=r.rel);var f=t.helpers.scrollTop();c(o,l,d),a(t.o_win).scrollTop(f)},insert:c,update:d,get:n,allSelected:r,back:function(){t.image&&t.image.get()?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),n()&&t.$wp?(t.selection.restore(),s(),i()):"A"==t.el.tagName?(t.$el.focus(),i()):(t.popups.hide("link.insert"),t.toolbar.showInline()))},imageLink:f,applyStyle:function(e,r,s){void 0===s&&(s=t.opts.linkMultipleStyles),void 0===r&&(r=t.opts.linkStyles);var o=n();if(!o)return!1;if(!s){var l=Object.keys(r);l.splice(l.indexOf(e),1),a(o).removeClass(l.join(" "))}a(o).toggleClass(e),i()}}},e.DefineIcon("insertLink",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterShortcut(e.KEYCODE.K,"insertLink",null,"K"),e.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.DefineIcon("linkOpen",{NAME:"external-link",FA5NAME:"external-link-alt",SVG_KEY:"openLink"}),e.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&(-1!==e.href.indexOf("mailto:")?this.o_win.open(e.href).close():this.o_win.open(e.href,"_blank","noopener"),this.popups.hide("link.edit"))},plugin:"link"}),e.DefineIcon("linkEdit",{NAME:"edit",SVG_KEY:"editLink"}),e.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.DefineIcon("linkRemove",{NAME:"unlink",SVG_KEY:"unlink"}),e.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.DefineIcon("linkBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();this.image&&this.image.get()||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),e.DefineIcon("linkList",{NAME:"search",SVG_KEY:"search"}),e.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,a=0;a<t.length;a++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+a+'">'+(t[a].displayText||t[a].text)+"</a></li>";return e+"</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),e.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),e.DefineIcon("imageLink",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),e.DefineIcon("linkStyle",{NAME:"magic",SVG_KEY:"linkStyles"}),e.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+a+'">'+this.language.translate(t[a])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(e,t){var a=this.$,n=this.link.get();if(n){var r=a(n);t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=r.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),Object.assign(e.DEFAULTS,{listAdvancedTypes:!0}),e.PLUGINS.lists=function(t){var a=t.$;function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function r(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function i(e){var i,s;for(i=e.length-1;0<=i;i--)for(s=i-1;0<=s;s--)if(a(e[s]).find(e[i]).length||e[s]==e[i]){e.splice(i,1);break}var o=[];for(i=0;i<e.length;i++){var l=a(e[i]),c=e[i].parentNode,d=l.attr("class");if(l.before(r(c.tagName)),"LI"==c.parentNode.tagName)l.before(r("LI")),l.after(n("LI"));else{var f="";d&&(f+=' class="'+d+'"');var p="rtl"==t.opts.direction||"rtl"==l.css("direction")?"margin-right":"margin-left";t.helpers.getPX(a(c).css(p))&&0<=(a(c).attr("style")||"").indexOf(p+":")&&(f+=' style="'+p+":"+t.helpers.getPX(a(c).css(p))+'px;"'),t.html.defaultTag()&&0===l.find(t.html.blockTagsQuery()).length&&l.wrapInner(t.html.defaultTag()+f),t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(r("LI"))}l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),o.indexOf(c)<0&&o.push(c)}for(i=0;i<o.length;i++){var u=a(o[i]),h=u.html();h=(h=h.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),u.replaceWith(t.node.openTagString(u.get(0))+h+t.node.closeTagString(u.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function s(e){t.selection.save();for(var n=0;n<e.length;n++){var r=e[n].previousSibling;if(r){var i=a(e[n]).find("> ul, > ol").last().get(0);if(i){var s=a(document.createElement("li"));a(i).prepend(s);for(var o=t.node.contents(e[n])[0];o&&!t.node.isList(o);){var l=o.nextSibling;s.append(o),o=l}a(r).append(a(i)),a(e[n]).remove()}else{var c=a(r).find("> ul, > ol").last().get(0);if(c)a(c).append(a(e[n]));else{var d=a("<"+e[n].parentNode.tagName+">");a(r).append(d),d.append(a(e[n]))}}}}t.clean.lists(),t.selection.restore()}function o(e){t.selection.save(),i(e),t.selection.restore()}function l(e){if("indent"==e||"outdent"==e){var a=!1,n=t.selection.blocks(),r=[],i=n[0].previousSibling||n[0].parentElement;if("outdent"==e){if("LI"==i.tagName||"LI"!=i.parentNode.tagName)return}else if(!n[0].previousSibling||"LI"!=n[0].previousSibling.tagName)return;for(var l=0;l<n.length;l++)"LI"==n[l].tagName?(a=!0,r.push(n[l])):"LI"==n[l].parentNode.tagName&&(a=!0,r.push(n[l].parentNode));a&&("indent"==e?s(r):o(r))}}return{_init:function(){t.events.on("commands.after",l),t.events.on("keydown",function(a){if(a.which==e.KEYCODE.TAB){for(var n=t.selection.blocks(),r=[],i=0;i<n.length;i++)"LI"==n[i].tagName?r.push(n[i]):"LI"==n[i].parentNode.tagName&&r.push(n[i].parentNode);if(1<r.length||r.length&&(t.selection.info(r[0]).atStart||t.node.isEmpty(r[0])))return a.preventDefault(),a.stopPropagation(),a.shiftKey?o(r):s(r),!1}},!0)},format:function(e,n){var r,s;for(t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),s=t.selection.blocks(),r=0;r<s.length;r++)"LI"!=s[r].tagName&&"LI"==s[r].parentNode.tagName&&(s[r]=s[r].parentNode);if(t.selection.save(),function(e,t){for(var a=!0,n=0;n<e.length;n++){if("LI"!=e[n].tagName)return!1;e[n].parentNode.tagName!=t&&(a=!1)}return a}(s,e)?n||i(s):function(e,n){!function(e,n){for(var r=[],i=0;i<e.length;i++){var s=e[i].parentNode;"LI"==e[i].tagName&&s.tagName!=n&&r.indexOf(s)<0&&r.push(s)}for(var o=r.length-1;0<=o;o--){var l=a(r[o]);l.replaceWith("<"+n.toLowerCase()+" "+t.node.attributes(l.get(0))+">"+l.html()+"</"+n.toLowerCase()+">")}}(e,n);var r,i=t.html.defaultTag(),s=null;e.length&&(r="rtl"==t.opts.direction||"rtl"==a(e[0]).css("direction")?"margin-right":"margin-left");for(var o=0;o<e.length;o++)if("TD"!=e[o].tagName&&"TH"!=e[o].tagName&&"LI"!=e[o].tagName){var l=t.helpers.getPX(a(e[o]).css(r))||0;(e[o].style.marginLeft=null)===s&&(s=l);var c=0<s?"<"+n+' style="'+r+": "+s+'px ">':"<"+n+">",d="</"+n+">";for(l-=s;0<l/t.opts.indentMargin;)c+="<"+n+">",d+=d,l-=t.opts.indentMargin;i&&e[o].tagName.toLowerCase()==i?a(e[o]).replaceWith(c+"<li"+t.node.attributes(e[o])+">"+a(e[o]).html()+"</li>"+d):a(e[o]).wrap(c+"<li></li>"+d)}t.clean.lists()}(s,e),t.html.unwrap(),t.selection.restore(),n=n||"default"){for(s=t.selection.blocks(),r=0;r<s.length;r++)"LI"!=s[r].tagName&&"LI"==s[r].parentNode.tagName&&(s[r]=s[r].parentNode);for(r=0;r<s.length;r++)"LI"==s[r].tagName&&(a(s[r].parentNode).css("list-style-type","default"===n?"":n),0===(a(s[r].parentNode).attr("style")||"").length&&a(s[r].parentNode).removeAttr("style"))}},refresh:function(e,n){var r=a(t.selection.element());if(r.get(0)!=t.el){var i=r.get(0);(i="LI"!=i.tagName&&i.firstElementChild&&"LI"!=i.firstElementChild.tagName?r.parents("li").get(0):"LI"==i.tagName||i.firstElementChild?i.firstElementChild&&"LI"==i.firstElementChild.tagName?r.get(0).firstChild:r.get(0):r.parents("li").get(0))&&i.parentNode.tagName==n&&t.el.contains(i.parentNode)&&e.addClass("fr-active")}}}},e.DefineIcon("formatOLSimple",{NAME:"list-ol",SVG_KEY:"orderedList"}),e.RegisterCommand("formatOLSimple",{title:"Ordered List",type:"button",options:{default:"Default",circle:"Circle",disc:"Disc",square:"Square"},refresh:function(e){this.lists.refresh(e,"OL")},callback:function(e,t){this.lists.format("OL",t)},plugin:"lists"}),e.RegisterCommand("formatUL",{title:"Unordered List",type:"button",hasOptions:function(){return this.opts.listAdvancedTypes},options:{default:"Default",circle:"Circle",disc:"Disc",square:"Square"},refresh:function(e){this.lists.refresh(e,"UL")},callback:function(e,t){this.lists.format("UL",t)},plugin:"lists"}),e.RegisterCommand("formatOL",{title:"Ordered List",hasOptions:function(){return this.opts.listAdvancedTypes},options:{default:"Default","lower-alpha":"Lower Alpha","lower-greek":"Lower Greek","lower-roman":"Lower Roman","upper-alpha":"Upper Alpha","upper-roman":"Upper Roman"},refresh:function(e){this.lists.refresh(e,"OL")},callback:function(e,t){this.lists.format("OL",t)},plugin:"lists"}),e.DefineIcon("formatUL",{NAME:"list-ul",SVG_KEY:"unorderedList"}),e.DefineIcon("formatOL",{NAME:"list-ol",SVG_KEY:"orderedList"}),Object.assign(e.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1,paragraphDefaultSelection:"Paragraph Format"}),e.PLUGINS.paragraphFormat=function(e){var t=e.$;function a(a,n){var r=e.html.defaultTag();if(n&&n.toLowerCase()!=r)if(0<a.find("ul, ol").length){var i=t("<"+n+">");a.prepend(i);for(var s=e.node.contents(a.get(0))[0];s&&["UL","OL"].indexOf(s.tagName)<0;){var o=s.nextSibling;i.append(s),s=o}}else a.html("<"+n+">"+a.html()+"</"+n+">")}return{apply:function(n){"N"==n&&(n=e.html.defaultTag()),e.selection.save(),e.html.wrap(!0,!0,!e.opts.paragraphFormat.BLOCKQUOTE,!0,!0),e.selection.restore();var r,i,s,o,l,c,d,f,p=e.selection.blocks();e.selection.save(),e.$el.find("pre").attr("skip",!0);for(var u=0;u<p.length;u++)if(p[u].tagName!=n&&!e.node.isList(p[u])){var h=t(p[u]);"LI"==p[u].tagName?a(h,n):"LI"==p[u].parentNode.tagName&&p[u]?(c=h,d=n,f=e.html.defaultTag(),d&&d.toLowerCase()!=f||(d='div class="fr-temp-div"'),c.replaceWith(t("<"+d+">").html(c.html()))):0<=["TD","TH"].indexOf(p[u].parentNode.tagName)?(s=h,o=n,l=e.html.defaultTag(),o||(o='div class="fr-temp-div"'+(e.node.isEmpty(s.get(0),!0)?' data-empty="true"':"")),o.toLowerCase()==l?(e.node.isEmpty(s.get(0),!0)||s.append("<br/>"),s.replaceWith(s.html())):s.replaceWith(t("<"+o+">").html(s.html()))):(r=h,(i=n)||(i='div class="fr-temp-div"'+(e.node.isEmpty(r.get(0),!0)?' data-empty="true"':"")),r.replaceWith(t("<"+i+" "+e.node.attributes(r.get(0))+">").html(r.html()).removeAttr("data-empty")))}e.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){t(this).prev().append("<br>"+t(this).html()),t(this).remove()}),e.$el.find("pre").removeAttr("skip"),e.html.unwrap(),e.selection.restore()},refreshOnShow:function(t,a){var n=e.selection.blocks();if(n.length){var r=n[0],i="N",s=e.html.defaultTag();r.tagName.toLowerCase()!=s&&r!=e.el&&(i=r.tagName),a.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}else a.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)},refresh:function(t){if(e.opts.paragraphFormatSelection){var a=e.selection.blocks();if(a.length){var n=a[0],r="N",i=e.html.defaultTag();n.tagName.toLowerCase()!=i&&n!=e.el&&(r=n.tagName),0<=["LI","TD","TH"].indexOf(r)&&(r="N"),t.find(">span").text(e.language.translate(e.opts.paragraphFormat[r]))}else t.find(">span").text(e.language.translate(e.opts.paragraphFormat.N))}}}},e.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:function(e){return e.language.translate(e.opts.paragraphDefaultSelection)},displaySelectionWidth:80,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var a in t)if(t.hasOwnProperty(a)){var n=this.shortcuts.get("paragraphFormat."+a);n=n?'<span class="fr-shortcut">'+n+"</span>":"",e+='<li role="presentation"><'+("N"==a?this.html.defaultTag()||"DIV":a)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></"+("N"==a?this.html.defaultTag()||"DIV":a)+"></li>"}return e+"</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.DefineIcon("paragraphFormat",{NAME:"paragraph",SVG_KEY:"paragraphFormat"}),Object.assign(e.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.PLUGINS.paragraphStyle=function(e){var t=e.$;return{_init:function(){},apply:function(a,n,r){void 0===n&&(n=e.opts.paragraphStyles),void 0===r&&(r=e.opts.paragraphMultipleStyles);var i="";r||((i=Object.keys(n)).splice(i.indexOf(a),1),i=i.join(" ")),e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore();var s=e.selection.blocks();e.selection.save();for(var o=t(s[0]).hasClass(a),l=0;l<s.length;l++)t(s[l]).removeClass(i).toggleClass(a,!o),t(s[l]).hasClass("fr-temp-div")&&t(s[l]).removeClass("fr-temp-div"),""===t(s[l]).attr("class")&&t(s[l]).removeAttr("class");e.html.unwrap(),e.selection.restore()},refreshOnShow:function(a,n){var r=e.selection.blocks();if(r.length){var i=t(r[0]);n.find(".fr-command").each(function(){var e=t(this).data("param1"),a=i.hasClass(e);t(this).toggleClass("fr-active",a).attr("aria-selected",a)})}}}},e.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command '+a+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></li>");return e+"</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.DefineIcon("paragraphStyle",{NAME:"magic",SVG_KEY:"paragraphStyle"}),Object.assign(e.DEFAULTS,{html2pdf:window.html2pdf}),e.PLUGINS.print=function(e){return{run:function(){!function(t){var a=e.$el.html(),n=null;e.shared.print_iframe?n=e.shared.print_iframe:((n=document.createElement("iframe")).name="fr-print",n.style.position="fixed",n.style.top="0",n.style.left="-9999px",n.style.height="100%",n.style.width="0",n.style.overflow="hidden",n.style["z-index"]="2147483647",n.style.tabIndex="-1",e.events.on("shared.destroy",function(){n.remove()}),e.shared.print_iframe=n);try{document.body.removeChild(n)}catch(e){}document.body.appendChild(n);n.addEventListener("load",function e(){t(),n.removeEventListener("load",e)});var r=n.contentWindow;r.document.open(),r.document.write("<!DOCTYPE html><html "+(e.opts.documentReady?'style="margin: 0; padding: 0;"':"")+"><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(e){e=e.cloneNode(!0),r.document.write(e.outerHTML)});var i=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(i,function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",r.document.write(t.outerHTML)}),r.document.write('</head><body style="height:auto;text-align: '+("rtl"==e.opts.direction?"right":"left")+"; direction: "+e.opts.direction+"; "+(e.opts.documentReady?" padding: 2cm; width: 17cm; margin: 0;":"")+'"><div class="fr-view">'),r.document.write(a),r.document.write("</div></body></html>"),r.document.close()}(function(){setTimeout(function(){e.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),e.$win.get(0).focus(),e.events.disableBlur(),e.events.focus()},0)})},toPDF:function(){e.opts.html2pdf&&(e.$el.css("text-align","left"),e.opts.html2pdf().set({margin:[10,20],html2canvas:{useCORS:!0}}).from(e.el).save(),setTimeout(function(){e.$el.css("text-align","")},100))}}},e.DefineIcon("print",{NAME:"print",SVG_KEY:"print"}),e.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),e.DefineIcon("getPDF",{NAME:"file-pdf-o",FA5NAME:"file-pdf",SVG_KEY:"pdfExport"}),e.RegisterCommand("getPDF",{title:"Download PDF",type:"button",focus:!1,undo:!1,callback:function(){this.print.toPDF()}}),Object.assign(e.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"],quickInsertEnabled:!0}),e.QUICK_INSERT_BUTTONS={},e.DefineIcon("quickInsert",{SVG_KEY:"add",template:"svg"}),e.RegisterQuickInsertButton=function(t,a){e.QUICK_INSERT_BUTTONS[t]=Object.assign({undo:!0},a)},e.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var e=this,t=e.$;e.shared.$qi_image_input||(e.shared.$qi_image_input=t(document.createElement("input")).attr("accept","image/"+e.opts.imageAllowedTypes.join(", image/").toLowerCase()).attr("name","quickInsertImage"+this.id).attr("style","display: none;").attr("type","file"),t("body").first().append(e.shared.$qi_image_input),e.events.$on(e.shared.$qi_image_input,"change",function(){var e=t(this).data("inst");this.files&&(e.quickInsert.hide(),e.image.upload(this.files)),t(this).val("")},!0)),e.$qi_image_input=e.shared.$qi_image_input,e.helpers.isMobile()&&e.selection.save(),e.events.disableBlur(),e.$qi_image_input.data("inst",e)[0].click()}}),e.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),e.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),e.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),e.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),e.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),e.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),e.PLUGINS.quickInsert=function(t){var a,n,r=t.$;function i(i){var s,o,l;if(s=i.offset().top-t.$box.offset().top,o=(t.$iframe&&t.$iframe.offset().left||0)+i.offset().left<a.outerWidth()?i.offset().left+a.outerWidth():0-a.outerWidth(),t.opts.enter!=e.ENTER_BR?l=(a.outerHeight()-i.outerHeight())/2:(r(document.createElement("span")).html(e.INVISIBLE_SPACE).insertAfter(i),l=(a.outerHeight()-i.next().outerHeight())/2,i.next().remove()),t.opts.iframe){var f=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top"));s+=t.$iframe.offset().top+f}a.hasClass("fr-on")&&0<=s&&n.css("top",s-l),0<=s&&s-Math.abs(l)<=t.$box.outerHeight()-i.outerHeight()?(a.hasClass("fr-hidden")&&(a.hasClass("fr-on")&&c(),a.removeClass("fr-hidden")),a.css("top",s-l)):a.hasClass("fr-visible")&&(a.addClass("fr-hidden"),d()),a.css("left",o)}function s(s){a||(t.shared.$quick_insert||(t.shared.$quick_insert=r(document.createElement("div")).attr("class","fr-quick-insert").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a>")),a=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){r("body").first().append(a.removeClass("fr-on")),n&&(d(),r("body").first().append(n.css("left",-9999).css("top",-9999)))},!0),t.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null,n&&(n.html("").removeData().remove(),n=null)},!0),t.events.on("commands.before",l),t.events.on("commands.after",function(){t.popups.areVisible()||o()}),t.events.bindClick(t.$box,".fr-quick-insert > a",c),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(a){var n=r(a.currentTarget).data("cmd");if(!1===t.events.trigger("quickInsert.commands.before",[n]))return!1;e.QUICK_INSERT_BUTTONS[n].callback.apply(t,[a.currentTarget]),e.QUICK_INSERT_BUTTONS[n].undo&&t.undo.saveStep(),t.events.trigger("quickInsert.commands.after",[n]),t.quickInsert.hide()}),t.events.$on(t.$wp,"scroll",f),t.events.$on(t.$tb,"transitionend",".fr-more-toolbar",f)),a.hasClass("fr-on")&&d(),t.$box.append(a),i(s),a.data("tag",s),a.addClass("fr-visible")}function o(){if(t.core.hasFocus()){var n=t.selection.element();if(t.opts.enter==e.ENTER_BR||t.node.isBlock(n)||(n=t.node.blockParent(n)),t.opts.enter==e.ENTER_BR&&!t.node.isBlock(n)){var i=t.node.deepestParent(n);i&&(n=i)}n&&(t.opts.enter!=e.ENTER_BR&&t.node.isEmpty(n)&&0<=t.opts.quickInsertTags.indexOf(n.tagName.toLowerCase())||t.opts.enter==e.ENTER_BR&&("BR"==n.tagName&&(!n.previousSibling||"BR"==n.previousSibling.tagName||t.node.isBlock(n.previousSibling))||t.node.isEmpty(n)&&(!n.previousSibling||"BR"==n.previousSibling.tagName||t.node.isBlock(n.previousSibling))&&(!n.nextSibling||"BR"==n.nextSibling.tagName||t.node.isBlock(n.nextSibling))))?a&&a.data("tag").is(r(n))&&a.hasClass("fr-on")?d():t.selection.isCollapsed()&&s(r(n)):l()}}function l(){a&&(a.hasClass("fr-on")&&d(),a.removeClass("fr-visible fr-on"),a.css("left",-9999).css("top",-9999))}function c(i){if(i&&i.preventDefault(),a.hasClass("fr-on")&&!a.hasClass("fr-hidden"))d();else{if(!t.shared.$qi_helper){for(var s=t.opts.quickInsertButtons,o='<div class="fr-qi-helper">',l=0,c=0;c<s.length;c++){var f=e.QUICK_INSERT_BUTTONS[s[c]];f&&(!f.requiredPlugin||e.PLUGINS[f.requiredPlugin]&&0<=t.opts.pluginsEnabled.indexOf(f.requiredPlugin))&&(o+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(f.title)+'" tabIndex="-1" data-cmd="'+s[c]+'" style="transition-delay: '+.025*l+++'s;">'+t.icon.create(f.icon)+"</a>")}o+="</div>",t.shared.$qi_helper=r(o),t.tooltip.bind(t.shared.$qi_helper,"a.fr-btn"),t.events.$on(t.shared.$qi_helper,"mousedown",function(e){e.preventDefault()},!0)}n=t.shared.$qi_helper,t.$box.append(n),setTimeout(function(){n.css("top",parseFloat(a.css("top"))),n.css("left",parseFloat(a.css("left"))+a.outerWidth()),n.find("a").addClass("fr-size-1"),a.addClass("fr-on")},10)}}function d(){var e=t.$box.find(".fr-qi-helper");e.length&&function(){for(var t=e.find("a"),n=0;n<t.length;n++)!function(a){setTimeout(function(){e.children().eq(t.length-1-a).removeClass("fr-size-1")},25*a)}(n);setTimeout(function(){e.css("left",-9999),a&&!a.hasClass("fr-hidden")&&a.removeClass("fr-on")},25*n)}()}function f(){a.hasClass("fr-visible")&&i(a.data("tag"))}return{_init:function(){if(!t.$wp||!t.opts.quickInsertEnabled)return!1;t.popups.onShow("image.edit",l),t.events.on("mouseup",o),t.helpers.isMobile()&&t.events.$on(r(t.o_doc),"selectionchange",o),t.events.on("blur",l),t.events.on("keyup",o),t.events.on("keydown",function(){setTimeout(function(){o()},0)})},hide:l}},e.PLUGINS.quote=function(e){var t=e.$;function a(t){for(;t.parentNode&&t.parentNode!=e.el;)t=t.parentNode;return t}return{apply:function(n){e.selection.save(),e.html.wrap(!0,!0,!0,!0),e.selection.restore(),"increase"==n?function(){var n,r=e.selection.blocks();for(n=0;n<r.length;n++)r[n]=a(r[n]);e.selection.save();var i=t(document.createElement("blockquote"));for(i.insertBefore(r[0]),n=0;n<r.length;n++)i.append(r[n]);e.html.unwrap(),e.selection.restore()}():"decrease"==n&&function(){var a,n=e.selection.blocks();for(a=0;a<n.length;a++)"BLOCKQUOTE"!=n[a].tagName&&(n[a]=t(n[a]).parentsUntil(e.$el,"BLOCKQUOTE").get(0));for(e.selection.save(),a=0;a<n.length;a++)n[a]&&t(n[a]).replaceWith(n[a].innerHTML);e.html.unwrap(),e.selection.restore()}()}}},e.RegisterShortcut(e.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.RegisterShortcut(e.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.RegisterCommand("quote",{title:"Quote",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t={increase:"Increase",decrease:"Decrease"};for(var a in t)if(t.hasOwnProperty(a)){var n=this.shortcuts.get("quote."+a);e+='<li role="presentation"><a class="fr-command fr-active '+a+'" tabIndex="-1" role="option" data-cmd="quote" data-param1="'+a+'" title="'+t[a]+'">'+this.language.translate(t[a])+(n?'<span class="fr-shortcut">'+n+"</span>":"")+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.DefineIcon("quote",{NAME:"quote-left",SVG_KEY:"blockquote"}),Object.assign(e.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.PLUGINS.save=function(e){var t=e.$,a=null,n=null,r=!1,i=1,s=2,o={};function l(t,a){e.events.trigger("save.error",[{code:t,message:o[t]},a])}function c(a){void 0===a&&(a=e.html.get());var r=a,o=e.events.trigger("save.before",[a]);if(!1===o)return!1;if("string"==typeof o&&(a=o),e.opts.saveURL){var c={};for(var d in e.opts.saveParams)if(e.opts.saveParams.hasOwnProperty(d)){var f=e.opts.saveParams[d];c[d]="function"==typeof f?f.call(this):f}var p={};p[e.opts.saveParam]=a,t(this).ajax({method:e.opts.saveMethod,url:e.opts.saveURL,data:Object.assign(p,c),crossDomain:e.opts.requestWithCORS,withCredentials:e.opts.requestWithCredentials,headers:e.opts.requestHeaders,done:function(t,a,i){n=r,e.events.trigger("save.after",[t])},fail:function(e){l(s,e.response||e.responseText)}})}else l(i)}function d(){clearTimeout(a),a=setTimeout(function(){var t=e.html.get();(n!=t||r)&&(r=!1,c(n=t))},e.opts.saveInterval)}return o[i]="Missing saveURL option.",o[s]="Something went wrong during save.",{_init:function(){e.opts.saveInterval&&(n=e.html.get(),e.events.on("contentChanged",d),e.events.on("keydown destroy",function(){clearTimeout(a)}))},save:c,reset:function(){d(),r=!1},force:function(){r=!0}}},e.DefineIcon("save",{NAME:"floppy-o",FA5NAME:"save"}),e.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),Object.assign(e.DEFAULTS,{specialCharactersSets:[{title:"Latin",char:"&iexcl;",list:[{char:"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{char:"&cent;",desc:"CENT SIGN"},{char:"&pound;",desc:"POUND SIGN"},{char:"&curren;",desc:"CURRENCY SIGN"},{char:"&yen;",desc:"YEN SIGN"},{char:"&brvbar;",desc:"BROKEN BAR"},{char:"&sect;",desc:"SECTION SIGN"},{char:"&uml;",desc:"DIAERESIS"},{char:"&copy;",desc:"COPYRIGHT SIGN"},{char:"&trade;",desc:"TRADEMARK SIGN"},{char:"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{char:"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&not;",desc:"NOT SIGN"},{char:"&reg;",desc:"REGISTERED SIGN"},{char:"&macr;",desc:"MACRON"},{char:"&deg;",desc:"DEGREE SIGN"},{char:"&plusmn;",desc:"PLUS-MINUS SIGN"},{char:"&sup2;",desc:"SUPERSCRIPT TWO"},{char:"&sup3;",desc:"SUPERSCRIPT THREE"},{char:"&acute;",desc:"ACUTE ACCENT"},{char:"&micro;",desc:"MICRO SIGN"},{char:"&para;",desc:"PILCROW SIGN"},{char:"&middot;",desc:"MIDDLE DOT"},{char:"&cedil;",desc:"CEDILLA"},{char:"&sup1;",desc:"SUPERSCRIPT ONE"},{char:"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{char:"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{char:"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{char:"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{char:"&iquest;",desc:"INVERTED QUESTION MARK"},{char:"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{char:"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{char:"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{char:"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{char:"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{char:"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{char:"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{char:"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{char:"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{char:"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{char:"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{char:"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{char:"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{char:"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{char:"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{char:"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{char:"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{char:"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{char:"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{char:"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{char:"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{char:"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{char:"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{char:"&times;",desc:"MULTIPLICATION SIGN"},{char:"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{char:"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{char:"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{char:"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{char:"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{char:"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{char:"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{char:"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{char:"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{char:"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{char:"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{char:"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{char:"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{char:"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{char:"&aelig;",desc:"LATIN SMALL LETTER AE"},{char:"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{char:"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{char:"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{char:"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{char:"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{char:"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{char:"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{char:"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{char:"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{char:"&eth;",desc:"LATIN SMALL LETTER ETH"},{char:"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{char:"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{char:"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{char:"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{char:"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{char:"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{char:"&divide;",desc:"DIVISION SIGN"},{char:"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{char:"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{char:"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{char:"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{char:"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{char:"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{char:"&thorn;",desc:"LATIN SMALL LETTER THORN"},{char:"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",char:"&Alpha;",list:[{char:"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{char:"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{char:"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{char:"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{char:"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{char:"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{char:"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{char:"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{char:"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{char:"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{char:"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{char:"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{char:"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{char:"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{char:"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{char:"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{char:"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{char:"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{char:"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{char:"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{char:"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{char:"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{char:"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{char:"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{char:"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{char:"&beta;",desc:"GREEK SMALL LETTER BETA"},{char:"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{char:"&delta;",desc:"GREEK SMALL LETTER DELTA"},{char:"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{char:"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{char:"&eta;",desc:"GREEK SMALL LETTER ETA"},{char:"&theta;",desc:"GREEK SMALL LETTER THETA"},{char:"&iota;",desc:"GREEK SMALL LETTER IOTA"},{char:"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{char:"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{char:"&mu;",desc:"GREEK SMALL LETTER MU"},{char:"&nu;",desc:"GREEK SMALL LETTER NU"},{char:"&xi;",desc:"GREEK SMALL LETTER XI"},{char:"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{char:"&pi;",desc:"GREEK SMALL LETTER PI"},{char:"&rho;",desc:"GREEK SMALL LETTER RHO"},{char:"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{char:"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{char:"&tau;",desc:"GREEK SMALL LETTER TAU"},{char:"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{char:"&phi;",desc:"GREEK SMALL LETTER PHI"},{char:"&chi;",desc:"GREEK SMALL LETTER CHI"},{char:"&psi;",desc:"GREEK SMALL LETTER PSI"},{char:"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{char:"&thetasym;",desc:"GREEK THETA SYMBOL"},{char:"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{char:"&straightphi;",desc:"GREEK PHI SYMBOL"},{char:"&piv;",desc:"GREEK PI SYMBOL"},{char:"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{char:"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{char:"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{char:"&varrho;",desc:"GREEK RHO SYMBOL"},{char:"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{char:"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",char:"&#x400",list:[{char:"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{char:"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{char:"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{char:"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{char:"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{char:"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{char:"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{char:"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{char:"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{char:"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{char:"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{char:"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{char:"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{char:"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{char:"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{char:"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{char:"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{char:"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{char:"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{char:"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{char:"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{char:"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{char:"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{char:"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{char:"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{char:"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{char:"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{char:"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{char:"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{char:"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{char:"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{char:"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{char:"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{char:"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{char:"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{char:"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{char:"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{char:"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{char:"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{char:"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{char:"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{char:"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{char:"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{char:"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{char:"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{char:"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{char:"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{char:"&#x430",desc:"CYRILLIC SMALL LETTER A"},{char:"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{char:"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{char:"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{char:"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{char:"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{char:"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{char:"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{char:"&#x438",desc:"CYRILLIC SMALL LETTER I"},{char:"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{char:"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{char:"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{char:"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{char:"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{char:"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{char:"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{char:"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{char:"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{char:"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{char:"&#x443",desc:"CYRILLIC SMALL LETTER U"},{char:"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{char:"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{char:"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{char:"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{char:"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{char:"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{char:"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{char:"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{char:"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{char:"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{char:"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{char:"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{char:"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{char:"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{char:"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{char:"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{char:"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{char:"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{char:"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{char:"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{char:"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{char:"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{char:"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{char:"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{char:"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{char:"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{char:"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",char:"&ndash;",list:[{char:"&ndash;",desc:"EN DASH"},{char:"&mdash;",desc:"EM DASH"},{char:"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{char:"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{char:"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{char:"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{char:"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{char:"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{char:"&dagger;",desc:"DAGGER"},{char:"&Dagger;",desc:"DOUBLE DAGGER"},{char:"&bull;",desc:"BULLET"},{char:"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{char:"&permil;",desc:"PER MILLE SIGN"},{char:"&prime;",desc:"PRIME"},{char:"&Prime;",desc:"DOUBLE PRIME"},{char:"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{char:"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{char:"&oline;",desc:"OVERLINE"},{char:"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",char:"&#x20A0",list:[{char:"&#x20A0",desc:"EURO-CURRENCY SIGN"},{char:"&#x20A1",desc:"COLON SIGN"},{char:"&#x20A2",desc:"CRUZEIRO SIGN"},{char:"&#x20A3",desc:"FRENCH FRANC SIGN"},{char:"&#x20A4",desc:"LIRA SIGN"},{char:"&#x20A5",desc:"MILL SIGN"},{char:"&#x20A6",desc:"NAIRA SIGN"},{char:"&#x20A7",desc:"PESETA SIGN"},{char:"&#x20A8",desc:"RUPEE SIGN"},{char:"&#x20A9",desc:"WON SIGN"},{char:"&#x20AA",desc:"NEW SHEQEL SIGN"},{char:"&#x20AB",desc:"DONG SIGN"},{char:"&#x20AC",desc:"EURO SIGN"},{char:"&#x20AD",desc:"KIP SIGN"},{char:"&#x20AE",desc:"TUGRIK SIGN"},{char:"&#x20AF",desc:"DRACHMA SIGN"},{char:"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{char:"&#x20B1",desc:"PESO SIGN"},{char:"&#x20B2",desc:"GUARANI SIGN"},{char:"&#x20B3",desc:"AUSTRAL SIGN"},{char:"&#x20B4",desc:"HRYVNIA SIGN"},{char:"&#x20B5",desc:"CEDI SIGN"},{char:"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{char:"&#x20B7",desc:"SPESMILO SIGN"},{char:"&#x20B8",desc:"TENGE SIGN"},{char:"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",char:"&#x2190",list:[{char:"&#x2190",desc:"LEFTWARDS ARROW"},{char:"&#x2191",desc:"UPWARDS ARROW"},{char:"&#x2192",desc:"RIGHTWARDS ARROW"},{char:"&#x2193",desc:"DOWNWARDS ARROW"},{char:"&#x2194",desc:"LEFT RIGHT ARROW"},{char:"&#x2195",desc:"UP DOWN ARROW"},{char:"&#x2196",desc:"NORTH WEST ARROW"},{char:"&#x2197",desc:"NORTH EAST ARROW"},{char:"&#x2198",desc:"SOUTH EAST ARROW"},{char:"&#x2199",desc:"SOUTH WEST ARROW"},{char:"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{char:"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{char:"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{char:"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{char:"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{char:"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{char:"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{char:"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{char:"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{char:"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{char:"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{char:"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{char:"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{char:"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{char:"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{char:"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{char:"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{char:"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{char:"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{char:"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{char:"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{char:"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{char:"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{char:"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{char:"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{char:"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{char:"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{char:"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{char:"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{char:"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{char:"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{char:"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{char:"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{char:"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{char:"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{char:"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{char:"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{char:"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{char:"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{char:"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{char:"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{char:"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{char:"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{char:"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{char:"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{char:"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{char:"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{char:"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{char:"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{char:"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{char:"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{char:"&#x21E1",desc:"UPWARDS DASHED ARROW"},{char:"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{char:"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{char:"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{char:"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{char:"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{char:"&#x21E7",desc:"UPWARDS WHITE ARROW"},{char:"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{char:"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{char:"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{char:"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{char:"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{char:"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{char:"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{char:"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{char:"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{char:"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{char:"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{char:"&#x21F3",desc:"UP DOWN WHITE ARROW"},{char:"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{char:"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{char:"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{char:"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{char:"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{char:"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{char:"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",char:"&forall;",list:[{char:"&forall;",desc:"FOR ALL"},{char:"&part;",desc:"PARTIAL DIFFERENTIAL"},{char:"&exist;",desc:"THERE EXISTS"},{char:"&empty;",desc:"EMPTY SET"},{char:"&nabla;",desc:"NABLA"},{char:"&isin;",desc:"ELEMENT OF"},{char:"&notin;",desc:"NOT AN ELEMENT OF"},{char:"&ni;",desc:"CONTAINS AS MEMBER"},{char:"&prod;",desc:"N-ARY PRODUCT"},{char:"&sum;",desc:"N-ARY SUMMATION"},{char:"&minus;",desc:"MINUS SIGN"},{char:"&lowast;",desc:"ASTERISK OPERATOR"},{char:"&radic;",desc:"SQUARE ROOT"},{char:"&prop;",desc:"PROPORTIONAL TO"},{char:"&infin;",desc:"INFINITY"},{char:"&ang;",desc:"ANGLE"},{char:"&and;",desc:"LOGICAL AND"},{char:"&or;",desc:"LOGICAL OR"},{char:"&cap;",desc:"INTERSECTION"},{char:"&cup;",desc:"UNION"},{char:"&int;",desc:"INTEGRAL"},{char:"&there4;",desc:"THEREFORE"},{char:"&sim;",desc:"TILDE OPERATOR"},{char:"&cong;",desc:"APPROXIMATELY EQUAL TO"},{char:"&asymp;",desc:"ALMOST EQUAL TO"},{char:"&ne;",desc:"NOT EQUAL TO"},{char:"&equiv;",desc:"IDENTICAL TO"},{char:"&le;",desc:"LESS-THAN OR EQUAL TO"},{char:"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{char:"&sub;",desc:"SUBSET OF"},{char:"&sup;",desc:"SUPERSET OF"},{char:"&nsub;",desc:"NOT A SUBSET OF"},{char:"&sube;",desc:"SUBSET OF OR EQUAL TO"},{char:"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{char:"&oplus;",desc:"CIRCLED PLUS"},{char:"&otimes;",desc:"CIRCLED TIMES"},{char:"&perp;",desc:"UP TACK"}]},{title:"Misc",char:"&spades;",list:[{char:"&spades;",desc:"BLACK SPADE SUIT"},{char:"&clubs;",desc:"BLACK CLUB SUIT"},{char:"&hearts;",desc:"BLACK HEART SUIT"},{char:"&diams;",desc:"BLACK DIAMOND SUIT"},{char:"&#x2669",desc:"QUARTER NOTE"},{char:"&#x266A",desc:"EIGHTH NOTE"},{char:"&#x266B",desc:"BEAMED EIGHTH NOTES"},{char:"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{char:"&#x266D",desc:"MUSIC FLAT SIGN"},{char:"&#x266E",desc:"MUSIC NATURAL SIGN"},{char:"&#x2600",desc:"BLACK SUN WITH RAYS"},{char:"&#x2601",desc:"CLOUD"},{char:"&#x2602",desc:"UMBRELLA"},{char:"&#x2603",desc:"SNOWMAN"},{char:"&#x2615",desc:"HOT BEVERAGE"},{char:"&#x2618",desc:"SHAMROCK"},{char:"&#x262F",desc:"YIN YANG"},{char:"&#x2714",desc:"HEAVY CHECK MARK"},{char:"&#x2716",desc:"HEAVY MULTIPLICATION X"},{char:"&#x2744",desc:"SNOWFLAKE"},{char:"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x2764",desc:"HEAVY BLACK HEART"}]}],specialCharButtons:["specialCharBack","|"]}),Object.assign(e.POPUP_TEMPLATES,{specialCharacters:"[_BUTTONS_][_CUSTOM_LAYER_]"}),e.PLUGINS.specialCharacters=function(t){var a=t.$,n=t.opts.specialCharactersSets[0],r=t.opts.specialCharactersSets,i="";function s(){return'\n        <div class="fr-buttons fr-tabs fr-tabs-scroll">\n          '.concat(function(e,t){var a="";return e.forEach(function(e){var n={elementClass:e.title===t.title?"fr-active fr-active-tab":"",title:e.title,dataParam1:e.title,desc:e.char};a+='<button class="fr-command fr-btn fr-special-character-category '.concat(n.elementClass,'" title="').concat(n.title,'" data-cmd="setSpecialCharacterCategory" data-param1="').concat(n.dataParam1,'"><span>').concat(n.desc,"</span></button>")}),a}(r,n),'\n        </div>\n        <div class="fr-icon-container fr-sc-container">\n          ').concat(function(e){var t="";return e.list.forEach(function(e){var a={dataParam1:e.char,title:e.desc,splCharValue:e.char};t+='<span class="fr-command fr-special-character fr-icon" role="button" \n      data-cmd="insertSpecialCharacter" data-param1="'.concat(a.dataParam1,'" \n      title="').concat(a.title,'">').concat(a.splCharValue,"</span>")}),t}(n),"\n        </div>")}return{setSpecialCharacterCategory:function(e){n=r.filter(function(t){return t.title===e})[0],t.popups.get("specialCharacters").html(i+s())},showSpecialCharsPopup:function(){var n=t.popups.get("specialCharacters");if(n||(n=function(){t.opts.toolbarInline&&0<t.opts.specialCharButtons.length&&(i='<div class="fr-buttons fr-tabs">'.concat(t.button.buildList(t.opts.specialCharButtons),"</div>"));var n,r={buttons:i,custom_layer:s()},o=t.popups.create("specialCharacters",r);return n=o,t.events.on("popup.tab",function(r){var i=a(r.currentTarget);if(!t.popups.isVisible("specialCharacters")||!i.is("span, a"))return!0;var s,o,l,c=r.which;if(e.KEYCODE.TAB==c){if(i.is("span.fr-icon")&&r.shiftKey||i.is("a")&&!r.shiftKey){var d=n.find(".fr-buttons");s=!t.accessibility.focusToolbar(d,!!r.shiftKey)}if(!1!==s){var f=n.find("span.fr-icon:focus").first().concat(n.findVisible(" span.fr-icon").first().concat(n.find("a")));i.is("span.fr-icon")&&(f=f.not("span.fr-icon:not(:focus)")),o=f.index(i),o=r.shiftKey?((o-1)%f.length+f.length)%f.length:(o+1)%f.length,l=f.get(o),t.events.disableBlur(),l.focus(),s=!1}}else if(e.KEYCODE.ARROW_UP==c||e.KEYCODE.ARROW_DOWN==c||e.KEYCODE.ARROW_LEFT==c||e.KEYCODE.ARROW_RIGHT==c){if(i.is("span.fr-icon")){var p=i.parent().find("span.fr-icon");o=p.index(i);var u=Math.floor(p.length/11),h=o%11,g=11*Math.floor(o/11)+h,m=11*u;e.KEYCODE.ARROW_UP==c?g=((g-11)%m+m)%m:e.KEYCODE.ARROW_DOWN==c?g=(g+11)%m:e.KEYCODE.ARROW_LEFT==c?g=((g-1)%m+m)%m:e.KEYCODE.ARROW_RIGHT==c&&(g=(g+1)%m),l=a(p.get(g)),t.events.disableBlur(),l.focus(),s=!1}}else e.KEYCODE.ENTER==c&&(i.is("a")?i[0].click():t.button.exec(i),s=!1);return!1===s&&(r.preventDefault(),r.stopPropagation()),s},!0),o}()),!n.hasClass("fr-active")){t.popups.refresh("specialCharacters"),t.popups.setContainer("specialCharacters",t.$tb);var r=t.$tb.find('.fr-command[data-cmd="specialCharacters"]'),o=t.button.getPosition(r),l=o.left,c=o.top;t.popups.show("specialCharacters",l,c,outerHeight)}},back:function(){t.popups.hide("specialCharacters"),t.toolbar.showInline()}}},e.DefineIcon("specialCharacters",{NAME:"dollar-sign",SVG_KEY:"symbols"}),e.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,plugin:"specialCharacters",showOnMobile:!0,callback:function(){this.popups.isVisible("specialCharacters")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("specialCharacters")):this.specialCharacters.showSpecialCharsPopup()}}),e.RegisterCommand("insertSpecialCharacter",{callback:function(e,t){this.undo.saveStep(),this.html.insert(t),this.undo.saveStep(),this.popups.hide("specialCharacters")}}),e.RegisterCommand("setSpecialCharacterCategory",{undo:!1,focus:!1,callback:function(e,t){this.specialCharacters.setSpecialCharacterCategory(t)}}),e.DefineIcon("specialCharBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("specialCharBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.specialCharacters.back()}}),Object.assign(e.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(e.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableDefaultWidth:"100%",tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.PLUGINS.table=function(t){var a,n,r,i,s,o,l,c=t.$;function d(){var e=C();if(e){var a=t.popups.get("table.edit");if(a||(a=h()),a){t.popups.setContainer("table.edit",t.$sc);var n=I(e),r=n.left+(n.right-n.left)/2,i=n.bottom;t.popups.show("table.edit",r,i,n.bottom-n.top,!0),t.edit.isDisabled()&&(1<Q().length&&t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell").last().get(0)),t.selection.restore())}}}function f(){0===Q().length&&t.toolbar.enable()}function p(a){if(a)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseover")}),!0;var n="";0<t.opts.tableInsertButtons.length&&(n='<div class="fr-buttons fr-tabs">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var r={buttons:n,rows_columns:function(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',a=1;a<=t.opts.tableInsertMaxSize;a++){for(var n=1;n<=t.opts.tableInsertMaxSize;n++){var r="inline-block";2<a&&!t.helpers.isMobile()&&(r="none");var i="fr-table-cell ";1==a&&1==n&&(i+=" hover"),e+='<span class="fr-command '+i+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+a+'" data-col="'+n+'" data-param1="'+a+'" data-param2="'+n+'" style="display: '+r+';" role="button"><span></span><span class="fr-sr-only">'+a+" &times; "+n+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+"</div></div>"}()},i=t.popups.create("table.insert",r);return t.events.$on(i,"mouseover",".fr-table-size .fr-select-table-size .fr-table-cell",function(e){u(c(e.currentTarget))},!0),function(a){t.events.$on(a,"focus","[tabIndex]",function(e){u(c(e.currentTarget))}),t.events.on("popup.tab",function(a){var n=c(a.currentTarget);if(!t.popups.isVisible("table.insert")||!n.is("span, a"))return!0;var r,i=a.which;if(e.KEYCODE.ARROW_UP==i||e.KEYCODE.ARROW_DOWN==i||e.KEYCODE.ARROW_LEFT==i||e.KEYCODE.ARROW_RIGHT==i){if(n.is("span.fr-table-cell")){var s=n.parent().find("span.fr-table-cell"),o=s.index(n),l=t.opts.tableInsertMaxSize,d=o%l,f=Math.floor(o/l);e.KEYCODE.ARROW_UP==i?f=Math.max(0,f-1):e.KEYCODE.ARROW_DOWN==i?f=Math.min(t.opts.tableInsertMaxSize-1,f+1):e.KEYCODE.ARROW_LEFT==i?d=Math.max(0,d-1):e.KEYCODE.ARROW_RIGHT==i&&(d=Math.min(t.opts.tableInsertMaxSize-1,d+1));var p=f*l+d,h=c(s.get(p));u(h),t.events.disableBlur(),h.focus(),r=!1}}else e.KEYCODE.ENTER==i&&(t.button.exec(n),r=!1);return!1===r&&(a.preventDefault(),a.stopPropagation()),r},!0)}(i),i}function u(e){var a=e.data("row");null!==a&&(a=parseInt(a));var n=e.data("col");null!==n&&(n=parseInt(n));var r=e.parent();r.siblings(".fr-table-size-info").html(a+" &times; "+n),r.find("> span").removeClass("hover fr-active-item");for(var i=1;i<=t.opts.tableInsertMaxSize;i++)for(var s=0;s<=t.opts.tableInsertMaxSize;s++){var o=r.find('> span[data-row="'+i+'"][data-col="'+s+'"]');i<=a&&s<=n?o.addClass("hover"):i<=a+1||i<=2&&!t.helpers.isMobile()?o.css("display","inline-block"):2<i&&!t.helpers.isMobile()&&o.css("display","none")}e.addClass("fr-active-item")}function h(e){if(e)return t.popups.onHide("table.edit",f),!0;if(0<t.opts.tableEditButtons.length){var a={buttons:'<div class="fr-buttons">'.concat(t.button.buildList(t.opts.tableEditButtons),"</div>")},n=t.popups.create("table.edit",a);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&d()}),n}return!1}function g(){if(0<Q().length){var e=J();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function m(e){var a=J();if(0<a.length){if(0<t.$el.find("th.fr-selected-cell").length&&"above"==e)return;var n,r,i,s=C(),o=y(s);if(null==o)return;r="above"==e?o.min_i:o.max_i;var l="<tr>";for(n=0;n<s[r].length;n++)if("below"==e&&r<s.length-1&&s[r][n]==s[r+1][n]||"above"==e&&0<r&&s[r][n]==s[r-1][n]){if(0===n||0<n&&s[r][n]!=s[r][n-1]){var f=c(s[r][n]);f.attr("rowspan",parseInt(f.attr("rowspan"),10)+1)}}else l+='<td style="'+c(s[r][n]).attr("style")+'" ><br></td>';l+="</tr>",i=0<t.$el.find("th.fr-selected-cell").length&&"below"==e?c(a.find("tbody").not(a.find("> table tbody"))):c(a.find("tr").not(a.find("> table tr")).get(r)),"below"==e?"TBODY"==i.attr("tagName")?i.prepend(l):i[0].parentNode&&i[0].insertAdjacentHTML("afterend",l):"above"==e&&(i.before(l),t.popups.isVisible("table.edit")&&d())}}function v(e,t,a){var n,r,i,s,o,l=0,c=C(a);if(e<(t=Math.min(t,c[0].length-1)))for(r=e;r<=t;r++)if(!(e<r&&c[0][r]==c[0][r-1])&&1<(s=Math.min(parseInt(c[0][r].getAttribute("colspan"),10)||1,t-e+1))&&c[0][r]==c[0][r+1])for(l=s-1,n=1;n<c.length;n++)if(c[n][r]!=c[n-1][r]){for(i=r;i<r+s;i++)if(1<(o=parseInt(c[n][i].getAttribute("colspan"),10)||1)&&c[n][i]==c[n][i+1])i+=l=Math.min(l,o-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&b(c,l,"colspan",0,c.length-1,e,t)}function E(e,t,a){var n,r,i,s,o,l=0,c=C(a);if(e<(t=Math.min(t,c.length-1)))for(n=e;n<=t;n++)if(!(e<n&&c[n][0]==c[n-1][0])&&1<(s=Math.min(parseInt(c[n][0].getAttribute("rowspan"),10)||1,t-e+1))&&c[n][0]==c[n+1][0])for(l=s-1,r=1;r<c[0].length;r++)if(c[n][r]!=c[n][r-1]){for(i=n;i<n+s;i++)if(1<(o=parseInt(c[i][r].getAttribute("rowspan"),10)||1)&&c[i][r]==c[i+1][r])i+=l=Math.min(l,o-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&b(c,l,"rowspan",e,t,0,c[0].length-1)}function b(e,t,a,n,r,i,s){var o,l,c;for(o=n;o<=r;o++)for(l=i;l<=s;l++)n<o&&e[o][l]==e[o-1][l]||i<l&&e[o][l]==e[o][l-1]||1<(c=parseInt(e[o][l].getAttribute(a),10)||1)&&(1<c-t?e[o][l].setAttribute(a,c-t):e[o][l].removeAttribute(a))}function A(e,t,a,n,r){E(e,t,r),v(a,n,r)}function T(e){var a=t.$el.find(".fr-selected-cell");"REMOVE"!=e?a.css("background-color",t.helpers.HEXtoRGB(e)):a.css("background-color",""),d()}function C(e){var t=[];return null==(e=e||null)&&0<Q().length&&(e=J()),e&&e.findVisible("tr").not(e.find("> table tr")).each(function(e,a){var n=c(a),r=0;n.find("> th, > td").each(function(a,n){for(var i=c(n),s=parseInt(i.attr("colspan"),10)||1,o=parseInt(i.attr("rowspan"),10)||1,l=e;l<e+o;l++)for(var d=r;d<r+s;d++)t[l]||(t[l]=[]),t[l][d]?r++:t[l][d]=n;r+=s})}),t}function R(e,t){for(var a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++)if(t[a][n]==e)return{row:a,col:n}}function S(e,t,a){for(var n=e+1,r=t+1;n<a.length;){if(a[n][t]!=a[e][t]){n--;break}n++}for(n==a.length&&n--;r<a[e].length;){if(a[e][r]!=a[e][t]){r--;break}r++}return r==a[e].length&&r--,{row:n,col:r}}function L(){t.el.querySelector(".fr-cell-fixed")&&t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")&&t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function _(){var e=t.$el.find(".fr-selected-cell");0<e.length&&e.each(function(){var e=c(this);e.removeClass("fr-selected-cell"),""===e.attr("class")&&e.removeAttr("class")}),L()}function w(){t.events.disableBlur(),t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur(),t.events.enableBlur()}function y(e){var a=t.$el.find(".fr-selected-cell");if(0<a.length){var n,r=e.length,i=0,s=e[0].length,o=0;for(n=0;n<a.length;n++){var l=R(a[n],e),c=S(l.row,l.col,e);r=Math.min(l.row,r),i=Math.max(c.row,i),s=Math.min(l.col,s),o=Math.max(c.col,o)}return{min_i:r,max_i:i,min_j:s,max_j:o}}return null}function I(e){var t=y(e);if(null!=t){var a=c(e[t.min_i][t.min_j]),n=c(e[t.min_i][t.max_j]),r=c(e[t.max_i][t.min_j]);return{left:a.length&&a.offset().left,right:n.length&&n.offset().left+n.outerWidth(),top:a.length&&a.offset().top,bottom:r.length&&r.offset().top+r.outerHeight()}}}function O(e,a){if(c(e).is(a))_(),c(e).addClass("fr-selected-cell");else{w(),t.edit.off();var n=C(),r=R(e,n),i=R(a,n),s=function e(t,a,n,r,i){var s,o,l,d,f=t,p=a,u=n,h=r;for(s=f;s<=p;s++)(1<(parseInt(c(i[s][u]).attr("rowspan"),10)||1)||1<(parseInt(c(i[s][u]).attr("colspan"),10)||1))&&(d=S((l=R(i[s][u],i)).row,l.col,i),f=Math.min(l.row,f),p=Math.max(d.row,p),u=Math.min(l.col,u),h=Math.max(d.col,h)),(1<(parseInt(c(i[s][h]).attr("rowspan"),10)||1)||1<(parseInt(c(i[s][h]).attr("colspan"),10)||1))&&(d=S((l=R(i[s][h],i)).row,l.col,i),f=Math.min(l.row,f),p=Math.max(d.row,p),u=Math.min(l.col,u),h=Math.max(d.col,h));for(o=u;o<=h;o++)(1<(parseInt(c(i[f][o]).attr("rowspan"),10)||1)||1<(parseInt(c(i[f][o]).attr("colspan"),10)||1))&&(d=S((l=R(i[f][o],i)).row,l.col,i),f=Math.min(l.row,f),p=Math.max(d.row,p),u=Math.min(l.col,u),h=Math.max(d.col,h)),(1<(parseInt(c(i[p][o]).attr("rowspan"),10)||1)||1<(parseInt(c(i[p][o]).attr("colspan"),10)||1))&&(d=S((l=R(i[p][o],i)).row,l.col,i),f=Math.min(l.row,f),p=Math.max(d.row,p),u=Math.min(l.col,u),h=Math.max(d.col,h));return f==t&&p==a&&u==n&&h==r?{min_i:t,max_i:a,min_j:n,max_j:r}:e(f,p,u,h,i)}(Math.min(r.row,i.row),Math.max(r.row,i.row),Math.min(r.col,i.col),Math.max(r.col,i.col),n);_(),e.classList.add("fr-cell-fixed"),a.classList.add("fr-cell-handler");for(var o=s.min_i;o<=s.max_i;o++)for(var l=s.min_j;l<=s.max_j;l++)c(n[o][l]).addClass("fr-selected-cell")}}function x(e){var a=null,n=c(e.target);return"TD"==e.target.tagName||"TH"==e.target.tagName?a=e.target:0<n.closest("td",n.closest("tr")[0]).length?a=n.closest("td",n.closest("tr")[0]).get(0):0<n.closest("th",n.closest("thead")[0]).length&&(a=n.closest("th",n.closest("thead")[0]).get(0)),-1===t.$el.html.toString().search(a)?null:a}function F(){_(),t.popups.hide("table.edit")}function k(e){var a=x(e);if("false"==c(a).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(0<Q().length&&!a&&F(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)(3==e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)&&a&&F();else if(i=!0,a){0<Q().length&&!e.shiftKey&&F(),e.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),r=!0;var n=a.tagName.toLowerCase();e.shiftKey&&0<t.$el.find(n+".fr-selected-cell").length?c(t.$el.find(n+".fr-selected-cell").closest("table")).is(c(a).closest("table"))?O(s,a):w():((t.keys.ctrlKey(e)||e.shiftKey)&&(1<Q().length||0===c(a).find(t.selection.element()).length&&!c(a).is(t.selection.element()))&&w(),s=a,0<t.opts.tableEditButtons.length&&O(s,s))}}function N(e){if(t.popups.areVisible())return!0;if(r||t.$tb.is(e.target)||t.$tb.is(c(e.target).closest(".fr-toolbar"))||(0<Q().length&&t.toolbar.enable(),_()),!(1!=e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)&&(i=!1,r&&(r=!1,x(e)||1!=Q().length?0<Q().length&&(t.selection.isCollapsed()?d():(_(),t.edit.on())):_()),l)){l=!1,a.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var n=parseFloat(a.css("left"))+t.opts.tableResizerOffset+t.$wp.offset().left;t.opts.iframe&&(n-=t.$iframe.offset().left),a.data("release-position",n),a.removeData("max-left"),a.removeData("max-right"),function(){var e=a.data("origin"),n=a.data("release-position");if(e!==n){var r=a.data("first"),i=a.data("second"),s=a.data("table"),o=s.outerWidth();if(t.undo.canDo()||t.undo.saveStep(),null!=r&&null!=i){var l,d,f,p=C(s),u=[],h=[],g=[],m=[];for(l=0;l<p.length;l++)d=c(p[l][r]),f=c(p[l][i]),u[l]=d.outerWidth(),g[l]=f.outerWidth(),h[l]=u[l]/o*100,m[l]=g[l]/o*100;for(l=0;l<p.length;l++)if(d=c(p[l][r]),f=c(p[l][i]),p[l][r]!=p[l][i]){var v=(h[l]*(u[l]+n-e)/u[l]).toFixed(4);d.css("width",v+"%"),f.css("width",(h[l]+m[l]-v).toFixed(4)+"%")}}else{var E,b=s.parent(),A=o/b.width()*100,T=(parseInt(s.css("margin-left"),10)||0)/b.width()*100,R=(parseInt(s.css("margin-right"),10)||0)/b.width()*100;"rtl"==t.opts.direction&&0===i||"rtl"!=t.opts.direction&&0!==i?(E=(o+n-e)/o*A,s.css("margin-right","calc(100% - "+Math.round(E).toFixed(4)+"% - "+Math.round(T).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==i||"rtl"!=t.opts.direction&&0===i)&&(E=(o-n+e)/o*A,s.css("margin-left","calc(100% - "+Math.round(E).toFixed(4)+"% - "+Math.round(R).toFixed(4)+"%)")),s.css("width",Math.round(E).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep(),t.events.trigger("table.resized",[s.get(0)])}a.removeData("origin"),a.removeData("release-position"),a.removeData("first"),a.removeData("second"),a.removeData("table")}(),U()}}function D(e){if(!0===r&&0<t.opts.tableEditButtons.length){if(c(e.currentTarget).closest("table").is(J())){if("TD"==e.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void O(s,e.currentTarget);if("TH"==e.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void O(s,e.currentTarget)}w()}}function M(e,a,n,r){for(var i,s=a;s!=t.el&&"TD"!=s.tagName&&"TH"!=s.tagName&&("up"==r?i=s.previousElementSibling:"down"==r&&(i=s.nextElementSibling),!i);)s=s.parentNode;"TD"==s.tagName||"TH"==s.tagName?function(e,a){for(var n=e;n&&"TABLE"!=n.tagName&&n.parentNode!=t.el;)n=n.parentNode;if(n&&"TABLE"==n.tagName){var r=C(c(n));"up"==a?B(R(e,r),n,r):"down"==a&&P(R(e,r),n,r)}}(s,r):i&&("up"==r&&t.selection.setAtEnd(i),"down"==r&&t.selection.setAtStart(i))}function B(e,a,n){0<e.row?t.selection.setAtEnd(n[e.row-1][e.col]):M(0,a,0,"up")}function P(e,a,n){var r=parseInt(n[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<n.length-r?t.selection.setAtStart(n[e.row+r][e.col]):M(0,a,0,"down")}function U(){a&&(a.find("div").css("opacity",0),a.css("top",0),a.css("left",0),a.css("height",0),a.find("div").css("height",0),a.hide())}function W(){n&&n.removeClass("fr-visible").css("left","-9999px")}function K(e,a){if(t.$box.find(".fr-line-breaker").isVisible())return!1;n||q(),t.$box.append(n),n.data("instance",t);var r,i=c(a).find("tr").first(),s=e.pageX,o=0,l=0;if(t.opts.iframe){var d=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),f=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));o+=t.$iframe.offset().left-t.helpers.scrollLeft()+f,l+=t.$iframe.offset().top-t.helpers.scrollTop()+d}i.find("th, td").each(function(){var e=c(this);return e.offset().left<=s&&s<e.offset().left+e.outerWidth()/2?(r=parseInt(n.find("a").css("width"),10),n.css("top",l+e.offset().top-t.$box.offset().top-r-5),n.css("left",o+e.offset().left-t.$box.offset().left-r/2),n.data("selected-cell",e),n.data("position","before"),n.addClass("fr-visible"),!1):e.offset().left+e.outerWidth()/2<=s&&s<e.offset().left+e.outerWidth()?(r=parseInt(n.find("a").css("width"),10),n.css("top",l+e.offset().top-t.$box.offset().top-r-5),n.css("left",o+e.offset().left-t.$box.offset().left+e.outerWidth()-r/2),n.data("selected-cell",e),n.data("position","after"),n.addClass("fr-visible"),!1):void 0})}function H(e,a){if(t.$box.find(".fr-line-breaker").isVisible())return!1;n||q(),t.$box.append(n),n.data("instance",t);var r,i=c(a),s=e.pageY,o=0,l=0;if(t.opts.iframe){var d=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),f=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));o+=t.$iframe.offset().left-t.helpers.scrollLeft()+f,l+=t.$iframe.offset().top-t.helpers.scrollTop()+d}i.find("tr").each(function(){var e=c(this);return e.offset().top<=s&&s<e.offset().top+e.outerHeight()/2?(r=parseInt(n.find("a").css("width"),10),n.css("top",l+e.offset().top-t.$box.offset().top-r/2),n.css("left",o+e.offset().left-t.$box.offset().left-r-5),n.data("selected-cell",e.find("td").first()),n.data("position","above"),n.addClass("fr-visible"),!1):e.offset().top+e.outerHeight()/2<=s&&s<e.offset().top+e.outerHeight()?(r=parseInt(n.find("a").css("width"),10),n.css("top",l+e.offset().top-t.$box.offset().top+e.outerHeight()-r/2),n.css("left",o+e.offset().left-t.$box.offset().left-r-5),n.data("selected-cell",e.find("td").first()),n.data("position","below"),n.addClass("fr-visible"),!1):void 0})}function $(e){o=null;var r=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&function(e,n){var r=c(n),i=r.closest("table"),s=i.parent();if(n&&"TD"!=n.tagName&&"TH"!=n.tagName&&(0<r.closest("td").length?n=r.closest("td"):0<r.closest("th").length&&(n=r.closest("th"))),!n||"TD"!=n.tagName&&"TH"!=n.tagName)a&&r.get(0)!=a.get(0)&&r.parent().get(0)!=a.get(0)&&t.core.sameInstance(a)&&U();else{if(r=c(n),0===t.$el.find(r).length)return!1;var o=r.offset().left-1,d=o+r.outerWidth();if(Math.abs(e.pageX-o)<=t.opts.tableResizerOffset||Math.abs(d-e.pageX)<=t.opts.tableResizerOffset){var f,p,u,h,g,m=C(i),v=R(n,m),E=S(v.row,v.col,m),b=i.offset().top,A=i.outerHeight()-1;"rtl"!=t.opts.direction?e.pageX-o<=t.opts.tableResizerOffset?(u=o,0<v.col?(h=o-Y(v.col-1,m)+t.opts.tableResizingLimit,g=o+Y(v.col,m)-t.opts.tableResizingLimit,f=v.col-1,p=v.col):(f=null,p=0,h=i.offset().left-1-parseInt(i.css("margin-left"),10),g=i.offset().left-1+i.width()-m[0].length*t.opts.tableResizingLimit)):d-e.pageX<=t.opts.tableResizerOffset&&(u=d,E.col<m[E.row].length&&m[E.row][E.col+1]?(h=d-Y(E.col,m)+t.opts.tableResizingLimit,g=d+Y(E.col+1,m)-t.opts.tableResizingLimit,f=E.col,p=E.col+1):(f=E.col,p=null,h=i.offset().left-1+m[0].length*t.opts.tableResizingLimit,g=s.offset().left-1+s.width()+parseFloat(s.css("padding-left")))):d-e.pageX<=t.opts.tableResizerOffset?(u=d,0<v.col?(h=d-Y(v.col,m)+t.opts.tableResizingLimit,g=d+Y(v.col-1,m)-t.opts.tableResizingLimit,f=v.col,p=v.col-1):(f=null,p=0,h=i.offset().left+m[0].length*t.opts.tableResizingLimit,g=s.offset().left-1+s.width()+parseFloat(s.css("padding-left")))):e.pageX-o<=t.opts.tableResizerOffset&&(u=o,E.col<m[E.row].length&&m[E.row][E.col+1]?(h=o-Y(E.col+1,m)+t.opts.tableResizingLimit,g=o+Y(E.col,m)-t.opts.tableResizingLimit,f=E.col+1,p=E.col):(f=E.col,p=null,h=s.offset().left+parseFloat(s.css("padding-left")),g=i.offset().left-1+i.width()-m[0].length*t.opts.tableResizingLimit)),a||(t.shared.$table_resizer||(t.shared.$table_resizer=c(document.createElement("div")).attr("class","fr-table-resizer").html("<div></div>")),a=t.shared.$table_resizer,t.events.$on(a,"mousedown",function(e){return!t.core.sameInstance(a)||(0<Q().length&&F(),1==e.which?(t.selection.save(),l=!0,a.addClass("fr-moving"),w(),t.edit.off(),a.find("div").css("opacity",1),!1):void 0)}),t.events.$on(a,"mousemove",function(e){if(!t.core.sameInstance(a))return!0;l&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),z(e))}),t.events.on("shared.destroy",function(){a.html("").removeData().remove(),a=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),c("body").first().append(a.hide())},!0)),a.data("table",i),a.data("first",f),a.data("second",p),a.data("instance",t),t.$wp.append(a);var T=u-t.win.pageXOffset-t.opts.tableResizerOffset-t.$wp.offset().left,L=b-t.$wp.offset().top+t.$wp.scrollTop();if(t.opts.iframe){var _=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),y=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));T+=t.$iframe.offset().left+y,L+=t.$iframe.offset().top+_,h+=t.$iframe.offset().left,g+=t.$iframe.offset().left}a.data("max-left",h),a.data("max-right",g),a.data("origin",u-t.win.pageXOffset),a.css("top",L),a.css("left",T),a.css("height",A),a.find("div").css("height",A),a.css("padding-left",t.opts.tableResizerOffset),a.css("padding-right",t.opts.tableResizerOffset),a.show()}else t.core.sameInstance(a)&&U()}}(e,r),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.isVisible()||function(e,a){if(0===Q().length){var r,i,s;if(a&&("HTML"==a.tagName||"BODY"==a.tagName||t.node.isElement(a)))for(r=1;r<=t.opts.tableInsertHelperOffset;r++){if(i=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset+r),c(i).hasClass("fr-tooltip"))return!0;if(i&&("TH"==i.tagName||"TD"==i.tagName||"TABLE"==i.tagName)&&(c(i).parents(".fr-wrapper").length||t.opts.iframe)&&"false"!=c(i).closest("table").attr("contenteditable"))return K(e,c(i).closest("table")),!0;if(s=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset+r,e.pageY-t.win.pageYOffset),c(s).hasClass("fr-tooltip"))return!0;if(s&&("TH"==s.tagName||"TD"==s.tagName||"TABLE"==s.tagName)&&(c(s).parents(".fr-wrapper").length||t.opts.iframe)&&"false"!=c(s).closest("table").attr("contenteditable"))return H(e,c(s).closest("table")),!0}t.core.sameInstance(n)&&W()}}(e,r)}function G(){if(l){var e=a.data("table").offset().top-t.win.pageYOffset;if(t.opts.iframe){var n=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top"));e+=t.$iframe.offset().top-t.helpers.scrollTop()+n}a.css("top",e)}}function Y(e,t){var a,n=c(t[0][e]).outerWidth();for(a=1;a<t.length;a++)n=Math.min(n,c(t[a][e]).outerWidth());return n}function V(e,t,a){var n,r=0;for(n=e;n<=t;n++)r+=Y(n,a);return r}function z(e){if(1<Q().length&&i&&w(),!1===i&&!1===r&&!1===l)o&&clearTimeout(o),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(o=setTimeout($,30,e));else if(l){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var s=a.data("max-left"),c=a.data("max-right");s<=n&&n<=c?a.css("left",n-t.opts.tableResizerOffset-t.$wp.offset().left):n<s&&parseFloat(a.css("left"),10)>s-t.opts.tableResizerOffset?a.css("left",s-t.opts.tableResizerOffset-t.$wp.offset().left):c<n&&parseFloat(a.css("left"),10)<c-t.opts.tableResizerOffset&&a.css("left",c-t.opts.tableResizerOffset-t.$wp.offset().left)}else i&&W()}function j(a){t.node.isEmpty(a.get(0))?a.prepend(e.MARKERS):a.prepend(e.START_MARKER).append(e.END_MARKER)}function q(){t.shared.$ti_helper||(t.shared.$ti_helper=c(document.createElement("div")).attr("class","fr-insert-helper").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=n.data("selected-cell"),a=n.data("position"),r=n.data("instance")||t;"before"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertColumn(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"after"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertColumn(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"above"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertRow(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"below"==a&&(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertRow(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()),W()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(c(t.o_win),"scroll",function(){W()},!0),t.events.$on(t.$wp,"scroll",function(){W()},!0)),n=t.shared.$ti_helper,t.events.on("destroy",function(){n=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function X(){s=null,clearTimeout(o)}function Q(){return t.el.querySelectorAll(".fr-selected-cell")}function J(){var e=Q();if(e.length){for(var a=e[0];a&&"TABLE"!=a.tagName&&a.parentNode!=t.el;)a=a.parentNode;return a&&"TABLE"==a.tagName?c(a):c([])}return c([])}return{_init:function(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){l=r=i=!1,t.events.$on(t.$el,"mousedown",k),t.popups.onShow("image.edit",function(){_(),r=i=!1}),t.popups.onShow("link.edit",function(){_(),r=i=!1}),t.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&_()}),t.events.$on(t.$el,"mouseover","th, td",D),t.events.$on(t.$win,"mouseup",N),t.opts.iframe&&t.events.$on(c(t.o_win),"mouseup",N),t.events.$on(t.$win,"mousemove",z),t.events.$on(c(t.o_win),"scroll",G),t.events.on("contentChanged",function(){0<Q().length&&(d(),t.$el.find("img").on("load.selected-cells",function(){c(this).off("load.selected-cells"),0<Q().length&&d()}))}),t.events.$on(c(t.o_win),"resize",function(){_()}),t.events.on("toolbar.esc",function(){if(0<Q().length)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(c(t.o_win),"keydown",function(){i&&r&&(r=i=!1,t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell").last().get(0)),t.selection.restore(),_())}),t.events.$on(t.$el,"keydown",function(a){a.shiftKey?!1===function(a){var n=Q();if(null!=n&&0<n.length){var r,i=C(),s=a.which,o=R(1==n.length?r=n[0]:(r=t.el.querySelector(".fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")),i);if(e.KEYCODE.ARROW_RIGHT==s){if(o.col<i[0].length-1)return O(r,i[o.row][o.col+1]),!1}else if(e.KEYCODE.ARROW_DOWN==s){if(o.row<i.length-1)return O(r,i[o.row+1][o.col]),!1}else if(e.KEYCODE.ARROW_LEFT==s){if(0<o.col)return O(r,i[o.row][o.col-1]),!1}else if(e.KEYCODE.ARROW_UP==s&&0<o.row)return O(r,i[o.row-1][o.col]),!1}}(a)&&setTimeout(function(){d()},0):function(a){var n=a.which,r=t.selection.blocks();if(r.length&&("TD"==(r=r[0]).tagName||"TH"==r.tagName)){for(var i=r;i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName&&(e.KEYCODE.ARROW_LEFT==n||e.KEYCODE.ARROW_UP==n||e.KEYCODE.ARROW_RIGHT==n||e.KEYCODE.ARROW_DOWN==n)&&(0<Q().length&&F(),t.browser.webkit&&(e.KEYCODE.ARROW_UP==n||e.KEYCODE.ARROW_DOWN==n))){var s=t.selection.ranges(0).startContainer;if(s.nodeType==Node.TEXT_NODE&&(e.KEYCODE.ARROW_UP==n&&(s.previousSibling&&"BR"!==s.previousSibling.tagName||s.previousSibling&&"BR"===s.previousSibling.tagName&&s.previousSibling.previousSibling)||e.KEYCODE.ARROW_DOWN==n&&(s.nextSibling&&"BR"!==s.nextSibling.tagName||s.nextSibling&&"BR"===s.nextSibling.tagName&&s.nextSibling.nextSibling)))return;a.preventDefault(),a.stopPropagation();var o=C(c(i)),l=R(r,o);e.KEYCODE.ARROW_UP==n?B(l,i,o):e.KEYCODE.ARROW_DOWN==n&&P(l,i,o),t.selection.restore()}}}(a)}),t.events.on("keydown",function(a){if(!1===function(a){if(a.which==e.KEYCODE.TAB){var n;if(0<Q().length)n=t.$el.find(".fr-selected-cell").last();else{var r=t.selection.element();"TD"==r.tagName||"TH"==r.tagName?n=c(r):r!=t.el&&(0<c(r).parentsUntil(t.$el,"td").length?n=c(r).parents("td").first():0<c(r).parentsUntil(t.$el,"th").length&&(n=c(r).parents("th").first()))}if(n)return a.preventDefault(),!!(0===t.selection.get().focusOffset&&0<c(t.selection.element()).parentsUntil(t.$el,"ol, ul").length&&(0<c(t.selection.element()).closest("li").prev().length||c(t.selection.element()).is("li")&&0<c(t.selection.element()).prev().length))||(F(),a.shiftKey?0<n.prev().length?j(n.prev()):0<n.closest("tr").length&&0<n.closest("tr").prev().length?j(n.closest("tr").prev().find("td").last()):0<n.closest("tbody").length&&0<n.closest("table").find("thead tr").length&&j(n.closest("table").find("thead tr th").last()):0<n.next().length?j(n.next()):0<n.closest("tr").length&&0<n.closest("tr").next().length?j(n.closest("tr").next().find("td").first()):0<n.closest("thead").length&&0<n.closest("table").find("tbody tr").length?j(n.closest("table").find("tbody tr td").first()):(n.addClass("fr-selected-cell"),m("below"),_(),j(n.closest("tr").next().find("td").first())),t.selection.restore(),!1)}}(a))return!1;var n=Q();if(0<n.length){if(0<n.length&&t.keys.ctrlKey(a)&&a.which==e.KEYCODE.A)return _(),t.popups.isVisible("table.edit")&&t.popups.hide("table.edit"),n=[],!0;if(a.which==e.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return _(),t.popups.hide("table.edit"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),!(n=[]);if(1<n.length&&(a.which==e.KEYCODE.BACKSPACE||a.which==e.KEYCODE.DELETE)){t.undo.saveStep();for(var r=0;r<n.length;r++)c(n[r]).html("<br>"),r==n.length-1&&c(n[r]).prepend(e.MARKERS);return t.selection.restore(),t.undo.saveStep(),!(n=[])}if(1<n.length&&a.which!=e.KEYCODE.F10&&!t.keys.isBrowserAction(a))return a.preventDefault(),!(n=[])}else if(!(n=[])===function(a){if(a.altKey&&a.which==e.KEYCODE.SPACE){var n,r=t.selection.element();if("TD"==r.tagName||"TH"==r.tagName?n=r:0<c(r).closest("td").length?n=c(r).closest("td").get(0):0<c(r).closest("th").length&&(n=c(r).closest("th").get(0)),n)return a.preventDefault(),O(n,n),d(),!1}}(a))return!1},!0);var a=[];t.events.on("html.beforeGet",function(){a=Q();for(var e=0;e<a.length;e++)a[e].className=(a[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.afterGet",function(){for(var e=0;e<a.length;e++)a[e].className=(a[e].className?a[e].className.trim()+" ":"")+"fr-selected-cell";a=[]}),p(!0),h(!0)}t.events.on("destroy",X)},insert:function(a,n){var r,i,s="<table "+(t.opts.tableDefaultWidth?'style="width: '+t.opts.tableDefaultWidth+';" ':"")+'class="fr-inserted-table"><tbody>',o=100/n;for(r=0;r<a;r++){for(s+="<tr>",i=0;i<n;i++)s+="<td"+(t.opts.tableDefaultWidth?' style="width: '+o.toFixed(4)+'%;"':"")+">",0===r&&0===i&&(s+=e.MARKERS),s+="<br></td>";s+="</tr>"}s+="</tbody></table>",t.html.insert(s),t.selection.restore();var l=t.$el.find(".fr-inserted-table");l.removeClass("fr-inserted-table"),t.events.trigger("table.inserted",[l.get(0)])},remove:g,insertRow:m,deleteRow:function(){var e=J();if(0<e.length){var a,n,r,i=C(),s=y(i);if(null==s)return;if(0===s.min_i&&s.max_i==i.length-1)g();else{for(a=s.max_i;a>=s.min_i;a--){for(r=c(e.find("tr").not(e.find("> table tr")).get(a)),n=0;n<i[a].length;n++)if(0===n||i[a][n]!=i[a][n-1]){var o=c(i[a][n]);if(1<parseInt(o.attr("rowspan"),10)){var l=parseInt(o.attr("rowspan"),10)-1;1==l?o.removeAttr("rowspan"):o.attr("rowspan",l)}if(a<i.length-1&&i[a][n]==i[a+1][n]&&(0===a||i[a][n]!=i[a-1][n])){for(var d=i[a][n],f=n;0<f&&i[a][f]==i[a][f-1];)f--;0===f?c(e.find("tr").not(e.find("> table tr")).get(a+1)).prepend(d):c(i[a+1][f-1])[0].parentNode&&c(i[a+1][f-1])[0].insertAdjacentElement("afterend",d)}}var p=r.parent();r.remove(),0===p.find("tr").length&&p.remove(),i=C(e)}A(0,i.length-1,0,i[0].length-1,e),0<s.min_i?t.selection.setAtEnd(i[s.min_i-1][0]):t.selection.setAtEnd(i[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}},insertColumn:function(e){var a=J();if(0<a.length){var n,r=C(),i=y(r);n="before"==e?i.min_j:i.max_j;var s,o=100/r[0].length,l=100/(r[0].length+1);a.find("th, td").each(function(){(s=c(this)).data("old-width",s.outerWidth()/a.outerWidth()*100)}),a.find("tr").not(a.find("> table tr")).each(function(t){for(var a,i=c(this),s=0,d=0;s-1<n;){if(!(a=i.find("> th, > td").get(d))){a=null;break}a==r[t][s]?(s+=parseInt(c(a).attr("colspan"),10)||1,d++):(s+=parseInt(c(r[t][s]).attr("colspan"),10)||1,"after"==e&&(a=0===d?-1:i.find("> th, > td").get(d-1)))}var f,p=c(a);if("after"==e&&n<s-1||"before"==e&&0<n&&r[t][n]==r[t][n-1]){if(0===t||0<t&&r[t][n]!=r[t-1][n]){var u=parseInt(p.attr("colspan"),10)+1;p.attr("colspan",u),p.css("width",(p.data("old-width")*l/o+l).toFixed(4)+"%"),p.removeData("old-width")}}else f=0<i.find("th").length?'<th style="width: '+l.toFixed(4)+'%;"><br></th>':'<td style="width: '+l.toFixed(4)+'%;"><br></td>',-1==a?i.prepend(f):null==a?i.append(f):"before"==e?p.before(f):"after"==e&&p[0].parentNode&&p[0].insertAdjacentHTML("afterend",f)}),a.find("th, td").each(function(){(s=c(this)).data("old-width")&&(s.css("width",(s.data("old-width")*l/o).toFixed(4)+"%"),s.removeData("old-width"))}),t.popups.isVisible("table.edit")&&d()}},deleteColumn:function(){var e=J();if(0<e.length){var a,n,r,i=C(),s=y(i);if(null==s)return;if(0===s.min_j&&s.max_j==i[0].length-1)g();else{var o=0;for(a=0;a<i.length;a++)for(n=0;n<i[0].length;n++)(r=c(i[a][n])).hasClass("fr-selected-cell")||(r.data("old-width",r.outerWidth()/e.outerWidth()*100),(n<s.min_j||n>s.max_j)&&(o+=r.outerWidth()/e.outerWidth()*100));for(o/=i.length,n=s.max_j;n>=s.min_j;n--)for(a=0;a<i.length;a++)if(0===a||i[a][n]!=i[a-1][n])if(r=c(i[a][n]),1<(parseInt(r.attr("colspan"),10)||1)){var l=parseInt(r.attr("colspan"),10)-1;1==l?r.removeAttr("colspan"):r.attr("colspan",l),r.css("width",(100*(r.data("old-width")-Y(n,i))/o).toFixed(4)+"%"),r.removeData("old-width")}else{var d=c(r.parent().get(0));r.remove(),0===d.find("> th, > td").length&&(0===d.prev().length||0===d.next().length||d.prev().find("> th[rowspan], > td[rowspan]").length<d.prev().find("> th, > td").length)&&d.remove()}A(0,i.length-1,0,i[0].length-1,e),0<s.min_j?t.selection.setAtEnd(i[s.min_i][s.min_j-1]):t.selection.setAtEnd(i[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),e.find("th, td").each(function(){(r=c(this)).data("old-width")&&(r.css("width",(100*r.data("old-width")/o).toFixed(4)+"%"),r.removeData("old-width"))})}}},mergeCells:function(){if(1<Q().length&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){L();var e,a,n=y(C());if(null==n)return;var r=t.$el.find(".fr-selected-cell"),i=c(r[0]),s=i.parent().find(".fr-selected-cell"),o=i.closest("table"),l=i.html(),f=0;for(e=0;e<s.length;e++)f+=c(s[e]).outerWidth();for(i.css("width",Math.min(100,f/o.outerWidth()*100).toFixed(4)+"%"),n.min_j<n.max_j&&i.attr("colspan",n.max_j-n.min_j+1),n.min_i<n.max_i&&i.attr("rowspan",n.max_i-n.min_i+1),e=1;e<r.length;e++)"<br>"!=(a=c(r[e])).html()&&""!==a.html()&&(l+="<br>"+a.html()),a.remove();i.html(l),t.selection.setAtEnd(i.get(0)),t.selection.restore(),t.toolbar.enable(),E(n.min_i,n.max_i,o);var p=o.find("tr:empty");for(e=p.length-1;0<=e;e--)c(p[e]).remove();v(n.min_j,n.max_j,o),d()}},splitCellVertically:function(){if(1==Q().length){var e=t.$el.find(".fr-selected-cell"),a=parseInt(e.attr("colspan"),10)||1,n=e.parent().outerWidth(),r=e.outerWidth(),i=e.clone().html("<br>"),s=C(),o=R(e.get(0),s);if(1<a){var l=Math.ceil(a/2);r=V(o.col,o.col+l-1,s)/n*100;var d=V(o.col+l,o.col+a-1,s)/n*100;1<l?e.attr("colspan",l):e.removeAttr("colspan"),1<a-l?i.attr("colspan",a-l):i.removeAttr("colspan"),e.css("width",r.toFixed(4)+"%"),i.css("width",d.toFixed(4)+"%")}else{var f;for(f=0;f<s.length;f++)if(0===f||s[f][o.col]!=s[f-1][o.col]){var p=c(s[f][o.col]);if(!p.is(e)){var u=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",u)}}r=r/n*100/2,e.css("width",r.toFixed(4)+"%"),i.css("width",r.toFixed(4)+"%")}e[0].parentNode&&e[0].insertAdjacentElement("afterend",i[0]),_(),t.popups.hide("table.edit")}},splitCellHorizontally:function(){if(1==Q().length){var e=t.$el.find(".fr-selected-cell"),a=e.parent(),n=e.closest("table"),r=parseInt(e.attr("rowspan"),10),i=C(),s=R(e.get(0),i),o=e.clone().html("<br>");if(1<r){var l=Math.ceil(r/2);1<l?e.attr("rowspan",l):e.removeAttr("rowspan"),1<r-l?o.attr("rowspan",r-l):o.removeAttr("rowspan");for(var d=s.row+l,f=0===s.col?s.col:s.col-1;0<=f&&(i[d][f]==i[d][f-1]||0<d&&i[d][f]==i[d-1][f]);)f--;-1==f?c(n.find("tr").not(n.find("> table tr")).get(d)).prepend(o):c(i[d][f])[0].parentNode&&c(i[d][f])[0].insertAdjacentElement("afterend",o[0])}else{var p,u=c(document.createElement("tr")).append(o);for(p=0;p<i[0].length;p++)if(0===p||i[s.row][p]!=i[s.row][p-1]){var h=c(i[s.row][p]);h.is(e)||h.attr("rowspan",(parseInt(h.attr("rowspan"),10)||1)+1)}a[0].parentNode&&a[0].insertAdjacentElement("afterend",u[0])}_(),t.popups.hide("table.edit")}},addHeader:function(){var e=J();if(0<e.length&&0===e.find("th").length){var t,a="<thead><tr>",n=0;for(e.find("tr").first().find("> td").each(function(){var e=c(this);n+=parseInt(e.attr("colspan"),10)||1}),t=0;t<n;t++)a+="<th><br></th>";a+="</tr></thead>",e.prepend(a),d()}},removeHeader:function(){var e=J(),a=e.find("thead");if(0<a.length)if(0===e.find("tbody tr").length)g();else if(a.remove(),0<Q().length)d();else{t.popups.hide("table.edit");var n=e.find("tbody tr").first().find("td").first().get(0);n&&(t.selection.setAtEnd(n),t.selection.restore())}},setBackground:T,showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),a=t.popups.get("table.insert");if(a||(a=p()),!a.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var n=t.button.getPosition(e),r=n.left,i=n.top;t.popups.show("table.insert",r,i,e.outerHeight())}},showEditPopup:d,showColorsPopup:function a(){var n=C();if(n){var r=t.popups.get("table.colors");r||(r=function(){var n="";0<t.opts.tableColorsButtons.length&&(n='<div class="fr-buttons fr-tabs">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var r="";t.opts.colorsHEXInput&&(r='<div class="fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'+t.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">'+t.language.translate("OK")+"</button></div></div>");var i,s={buttons:n,colors:function(){for(var e='<div class="fr-color-set fr-table-colors">',a=0;a<t.opts.tableColors.length;a++)0!==a&&a%t.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=t.opts.tableColors[a]?e+='<span class="fr-command" style="background: '+t.opts.tableColors[a]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[a]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[a]+"&nbsp;&nbsp;&nbsp;</span></span>":e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+"</div>"}(),custom_color:r},o=t.popups.create("table.colors",s);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&a()}),i=o,t.events.on("popup.tab",function(a){var n=c(a.currentTarget);if(!t.popups.isVisible("table.colors")||!n.is("span"))return!0;var r=a.which,s=!0;if(e.KEYCODE.TAB==r){var o=i.find(".fr-buttons");s=!t.accessibility.focusToolbar(o,!!a.shiftKey)}else if(e.KEYCODE.ARROW_UP==r||e.KEYCODE.ARROW_DOWN==r||e.KEYCODE.ARROW_LEFT==r||e.KEYCODE.ARROW_RIGHT==r){var l=n.parent().find("span.fr-command"),d=l.index(n),f=t.opts.colorsStep,p=Math.floor(l.length/f),u=d%f,h=Math.floor(d/f)*f+u,g=p*f;e.KEYCODE.ARROW_UP==r?h=((h-f)%g+g)%g:e.KEYCODE.ARROW_DOWN==r?h=(h+f)%g:e.KEYCODE.ARROW_LEFT==r?h=((h-1)%g+g)%g:e.KEYCODE.ARROW_RIGHT==r&&(h=(h+1)%g);var m=c(l.get(h));t.events.disableBlur(),m.focus(),s=!1}else e.KEYCODE.ENTER==r&&(t.button.exec(n),s=!1);return!1===s&&(a.preventDefault(),a.stopPropagation()),s},!0),o}()),t.popups.setContainer("table.colors",t.$sc);var i=I(n),s=(i.left+i.right)/2,o=i.bottom;!function(){var e=t.popups.get("table.colors"),a=t.$el.find(".fr-selected-cell").first(),n=t.helpers.RGBToHex(a.css("background-color")),r=e.find(".fr-table-colors-hex-layer input");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+n+'"]').addClass("fr-selected-color fr-active-item"),r.val(n).trigger("change")}(),t.popups.show("table.colors",s,o,i.bottom-i.top,!0)}},back:function(){0<Q().length?d():(t.popups.hide("table.insert"),t.toolbar.showInline())},verticalAlign:function(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)},horizontalAlign:function(e){t.$el.find(".fr-selected-cell").css("text-align",e)},applyStyle:function(e,t,a,n){if(0<t.length){if(!a){var r=Object.keys(n);r.splice(r.indexOf(e),1),t.removeClass(r.join(" "))}t.toggleClass(e)}},selectedTable:J,selectedCells:Q,customColor:function(){var e=t.popups.get("table.colors").find(".fr-table-colors-hex-layer input");e.length&&T(e.val())},selectCells:O}},e.DefineIcon("insertTable",{NAME:"table",SVG_KEY:"insertTable"}),e.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.RegisterCommand("tableInsert",{callback:function(e,t,a){this.table.insert(t,a),this.popups.hide("table.insert")}}),e.DefineIcon("tableHeader",{NAME:"header",FA5NAME:"heading",SVG_KEY:"tableHeader"}),e.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.DefineIcon("tableRows",{NAME:"bars",SVG_KEY:"row"}),e.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableRows.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.language.translate(a[n])+"</a></li>");return t+"</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90",SVG_KEY:"columns"}),e.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableColumns.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.language.translate(a[n])+"</a></li>");return t+"</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.DefineIcon("tableCells",{NAME:"square-o",FA5NAME:"square",SVG_KEY:"cellOptions"}),e.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCells.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.language.translate(a[n])+"</a></li>");return t+"</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){1<this.$el.find(".fr-selected-cell").length?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.DefineIcon("tableRemove",{NAME:"trash",SVG_KEY:"removeTable"}),e.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.DefineIcon("tableStyle",{NAME:"paint-brush",SVG_KEY:"tableStyle"}),e.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,t){var a=this.$,n=this.$el.find(".fr-selected-cell").closest("table");n&&t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=n.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),e.DefineIcon("tableCellBackground",{NAME:"tint",SVG_KEY:"cellBackground"}),e.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.DefineIcon("tableBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v",FA5NAME:"arrows-alt-v",SVG_KEY:"verticalAlignMiddle"}),e.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCellVerticalAlign.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+n.toLowerCase()+'" title="'+this.language.translate(a[n])+'">'+this.language.translate(n)+"</a></li>");return t+"</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("align-center",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.DefineIcon("align-justify",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCellHorizontalAlign.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(a[n])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(e){var t=this.table.selectedCells(),a=this.$;t.length&&e.find("> *").first().replaceWith(this.icon.create("align-"+this.helpers.getAlignment(a(t[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell").first())+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.DefineIcon("tableCellStyle",{NAME:"magic",SVG_KEY:"cellStyle"}),e.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+a+'" title="'+this.language.translate(t[a])+'">'+this.language.translate(t[a])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,t){var a=this.$,n=this.$el.find(".fr-selected-cell").first();n&&t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=n.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),e.RegisterCommand("tableCellBackgroundCustomColor",{title:"OK",undo:!0,callback:function(){this.table.customColor()}}),e.DefineIcon("tableColorRemove",{NAME:"eraser",SVG_KEY:"remove"}),e.URLRegEx="(^| |\\u00A0)("+e.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\.[a-z0-9+-_]{1,}))$",e.PLUGINS.url=function(t){var a=t.$,n=null;function r(e,a,r){for(var i="";r.length&&"."==r[r.length-1];)i+=".",r=r.substring(0,r.length-1);var s=r;if(t.opts.linkConvertEmailAddress)t.helpers.isEmail(s)&&!/^mailto:.*/i.test(s)&&(s="mailto:"+s);else if(t.helpers.isEmail(s))return a+r;return/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(s)||(s="//"+s),(a||"")+"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(n?' rel="'+n+'"':"")+' data-fr-linked="true" href="'+s+'">'+r.replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+i}function i(){return new RegExp(e.URLRegEx,"gi")}function s(e){return t.opts.linkAlwaysNoFollow&&(n="nofollow"),t.opts.linkAlwaysBlank&&(t.opts.linkNoOpener&&(n?n+=" noopener":n="noopener"),t.opts.linkNoReferrer&&(n?n+=" noreferrer":n="noreferrer")),e.replace(i(),r)}function o(e){var t=e.split(" ");return t[t.length-1]}function l(){var e=t.selection.ranges(0),n=e.startContainer;if(!n||n.nodeType!==Node.TEXT_NODE||e.startOffset!==(n.textContent||"").length)return!1;if(function e(a){return!!a&&("A"===a.tagName||!(!a.parentNode||a.parentNode==t.el)&&e(a.parentNode))}(n))return!1;if(i().test(o(n.textContent))){a(n).before(s(n.textContent));var r=a(n.parentNode).find("a[data-fr-linked]");r.removeAttr("data-fr-linked"),n.parentNode.removeChild(n),t.events.trigger("url.linked",[r.get(0)])}else if(n.textContent.split(" ").length<=2&&n.previousSibling&&"A"===n.previousSibling.tagName){var l=n.previousSibling.innerText+n.textContent;i().test(o(l))&&(a(n.previousSibling).replaceWith(s(l)),n.parentNode.removeChild(n))}}return{_init:function(){t.events.on("keypress",function(e){!t.selection.isCollapsed()||"."!=e.key&&")"!=e.key&&"("!=e.key||l()},!0),t.events.on("keydown",function(a){var n=a.which;!t.selection.isCollapsed()||n!=e.KEYCODE.ENTER&&n!=e.KEYCODE.SPACE||l()},!0),t.events.on("paste.beforeCleanup",function(e){if(t.helpers.isURL(e)){var a=null;return t.opts.linkAlwaysBlank&&(t.opts.linkNoOpener&&(a?a+=" noopener":a="noopener"),t.opts.linkNoReferrer&&(a?a+=" noreferrer":a="noreferrer")),"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(a?' rel="'+a+'"':"")+' href="'+e+'" >'+e+"</a>"}})}}},Object.assign(e.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(e.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoResponsive:!1,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:null}),e.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1?$2",html:'<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.VIDEO_EMBED_REGEX=/^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i,e.PLUGINS.video=function(t){var a,n,r,i,s,o,l=t.$,c="https://i.froala.com/upload",d=2,f=3,p=4,u=5,h=6,g={};function m(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var a=e.find(".fr-video-embed-layer textarea");a.val("").trigger("change"),(a=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function v(){var e=t.popups.get("video.edit");if(e||(e=function(){var e="";if(0<t.opts.videoEditButtons.length){t.opts.videoResponsive&&(-1<t.opts.videoEditButtons.indexOf("videoSize")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoSize"),1),-1<t.opts.videoEditButtons.indexOf("videoDisplay")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoDisplay"),1),-1<t.opts.videoEditButtons.indexOf("videoAlign")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoAlign"),1));var a={buttons:e+='<div class="fr-buttons"> \n      '.concat(t.button.buildList(t.opts.videoEditButtons)," \n      </div>")},n=t.popups.create("video.edit",a);return t.events.$on(t.$wp,"scroll.video-edit",function(){i&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),_(i))}),n}return!1}()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var a=i.find("iframe, embed, video"),n=a.offset().left+a.outerWidth()/2,r=a.offset().top+a.outerHeight();t.popups.show("video.edit",n,r,a.outerHeight(),!0)}}function E(e){if(e)return t.popups.onRefresh("video.insert",m),t.popups.onHide("video.insert",q),!0;var a="";t.opts.videoUpload||-1===t.opts.videoInsertButtons.indexOf("videoUpload")||t.opts.videoInsertButtons.splice(t.opts.videoInsertButtons.indexOf("videoUpload"),1);var n=t.button.buildList(t.opts.videoInsertButtons);""!==n&&(a='<div class="fr-buttons">'+n+"</div>");var r,i="",s=t.opts.videoInsertButtons.indexOf("videoUpload"),o=t.opts.videoInsertButtons.indexOf("videoByURL"),c=t.opts.videoInsertButtons.indexOf("videoEmbed");0<=o&&(r=" fr-active",(s<o&&0<=s||c<o&&0<=c)&&(r=""),i='<div class="fr-video-by-url-layer fr-layer'+r+'" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d="";0<=c&&(r=" fr-active",(s<c&&0<=s||o<c&&0<=o)&&(r=""),d='<div class="fr-video-embed-layer fr-layer'+r+'" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var f="";0<=s&&(r=" fr-active",(c<s&&0<=c||o<s&&0<=o)&&(r=""),f='<div class="fr-video-upload-layer fr-layer'+r+'" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var p={buttons:a,by_url_layer:i,embed_layer:d,upload_layer:f,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},u=t.popups.create("video.insert",p);return function(e){t.events.$on(e,"dragover dragenter",".fr-video-upload-layer",function(){return l(this).addClass("fr-drop"),!1},!0),t.events.$on(e,"dragleave dragend",".fr-video-upload-layer",function(){return l(this).removeClass("fr-drop"),!1},!0),t.events.$on(e,"drop",".fr-video-upload-layer",function(a){a.preventDefault(),a.stopPropagation(),l(this).removeClass("fr-drop");var n=a.originalEvent.dataTransfer;if(n&&n.files){var r=e.data("instance")||t;r.events.disableBlur(),r.video.upload(n.files),r.events.enableBlur()}},!0),t.helpers.isIOS()&&t.events.$on(e,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){l(this).trigger("click")},!0),t.events.$on(e,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var a=e.data("instance")||t;a.events.disableBlur(),e.find("input:focus").blur(),a.events.enableBlur(),a.video.upload(this.files)}l(this).val("")},!0)}(u),u}function b(e){t.events.focus(!0),t.selection.restore();var a=!1;i&&(j(),a=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var n=t.$el.find(".fr-jiv");n.removeClass("fr-jiv"),n.toggleClass("fr-rv",t.opts.videoResponsive),X(n,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),n.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(a?"video.replaced":"video.inserted",[n])}function A(){var e=l(this);t.popups.hide("video.insert"),e.removeClass("fr-uploading"),e.parent().next().is("br")&&e.parent().next().remove(),_(e.parent()),t.events.trigger("video.loaded",[e.parent()])}function T(e,a,n,r,i){t.edit.off(),S("Loading video"),a&&(e=t.helpers.sanitizeURL(e));C("Loading video"),function(){var a,s;if(r){t.undo.canDo()||r.find("video").hasClass("fr-uploading")||t.undo.saveStep();var o=r.find("video").data("fr-old-src"),c=r.data("fr-replaced");r.data("fr-replaced",!1),t.$wp?((a=r.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"),a.find("video").off("canplay"),o&&r.find("video").attr("src",o),r.replaceWith(a)):a=r;for(var d=a.find("video").get(0).attributes,f=0;f<d.length;f++){var p=d[f];0===p.nodeName.indexOf("data-")&&a.find("video").removeAttr(p.nodeName)}if(void 0!==n)for(s in n)n.hasOwnProperty(s)&&"link"!=s&&a.find("video").attr("data-"+s,n[s]);a.find("video").on("canplay",A),a.find("video").attr("src",e),t.edit.on(),D(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(c?"video.replaced":"video.inserted",[a,i])}else a=function(e,a,n){var r,i="";if(a&&void 0!==a)for(r in a)a.hasOwnProperty(r)&&"link"!=r&&(i+=" data-"+r+'="'+a[r]+'"');var s=t.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var o=l(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")).html('<video src="'+e+'" '+i+(s?' style="width: '+s+';" ':"")+" controls>"+t.language.translate("Your browser does not support HTML5 video.")+"</video>");o.toggleClass("fr-draggable",t.opts.videoMove),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var c=t.$el.find(".fr-marker");return t.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(o),t.selection.clear(),o.find("video").get(0).readyState>o.find("video").get(0).HAVE_FUTURE_DATA||t.helpers.isIOS()?n.call(o.find("video").get(0)):o.find("video").on("canplaythrough load",n),o}(e,n,A),D(),t.undo.saveStep(),t.events.trigger("video.inserted",[a,i])}()}function C(e){var a=t.popups.get("video.insert");if(a||(a=E()),a.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),a.find(".fr-video-progress-bar-layer").addClass("fr-active"),a.find(".fr-buttons").hide(),i){var n=i.find("video");t.popups.setContainer("video.insert",t.$sc);var r=n.offset().left,s=n.offset().top+n.height();t.popups.show("video.insert",r,s,n.outerHeight())}void 0===e&&S(t.language.translate("Uploading"),0)}function R(e){var a=t.popups.get("video.insert");if(a&&(a.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),a.find(".fr-video-progress-bar-layer").removeClass("fr-active"),a.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&i){var n=i;P(!0),t.selection.setAfter(n.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function S(e,a){var n=t.popups.get("video.insert");if(n){var r=n.find(".fr-video-progress-bar-layer");r.find("h3").text(e+(a?" "+a+"%":"")),r.removeClass("fr-error"),a?(r.find("div").removeClass("fr-indeterminate"),r.find("div > span").css("width",a+"%")):r.find("div").addClass("fr-indeterminate")}}function L(e){C();var a=t.popups.get("video.insert").find(".fr-video-progress-bar-layer");a.addClass("fr-error");var n=a.find("h3");n.text(e),t.events.disableBlur(),n.focus()}function _(e){B.call(e.get(0))}function w(){$(p,this.response||this.responseText||this.responseXML)}function y(e){if(e.lengthComputable){var a=e.loaded/e.total*100|0;S(t.language.translate("Uploading"),a)}}function I(){t.edit.on(),R(!0)}function O(e){if(!t.core.sameInstance(r))return!0;e.preventDefault(),e.stopPropagation();var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),s=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!i||!s)return!1;if("mousedown"==e.type){var o=t.$oel.get(0).ownerDocument,c=o.defaultView||o.parentWindow,d=!1;try{d=c.location!=c.parent.location&&!(c.$&&c.$.FE)}catch(e){}d&&c.frameElement&&(i+=t.helpers.getPX(l(c.frameElement).offset().left)+c.frameElement.clientLeft,s=e.clientY+t.helpers.getPX(l(c.frameElement).offset().top)+c.frameElement.clientTop)}t.undo.canDo()||t.undo.saveStep(),(n=l(this)).data("start-x",i),n.data("start-y",s),a.show(),t.popups.hideAll(),W()}function x(e){if(!t.core.sameInstance(r))return!0;if(n){e.preventDefault();var a=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),s=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!a||!s)return!1;var o=n.data("start-x"),l=n.data("start-y");n.data("start-x",a),n.data("start-y",s);var c=a-o,d=s-l,f=i.find("iframe, embed, video"),p=f.width(),u=f.height();(n.hasClass("fr-hnw")||n.hasClass("fr-hsw"))&&(c=0-c),(n.hasClass("fr-hnw")||n.hasClass("fr-hne"))&&(d=0-d),f.css("width",p+c),f.css("height",u+d),f.removeAttr("width"),f.removeAttr("height"),M()}}function F(e){if(!t.core.sameInstance(r))return!0;n&&i&&(e&&e.stopPropagation(),n=null,a.hide(),M(),v(),t.undo.saveStep())}function k(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function N(e,t,a,n){return e.pageX=t,e.pageY=t,O.call(this,e),e.pageX=e.pageX+a*Math.floor(Math.pow(1.1,n)),e.pageY=e.pageY+a*Math.floor(Math.pow(1.1,n)),x.call(this,e),F.call(this,e),++n}function D(){var e,a=Array.prototype.slice.call(t.el.querySelectorAll("video, .fr-video > *")),n=[];for(e=0;e<a.length;e++)n.push(a[e].getAttribute("src")),l(a[e]).toggleClass("fr-draggable",t.opts.videoMove),""===a[e].getAttribute("class")&&a[e].removeAttribute("class"),""===a[e].getAttribute("style")&&a[e].removeAttribute("style");if(s)for(e=0;e<s.length;e++)n.indexOf(s[e].getAttribute("src"))<0&&t.events.trigger("video.removed",[l(s[e])]);s=a}function M(){r||function(){var n;if(t.shared.$video_resizer?(r=t.shared.$video_resizer,a=t.shared.$vid_overlay,t.events.on("destroy",function(){l("body").first().append(r.removeClass("fr-active"))},!0)):(t.shared.$video_resizer=l(document.createElement("div")).attr("class","fr-video-resizer"),r=t.shared.$video_resizer,t.events.$on(r,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(r.append(k("nw")+k("ne")+k("sw")+k("se")),t.shared.$vid_overlay=l(document.createElement("div")).attr("class","fr-video-overlay"),a=t.shared.$vid_overlay,n=r.get(0).ownerDocument,l(n).find("body").first().append(a))),t.events.on("shared.destroy",function(){r.html("").removeData().remove(),r=null,t.opts.videoResize&&(a.remove(),a=null)},!0),t.helpers.isMobile()||t.events.$on(l(t.o_win),"resize.video",function(){P(!0)}),t.opts.videoResize){n=r.get(0).ownerDocument,t.events.$on(r,t._mousedown,".fr-handler",O),t.events.$on(l(n),t._mousemove,x),t.events.$on(l(n.defaultView||n.parentWindow),t._mouseup,F),t.events.$on(a,"mouseleave",F);var s=1,o=null,c=0;t.events.on("keydown",function(a){if(i){var n=-1!=navigator.userAgent.indexOf("Mac OS X")?a.metaKey:a.ctrlKey,r=a.which;(r!==o||200<a.timeStamp-c)&&(s=1),(r==e.KEYCODE.EQUALS||t.browser.mozilla&&r==e.KEYCODE.FF_EQUALS)&&n&&!a.altKey?s=N.call(this,a,1,1,s):(r==e.KEYCODE.HYPHEN||t.browser.mozilla&&r==e.KEYCODE.FF_HYPHEN)&&n&&!a.altKey&&(s=N.call(this,a,2,-1,s)),o=r,c=a.timeStamp}}),t.events.on("keyup",function(){s=1})}}(),(t.$wp||t.$sc).append(r),r.data("instance",t);var n=i.find("iframe, embed, video"),s=0,o=0;t.opts.iframe&&(o=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),s=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"))),r.css("top",(t.opts.iframe?n.offset().top+o-1:n.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?n.offset().left+s-1:n.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",n.get(0).getBoundingClientRect().width).css("height",n.get(0).getBoundingClientRect().height).addClass("fr-active")}function B(a){if(a&&"touchend"==a.type&&o)return!0;if(a&&t.edit.isDisabled())return a.stopPropagation(),a.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var n=0;n<e.INSTANCES.length;n++)e.INSTANCES[n]!=t&&e.INSTANCES[n].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.$el.find(".fr-video.fr-active").removeClass("fr-active"),(i=l(this)).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),J(),M(),v(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function P(e){i&&(t.shared.vid_exit_flag||!0===e)&&(r.removeClass("fr-active"),t.toolbar.enable(),i.removeClass("fr-active"),i=null,W())}function U(){t.shared.vid_exit_flag=!0}function W(){t.shared.vid_exit_flag=!1}function K(a){var n=a.originalEvent.dataTransfer;if(n&&n.files&&n.files.length){var r=n.files[0];if(r&&r.type&&-1!==r.type.indexOf("video")){if(!t.opts.videoUpload)return a.preventDefault(),a.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(a.originalEvent),t.$el.find(".fr-marker").replaceWith(e.MARKERS),t.popups.hideAll();var i=t.popups.get("video.insert");return i||(i=E()),t.popups.setContainer("video.insert",t.$sc),t.popups.show("video.insert",a.originalEvent.pageX,a.originalEvent.pageY),C(),0<=t.opts.videoAllowedTypes.indexOf(r.type.replace(/video\//g,""))?H(n.files):$(h),a.preventDefault(),a.stopPropagation(),!1}}}function H(e){if(void 0!==e&&0<e.length){if(!1===t.events.trigger("video.beforeUpload",[e]))return!1;var a,n=e[0];if((null===t.opts.videoUploadURL||t.opts.videoUploadURL==c)&&!t.opts.videoUploadToS3)return function(e){i&&i.find("iframe")&&i.find("iframe").length&&j();var t=new FileReader;t.onload=function(){t.result;for(var a=atob(t.result.split(",")[1]),n=[],r=0;r<a.length;r++)n.push(a.charCodeAt(r));T(window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:e.type})),!1,null,i)},C(),t.readAsDataURL(e)}(n),!1;if(n.size>t.opts.videoMaxSize)return $(u),!1;if(t.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return $(h),!1;if(t.drag_support.formdata&&(a=t.drag_support.formdata?new FormData:null),a){var r;if(!1!==t.opts.videoUploadToS3)for(r in a.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),a.append("success_action_status","201"),a.append("X-Requested-With","xhr"),a.append("Content-Type",n.type),t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(r)&&a.append(r,t.opts.videoUploadToS3.params[r]);for(r in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(r)&&a.append(r,t.opts.videoUploadParams[r]);a.append(t.opts.videoUploadParam,n);var s=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(s=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var o=t.core.getXHR(s,t.opts.videoUploadMethod);o.onload=function(){(function(e){S("Loading video");var a=this.status,n=this.response,r=this.responseXML,i=this.responseText;try{if(t.opts.videoUploadToS3)if(201==a){var s=function(e){try{var a=l(e).find("Location").text(),n=l(e).find("Key").text();return!1===t.events.trigger("video.uploadedToS3",[a,n,e],!0)?(t.edit.on(),!1):a}catch(t){return $(p,e),!1}}(r);s&&T(s,!1,[],e,n||r)}else $(p,n||r);else if(200<=a&&a<300){var o=function(e){try{if(!1===t.events.trigger("video.uploaded",[e],!0))return t.edit.on(),!1;var a=JSON.parse(e);return a.link?a:($(d,e),!1)}catch(t){return $(p,e),!1}}(i);o&&T(o.link,!1,o,e,n||i)}else $(f,n||i)}catch(e){$(p,n||i)}}).call(o,i)},o.onerror=w,o.upload.onprogress=y,o.onabort=I,C(),t.events.disableBlur(),t.edit.off(),t.events.enableBlur();var g=t.popups.get("video.insert");g&&l(g.off("abortUpload")).on("abortUpload",function(){4!=o.readyState&&o.abort()}),o.send(a)}}}function $(e,a){t.edit.on(),i&&i.find("video").addClass("fr-error"),L(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:g[e]},a])}function G(){if(i){var e=t.popups.get("video.size"),a=i.find("iframe, embed, video");e.find('input[name="width"]').val(a.get(0).style.width||a.attr("width")).trigger("change"),e.find('input[name="height"]').val(a.get(0).style.height||a.attr("height")).trigger("change")}}function Y(e){if(e)return t.popups.onRefresh("video.size",G),!0;var a={buttons:'<div class="fr-buttons fr-tabs">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>",size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},n=t.popups.create("video.size",a);return t.events.$on(t.$wp,"scroll",function(){i&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),_(i))}),n}function V(e){if(void 0===e&&(e=i),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function z(e){void 0===e&&(e=i);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function j(){if(i&&!1!==t.events.trigger("video.beforeRemove",[i])){var e=i;t.popups.hideAll(),P(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks()}}function q(){R()}function X(e,a,n){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+n[0]+" fr-dv"+a[0])):"inline"==a?(e.css({display:"inline-block"}),"center"==n?e.css({float:"none"}):"left"==n?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==n?e.css({textAlign:"left"}):"right"==n?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function Q(){var a=t.$el.find("video").filter(function(){return 0===l(this).parents("span.fr-video").length});if(0!=a.length){a.wrap(l(document.createElement("span")).attr("class","fr-video fr-deletable").attr("contenteditable","false")),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),0<l(this).parents("span.fr-video").length)return!1;for(var a=l(this).attr("src"),n=0;n<e.VIDEO_PROVIDERS.length;n++){var r=e.VIDEO_PROVIDERS[n];if(r.test_regex.test(a)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(r.provider))return!0}return!1}).map(function(){return 0===l(this).parents("object").length?this:l(this).parents("object").get(0)}).wrap(l(document.createElement("span")).attr("class","fr-video").attr("contenteditable","false"));for(var n,r,i,s=t.$el.find("span.fr-video, video"),o=0;o<s.length;o++){var c=l(s[o]);!t.opts.htmlUntouched&&t.opts.useClasses?((i=c).hasClass("fr-dvi")||i.hasClass("fr-dvb")||(i.addClass("fr-fv"+V(i)[0]),i.addClass("fr-dv"+z(i)[0])),t.opts.videoTextNear||c.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||(r=(n=c).hasClass("fr-dvb")?"block":n.hasClass("fr-dvi")?"inline":null,X(n,r,n.hasClass("fr-fvl")?"left":n.hasClass("fr-fvr")?"right":V(n)),n.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl"))}s.toggleClass("fr-draggable",t.opts.videoMove)}}function J(){if(i){t.selection.clear();var e=t.doc.createRange();e.selectNode(i.get(0)),t.selection.get().addRange(e)}}return g[1]="Video cannot be loaded from the passed link.",g[d]="No link in upload response.",g[f]="Error during file upload.",g[p]="Parsing response failed.",g[u]="File is too large.",g[h]="Video file type is invalid.",g[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",t.shared.vid_exit_flag=!1,{_init:function(){t.opts.videoResponsive&&(t.opts.videoResize=!1),t.events.on("drop",K,!0),t.events.on("mousedown window.mousedown",U),t.events.on("window.touchmove",W),t.events.on("mouseup window.mouseup",P),t.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&P()}),t.events.on("video.hideResizer commands.undo commands.redo element.dropped",function(){P(!0)}),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){o=!1}),t.events.$on(t.$el,"touchmove",function(){o=!0})),t.events.on("html.set",Q),Q(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation(),(t.browser.msie||t.browser.edge)&&(e.target.dragDrop(),B.call(this,e))}),t.events.$on(t.$el,"click touchend","span.fr-video",function(e){if("false"==l(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;B.call(this,e)}),t.events.on("keydown",function(a){var n=a.which;return!i||n!=e.KEYCODE.BACKSPACE&&n!=e.KEYCODE.DELETE?i&&n==e.KEYCODE.ESC?(P(!0),a.preventDefault(),!1):i&&n!=e.KEYCODE.F10&&!t.keys.isBrowserAction(a)?(a.preventDefault(),!1):void 0:(a.preventDefault(),j(),t.undo.saveStep(),!1)},!0),t.events.on("toolbar.esc",function(){if(i)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("toolbar.focusEditor",function(){if(i)return!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),t.$wp&&(D(),t.events.on("contentChanged",D)),E(!0),Y(!0)},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),a=t.popups.get("video.insert");if(a||(a=E()),R(),!a.hasClass("fr-active"))if(t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb),e.isVisible()){var n=t.button.getPosition(e),r=n.left,i=n.top;t.popups.show("video.insert",r,i,e.outerHeight())}else t.position.forSelection(a),t.popups.show("video.insert")},showLayer:function(e){var a,n,r=t.popups.get("video.insert");if(!i&&!t.opts.toolbarInline){var s=t.$tb.find('.fr-command[data-cmd="insertVideo"]');a=s.offset().left,n=s.offset().top+(t.opts.toolbarBottom?10:s.outerHeight()-10)}t.opts.toolbarInline&&(n=r.offset().top-t.helpers.getPX(r.css("margin-top")),r.hasClass("fr-above")&&(n+=r.outerHeight())),r.find(".fr-layer").removeClass("fr-active"),r.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",a,n,0),t.accessibility.focusPopup(r)},refreshByURLButton:function(e){var a=t.popups.get("video.insert");a&&a.find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshEmbedButton:function(e){var a=t.popups.get("video.insert");a&&a.find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshUploadButton:function(e){var a=t.popups.get("video.insert");a&&a.find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:H,insertByURL:function(a){void 0===a&&(a=(t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"").trim());var n=null;if(/^http/.test(a)||(a="https://"+a),t.helpers.isURL(a))for(var r=0;r<e.VIDEO_PROVIDERS.length;r++){var i=e.VIDEO_PROVIDERS[r];if(i.test_regex.test(a)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(i.provider)){n=a.replace(i.url_regex,i.url_text),n=i.html.replace(/\{url\}/,n);break}}n?b(n):(L(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.linkError",[a]))},insertEmbed:function(a){void 0===a&&(a=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==a.length&&e.VIDEO_EMBED_REGEX.test(a)?b(a):(L(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.codeError",[a]))},insert:b,align:function(e){i.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?i.addClass("fr-fvl"):"right"==e&&i.addClass("fr-fvr"):X(i,z(),e),J(),M(),v(),t.selection.clear()},refreshAlign:function(e){if(!i)return!1;e.find(">*").first().replaceWith(t.icon.create("video-align-"+V()))},refreshAlignOnShow:function(e,t){i&&t.find('.fr-command[data-param1="'+V()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(e){i.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?i.addClass("fr-dvi"):"block"==e&&i.addClass("fr-dvb"):X(i,e,V()),J(),M(),v(),t.selection.clear()},refreshDisplayOnShow:function(e,t){i&&t.find('.fr-command[data-param1="'+z()+'"]').addClass("fr-active").attr("aria-selected",!0)},remove:j,hideProgressBar:R,showSizePopup:function(){var e=t.popups.get("video.size");e||(e=Y()),R(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var a=i.find("iframe, embed, video"),n=a.offset().left+a.outerWidth()/2,r=a.offset().top+a.height();t.popups.show("video.size",n,r,a.height(),!0)},replace:function(){var e=t.popups.get("video.insert");e||(e=E()),t.popups.isVisible("video.insert")||(R(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var a=i.offset().left+i.outerWidth()/2,n=i.offset().top+i.height();t.popups.show("video.insert",a,n,i.outerHeight(),!0)},back:function(){i?(t.events.disableBlur(),i[0].click()):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())},setSize:function(e,a){if(i){var n=t.popups.get("video.size"),r=i.find("iframe, embed, video");r.css("width",e||n.find('input[name="width"]').val()),r.css("height",a||n.find('input[name="height"]').val()),r.get(0).style.width&&r.removeAttr("width"),r.get(0).style.height&&r.removeAttr("height"),n.find("input:focus").blur(),setTimeout(function(){i.trigger("click")},t.helpers.isAndroid()?50:0)}},get:function(){return i},showProgressBar:C}},e.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.DefineIcon("insertVideo",{NAME:"video-camera",FA5NAME:"camera",SVG_KEY:"insertVideo"}),e.DefineIcon("videoByURL",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.DefineIcon("videoEmbed",{NAME:"code",SVG_KEY:"codeView"}),e.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.DefineIcon("videoUpload",{NAME:"upload",SVG_KEY:"upload"}),e.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.DefineIcon("videoDisplay",{NAME:"star",SVG_KEY:"star"}),e.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.DefineIcon("video-align",{NAME:"align-left",SVG_KEY:"align Left"}),e.DefineIcon("video-align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("video-align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("video-align-center",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.DefineIcon("videoAlign",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.videoAlign.options;for(var n in a)a.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+n+'" title="'+this.language.translate(a[n])+'">'+this.icon.create("video-align-"+n)+'<span class="fr-sr-only">'+this.language.translate(a[n])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.DefineIcon("videoReplace",{NAME:"exchange",FA5NAME:"exchange-alt",SVG_KEY:"replaceImage"}),e.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.DefineIcon("videoRemove",{NAME:"trash",SVG_KEY:"remove"}),e.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.DefineIcon("videoSize",{NAME:"arrows-alt",SVG_KEY:"imageSize"}),e.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.DefineIcon("videoBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),Object.assign(e.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom","text-decoration","font-weight","font-style","text-indent","border","border-.*","line-height","list-style-type"],wordPasteModal:!0,wordPasteKeepFormatting:!0}),e.PLUGINS.wordPaste=function(t){var a,n,r=t.$,i="word_paste",s={};function o(a){var o=t.opts.wordAllowedStyleProps;a||(t.opts.wordAllowedStyleProps=[]),0===n.indexOf("<colgroup>")&&(n="<table>"+n+"</table>"),n=function(a,n){0<=a.indexOf("<html")&&(a=a.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/i,"$1")),function(e){for(var t=e.split("v:shape"),a=1;a<t.length;a++){var n=t[a],r=n.split(' id="')[1];if(r&&1<r.length){r=r.split('"')[0];var i=n.split(' o:spid="')[1];i&&1<i.length&&(i=i.split('"')[0],s[r]=i)}}}(a);var i=(new DOMParser).parseFromString(a,"text/html"),o=i.head,u=i.body,g=function(e){var t={},a=e.getElementsByTagName("style");if(a.length){var n=a[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(n)for(var r=0;r<n.length;r++){var i=n[r],s=i.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=i.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");s=s.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var l=s.split(", "),c=0;c<l.length;c++)t[l[c]]=o}}return t}(o);c(u,function(t){if(t.nodeType===Node.TEXT_NODE&&/\n|\u00a0|\r/.test(t.data)){if(!/\S| /.test(t.data)&&!/[\u00a0]+/.test(t.data))return t.data===e.UNICODE_NBSP?(t.data="​",!0):1===t.data.length&&10===t.data.charCodeAt(0)?(t.data=" ",!0):(l(t),!1);t.data=t.data.replace(/\n|\r/gi," ")}return!0}),c(u,function(e){return e.nodeType!==Node.ELEMENT_NODE||"V:IMAGEDATA"!==e.tagName&&"IMG"!==e.tagName||function(e,a){if(a){var n;if("IMG"===e.tagName){var i=e.getAttribute("src");if(!i||-1===i.indexOf("file://"))return;if(0===i.indexOf("file://")&&t.helpers.isURL(e.getAttribute("alt")))return void e.setAttribute("src",e.getAttribute("alt"));(n=s[e.getAttribute("v:shapes")])||(n=e.getAttribute("v:shapes"),e.parentNode&&e.parentNode.parentNode&&0<=e.parentNode.parentNode.innerHTML.indexOf("msEquation")&&(n=null))}else n=e.parentNode.getAttribute("o:spid");if(e.removeAttribute("height"),n){!function(e){m={},v(e,"i","\\shppict"),v(e,"s","\\shp{")}(a);var o=m[n.substring(7)];if(o){var l=function(e){for(var t=e.match(/[0-9a-f]{2}/gi),a=[],n=0;n<t.length;n++)a.push(String.fromCharCode(parseInt(t[n],16)));var r=a.join("");return btoa(r)}(o.image_hex),c="data:"+o.image_type+";base64,"+l;"IMG"===e.tagName?(e.src=c,e.setAttribute("data-fr-image-pasted",!0)):r(e.parentNode).before('<img data-fr-image-pasted="true" src="'+c+'" style="'+e.parentNode.getAttribute("style")+'">').remove()}}}}(e,n),!0});for(var b=u.querySelectorAll("ul > ul, ul > ol, ol > ul, ol > ol"),A=b.length-1;0<=A;A--)b[A].previousElementSibling&&"LI"===b[A].previousElementSibling.tagName&&b[A].previousElementSibling.appendChild(b[A]);c(u,function(e){if(e.nodeType===Node.TEXT_NODE)return e.data=e.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(e.nodeType===Node.ELEMENT_NODE){if(d(e)){var t,a=e.parentNode,n=e.previousSibling,r=function e(t,a,n){var r,i,s,o,l,c,p=/[0-9a-zA-Z]./gi,u=!1,h=t.querySelector('span[style="mso-list:Ignore"]');if(h&&(u=u||p.test(h.textContent)),1==u){var g=h.textContent.trim().split(".")[0];"a"==g?c="lower-alpha;":"A"==g?c="upper-alpha;":"1"==g?c="decimal;":"i"==g?c="lower-roman;":"I"==g?c="upper-roman;":"o"==g&&(c="circle;"),c="list-style-type: "+c,l="ol"}else l="ul";for(var m=c?"<"+l+' style = "'+c+'">':"<"+l+">";t;){if(!d(t)){if(t.outerHTML&&0<t.outerHTML.indexOf("mso-bookmark")&&0==(t.textContent||"").length){t=t.nextElementSibling;continue}break}var v=t.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1");if((n=n||v)<v)m+=(o=e(t,a,v)).el.outerHTML,t=o.currentNode;else{if(v<n)break;t.firstElementChild&&t.firstElementChild.firstElementChild&&t.firstElementChild.firstElementChild.firstChild&&(p.lastIndex=0,r=p.test(t.firstElementChild.firstElementChild.firstChild.data||t.firstElementChild.firstElementChild.firstChild.firstChild&&t.firstElementChild.firstElementChild.firstChild.firstChild.data||"")),s&&s.firstElementChild&&s.firstElementChild.firstElementChild&&s.firstElementChild.firstElementChild.firstChild&&(p.lastIndex=0,i=p.test(s.firstElementChild.firstElementChild.firstChild.data||s.firstElementChild.firstElementChild.firstChild.firstChild&&s.firstElementChild.firstElementChild.firstChild.firstChild.data||"")),void 0===i||i===r?m+="<li>"+f(t,a)+"</li>":(m+=(o=e(t,a,v)).el.outerHTML,t=o.currentNode);var E=t&&t.nextElementSibling;E&&(s=E.previousElementSibling),t&&t.parentNode&&t.parentNode.removeChild(t),t=E}}m+="</"+l+">";var b=document.createElement("div");return b.innerHTML=m,{el:b.firstElementChild,currentNode:t}}(e,g).el;return(t=n?n.nextSibling:a.firstChild)?a.insertBefore(r,t):a.appendChild(r),!1}return"FONT"===e.tagName&&g["."+e.getAttribute("class")]&&(e=p(e,"span")),E(e,g)}if(e.nodeType!==Node.COMMENT_NODE)return!0;if(-1<e.data.indexOf("[if !supportLineBreakNewLine]"))for(var i=e.nextSibling;i;)(i=e.nextSibling)&&l(i),i.data&&-1<i.data.indexOf("[endif]")&&(i=null);return l(e),!1}),c(u,function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e.tagName;if(!e.innerHTML&&-1===["BR","IMG"].indexOf(t)){for(var a=e.parentNode;a&&(l(e),!(e=a).innerHTML);)a=e.parentNode;return!1}!function(e){var t=e.getAttribute("style");if(t){(t=h(t))&&";"!==t.slice(-1)&&(t+=";");var a=t.match(/(^|\S+?):.+?;{1,1}/gi);if(a){for(var n={},r=0;r<a.length;r++){var i=a[r].split(":");2===i.length&&("text-align"===i[0]&&"SPAN"===e.tagName||(n[i[0]]=i[1]))}var s="";for(var o in n)if(n.hasOwnProperty(o)){if("font-size"===o&&"pt;"===n[o].slice(-3)){var l=null;try{l=parseFloat(n[o].slice(0,-3),10)}catch(e){l=null}l&&(l=Math.round(1.33*l),n[o]=l+"px;")}s+=o+":"+n[o]}s&&e.setAttribute("style",s)}}}(e)}return!0}),c(u,function(e){if(e&&"A"===e.nodeName&&""===e.href){for(var t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}return!0});var T=u.outerHTML,C=t.opts.htmlAllowedStyleProps;return t.opts.htmlAllowedStyleProps=t.opts.wordAllowedStyleProps,T=t.clean.html(T,t.opts.wordDeniedTags,t.opts.wordDeniedAttrs,!1),t.opts.htmlAllowedStyleProps=C,T}(n=n.replace(/<span[\n\r ]*style='mso-spacerun:yes'>([\r\n\u00a0 ]*)<\/span>/g,function(e,t){for(var a="",n=0;n++<t.length;)a+="&nbsp;";return a}),t.paste.getRtfClipboard());var u=t.doc.createElement("DIV");u.innerHTML=n,t.html.cleanBlankSpaces(u),n=u.innerHTML,n=(n=t.paste.cleanEmptyTagsAndDivs(n)).replace(/\u200b/g,""),t.modals.hide(i),t.paste.clean(n,!0,!0),t.opts.wordAllowedStyleProps=o}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){if(t(e))for(var a=e.firstChild;a;){var n=a,r=a.previousSibling;a=a.nextSibling,c(n,t),n.previousSibling||n.nextSibling||n.parentNode||!a||r===a.previousSibling||!a.parentNode?n.previousSibling||n.nextSibling||n.parentNode||!a||a.previousSibling||a.nextSibling||a.parentNode||(r?a=r.nextSibling?r.nextSibling.nextSibling:null:e.firstChild&&(a=e.firstChild.nextSibling)):a=r?r.nextSibling:e.firstChild}}function d(e){if(!e.getAttribute("style")||!/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi,"")))return!1;try{if(!e.querySelector('[style="mso-list:Ignore"]'))return!!(e.outerHTML&&0<=e.outerHTML.indexOf("\x3c!--[if !supportLists]--\x3e"))}catch(e){return!1}return!0}function f(e,a){var n=e.cloneNode(!0);if(-1!==["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName)){var r=document.createElement(e.tagName.toLowerCase());r.setAttribute("style",e.getAttribute("style")),r.innerHTML=n.innerHTML,n.innerHTML=r.outerHTML}c(n,function(e){if(e.nodeType==Node.COMMENT_NODE&&(t.browser.msie||t.browser.safari||t.browser.edge))try{if("[if !supportLists]"===e.data){for(e=e.nextSibling;e&&e.nodeType!==Node.COMMENT_NODE;){var n=e.nextSibling;e.parentNode.removeChild(e),e=n}e&&e.nodeType==Node.COMMENT_NODE&&e.parentNode.removeChild(e)}}catch(e){}return e.nodeType===Node.ELEMENT_NODE&&("mso-list:Ignore"===e.getAttribute("style")&&e.parentNode.removeChild(e),e.setAttribute("style",function(e){var t="",a=e.getAttribute("style");return a&&["line-height","font-family","font-size","color","background"].forEach(function(e){var n=a.match(new RegExp(e+":.*;"));n&&(t+=n[0]+";")}),t}(e)),E(e,a)),!0});var i=n.innerHTML;return i.replace(/<!--[\s\S]*?-->/gi,"")}function p(e,t){for(var a=document.createElement(t),n=0;n<e.attributes.length;n++){var r=e.attributes[n].name;a.setAttribute(r,e.getAttribute(r))}return a.innerHTML=e.innerHTML,e.parentNode.replaceChild(a,e),a}function u(e){var t=e.getAttribute("align");t&&(e.style["text-align"]=t,e.removeAttribute("align"))}function h(e){return e.replace(/\n|\r|\n\r|&quot;/g,"")}function g(e,t,a){if(t){var n=e.getAttribute("style");n&&";"!==n.slice(-1)&&(n+=";"),t&&";"!==t.slice(-1)&&(t+=";"),t=t.replace(/\n/gi,"");var r;r=a?(n||"")+t:t+(n||""),e.setAttribute("style",r)}}var m=null;function v(e,t,a){for(var n=e.split(a),r=1;r<n.length;r++){var i=n[r];if(1<(i=i.split("shplid")).length){i=i[1];for(var s="",o=0;o<i.length&&"\\"!==i[o]&&"{"!==i[o]&&" "!==i[o]&&"\r"!==i[o]&&"\n"!==i[o];)s+=i[o],o++;var l=i.split("bliptag");if(l&&l.length<2)continue;var c=null;if(-1!==l[0].indexOf("pngblip")?c="image/png":-1!==l[0].indexOf("jpegblip")&&(c="image/jpeg"),!c)continue;var d=l[1].split("}");if(d&&d.length<2)continue;var f=void 0;if(2<d.length&&-1!==d[0].indexOf("blipuid"))f=d[1].split(" ");else{if((f=d[0].split(" "))&&f.length<2)continue;f.shift()}var p=f.join("");m[t+s]={image_hex:p,image_type:c}}}}function E(a,n){var r=a.tagName,i=r.toLowerCase();if(a.firstElementChild&&("I"===a.firstElementChild.tagName?p(a.firstElementChild,"em"):"B"===a.firstElementChild.tagName&&p(a.firstElementChild,"strong")),-1!==["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"].indexOf(r))return l(a),!1;for(var s=["META","LINK","XML","ST1:","O:","W:","FONT"],o=0;o<s.length;o++)if(-1!==r.indexOf(s[o]))return a.innerHTML&&(a.outerHTML=a.innerHTML),l(a),!1;if("TD"!==r){var c=a.getAttribute("class")||"MsoNormal";if(n&&c){for(var f=(c=h(c)).split(" "),m=0;m<f.length;m++){var v=[],E="."+f[m];v.push(E),E=i+E,v.push(E);for(var b=0;b<v.length;b++)n[v[b]]&&g(a,n[v[b]])}a.removeAttribute("class")}n&&n[i]&&g(a,n[i])}if(-1!==["P","H1","H2","H3","H4","H5","H6","PRE"].indexOf(r)){var A=a.getAttribute("class");if(A&&(n&&n[r.toLowerCase()+"."+A]&&g(a,n[r.toLowerCase()+"."+A]),-1!==A.toLowerCase().indexOf("mso"))){var T=h(A);(T=T.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""))?a.setAttribute("class",T):a.removeAttribute("class")}var C=a.getAttribute("style");if(C){var R=C.match(/text-align:.+?[; "]{1,1}/gi);R&&R[R.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1")}u(a)}if("TR"===r&&function(a,n){t.node.clearAttributes(a);for(var r=a.firstElementChild,i=0,s=!1,o=null;r;){r.firstElementChild&&-1!==r.firstElementChild.tagName.indexOf("W:")&&(r.innerHTML=r.firstElementChild.innerHTML),(o=r.getAttribute("width"))||s||(s=!0),i+=parseInt(o,10),(!r.firstChild||r.firstChild&&r.firstChild.data===e.UNICODE_NBSP)&&(r.firstChild&&l(r.firstChild),r.innerHTML="<br>");for(var c=r.firstElementChild,f=1===r.children.length;c;)"P"!==c.tagName||d(c)||f&&u(c),c=c.nextElementSibling;if(n){var p=r.getAttribute("class");if(p){var m=(p=h(p)).match(/xl[0-9]+/gi);if(m){var v="."+m[0];n[v]&&g(r,n[v])}}n.td&&g(r,n.td)}var E=r.getAttribute("style");E&&(E=h(E))&&";"!==E.slice(-1)&&(E+=";");var b=r.getAttribute("valign");if(!b&&E){var A=E.match(/vertical-align:.+?[; "]{1,1}/gi);A&&(b=A[A.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var T=null;if(E){var C=E.match(/text-align:.+?[; "]{1,1}/gi);C&&(T=C[C.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"===T&&(T=null)}var R=null;if(E){var S=E.match(/background:.+?[; "]{1,1}/gi);S&&(R=S[S.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var L=r.getAttribute("colspan"),_=r.getAttribute("rowspan");L&&r.setAttribute("colspan",L),_&&r.setAttribute("rowspan",_),b&&(r.style["vertical-align"]=b),T&&(r.style["text-align"]=T),R&&(r.style["background-color"]=R),o&&r.setAttribute("width",o),r=r.nextElementSibling}for(r=a.firstElementChild;r;)o=r.getAttribute("width"),s?r.removeAttribute("width"):r.setAttribute("width",100*parseInt(o,10)/i+"%"),r=r.nextElementSibling}(a,n),"A"!==r||a.attributes.getNamedItem("href")||a.attributes.getNamedItem("name")||!a.innerHTML||(a.outerHTML=a.innerHTML),"A"==r&&a.getAttribute("href")&&a.querySelector("img"))for(var S=a.querySelectorAll("span"),L=0;L<S.length;L++)S[L].innerText||(S[L].outerHTML=S[L].innerHTML);if("TD"!==r&&"TH"!==r||a.innerHTML||(a.innerHTML="<br>"),"TABLE"===r&&(a.style.width=a.style.width),a.getAttribute("lang")&&a.removeAttribute("lang"),a.getAttribute("style")&&-1!==a.getAttribute("style").toLowerCase().indexOf("mso")){var _=h(a.getAttribute("style"));(_=_.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""))?a.setAttribute("style",_):a.removeAttribute("style")}return!0}return{_init:function(){t.events.on("paste.wordPaste",function(e){return n=e,t.opts.wordPasteModal?function(){if(!a){var e='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+t.language.translate("Word Paste Detected")+"</h4>",n=function(){var e='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return e+='<p style="text-align: left;">'+t.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",(e+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+t.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+t.language.translate("Keep")+"</button></div>")+"</div>"}(),s=t.modals.create(i,e,n),o=s.$body;a=s.$modal,s.$modal.addClass("fr-middle"),t.events.bindClick(o,"button.fr-remove-word",function(){(a.data("instance")||t).wordPaste.clean()}),t.events.bindClick(o,"button.fr-keep-word",function(){(a.data("instance")||t).wordPaste.clean(!0)}),t.events.$on(r(t.o_win),"resize",function(){t.modals.resize(i)})}t.modals.show(i),t.modals.resize(i)}():o(t.opts.wordPasteKeepFormatting),!1})},clean:o}}});